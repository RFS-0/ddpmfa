(function(t){var e=function(t){return{width:t.width(),height:t.height()}};var n=function(t,e){return{x:t,y:e}};var a=function(t,e){return t.x==e.x&&t.y==e.y};t.fn.pan=function(i){var o=this;var r=this.children(":first");var s=n(Number(r.css("left").replace("px",""))|0,Number(r.css("top").replace("px",""))|0);var l=e(o);var u=e(r);var c=n(-u.width+l.width,-u.height+l.height);var f=n(0,0);var h=.25*Math.min(l.width,l.height);var d=t.extend({autoSpeedX:0,autoSpeedY:0,mouseControl:"kinetic",kineticDamping:.8,mouseEdgeSpeed:5,mouseEdgeWidth:h,proportionalSmoothing:.5,updateInterval:50,mousePan:null},i);var p=false;var _=n(0,0);var v=n(0,0);var m=false;var g=null;var y=n(0,0);var b=d.updateInterval;var x=function(){var t={edge:P,proportional:w,kinetic:C};var e=d.mouseControl;if(!t[e]()){s.x+=d.autoSpeedX;s.y+=d.autoSpeedY}j();if(s.x==c.x)d.autoSpeedX=Math.abs(d.autoSpeedX);if(s.x==f.x)d.autoSpeedX=-Math.abs(d.autoSpeedX);if(s.y==c.y)d.autoSpeedY=Math.abs(d.autoSpeedY);if(s.y==f.y)d.autoSpeedY=-Math.abs(d.autoSpeedY);r.css("left",s.x+"px");r.css("top",s.y+"px")};var P=function(){if(!p)return false;if(typeof d["beforeEdgeMove"]=="function"){var t=d.beforeEdgeMove.apply(o,[m])!==false;if(!t){return false}}var e=n(0,0);if(v.x<d.mouseEdgeWidth){s.x+=d.mouseEdgeSpeed;e.x=-1}if(v.x>l.width-d.mouseEdgeWidth){s.x-=d.mouseEdgeSpeed;e.x=1}if(v.y<d.mouseEdgeWidth){s.y+=d.mouseEdgeSpeed;e.y=-1}if(v.y>l.height-d.mouseEdgeWidth){s.y-=d.mouseEdgeSpeed;e.y=1}E(e);return true};var w=function(){if(!p)return false;var t=v.x/l.width;var e=v.y/l.height;targetOffset=n((c.x-f.x)*t+f.x,(c.y-f.y)*e+f.y);var a=1-d.proportionalSmoothing;s=n((targetOffset.x-s.x)*a+s.x,(targetOffset.y-s.y)*a+s.y);return true};var C=function(){if(m){if(g==null){g=n(v.x,v.y)}y=n(v.x-g.x,v.y-g.y);g=n(v.x,v.y)}s.x+=y.x;s.y+=y.y;y=n(y.x*d.kineticDamping,y.y*d.kineticDamping);var t=Math.pow(y.x,2)+Math.pow(y.y,2);return t>.01};var j=function(){if(s.x<c.x)s.x=c.x;if(s.x>f.x)s.x=f.x;if(s.y<c.y)s.y=c.y;if(s.y>f.y)s.y=f.y};var E=function(t){if(!a(t,_)){_=t;if(d.mousePan){d.mousePan(_)}}};this.bind("mousemove",function(t){v.x=t.pageX-o.offset().left;v.y=t.pageY-o.offset().top;p=true});this.bind("mouseleave",function(t){p=false;m=false;g=null;E(n(0,0))});this.bind("mousedown",function(t){m=true;return false});this.bind("mouseup",function(t){m=false;g=null});setInterval(x,b);return this}})(jQuery);(function(t,e){if(typeof define==="function"&&define.amd){define(["jquery"],function(n){return e(t,n)})}else if(typeof exports==="object"){e(t,require("jquery"))}else{e(t,t.jQuery)}})(typeof window!=="undefined"?window:this,function(t,e){"use strict";var n=t.document;var a="__pz__";var i=Array.prototype.slice;var o=/trident\/7./i;var r=function(){if(o.test(navigator.userAgent)){return false}var t=n.createElement("input");t.setAttribute("oninput","return");return typeof t.oninput==="function"}();var s=/([A-Z])/g;var l=/^http:[\w\.\/]+svg$/;var u="(\\-?\\d[\\d\\.e-]*)";var c="\\,?\\s*";var f=new RegExp("^matrix\\("+u+c+u+c+u+c+u+c+u+c+u+"\\)$");function h(t,e){var n=t.length;while(--n){if(Math.round(+t[n])!==Math.round(+e[n])){return false}}return true}function d(t){var n={range:true,animate:true};if(typeof t==="boolean"){n.animate=t}else{e.extend(n,t)}return n}function p(t,n,a,i,o,r,s,l,u){if(e.type(t)==="array"){this.elements=[+t[0],+t[2],+t[4],+t[1],+t[3],+t[5],0,0,1]}else{this.elements=[t,n,a,i,o,r,s||0,l||0,u||1]}}p.prototype={x:function(t){var e=t instanceof _;var n=this.elements,a=t.elements;if(e&&a.length===3){return new _(n[0]*a[0]+n[1]*a[1]+n[2]*a[2],n[3]*a[0]+n[4]*a[1]+n[5]*a[2],n[6]*a[0]+n[7]*a[1]+n[8]*a[2])}else if(a.length===n.length){return new p(n[0]*a[0]+n[1]*a[3]+n[2]*a[6],n[0]*a[1]+n[1]*a[4]+n[2]*a[7],n[0]*a[2]+n[1]*a[5]+n[2]*a[8],n[3]*a[0]+n[4]*a[3]+n[5]*a[6],n[3]*a[1]+n[4]*a[4]+n[5]*a[7],n[3]*a[2]+n[4]*a[5]+n[5]*a[8],n[6]*a[0]+n[7]*a[3]+n[8]*a[6],n[6]*a[1]+n[7]*a[4]+n[8]*a[7],n[6]*a[2]+n[7]*a[5]+n[8]*a[8])}return false},inverse:function(){var t=1/this.determinant(),e=this.elements;return new p(t*(e[8]*e[4]-e[7]*e[5]),t*-(e[8]*e[1]-e[7]*e[2]),t*(e[5]*e[1]-e[4]*e[2]),t*-(e[8]*e[3]-e[6]*e[5]),t*(e[8]*e[0]-e[6]*e[2]),t*-(e[5]*e[0]-e[3]*e[2]),t*(e[7]*e[3]-e[6]*e[4]),t*-(e[7]*e[0]-e[6]*e[1]),t*(e[4]*e[0]-e[3]*e[1]))},determinant:function(){var t=this.elements;return t[0]*(t[8]*t[4]-t[7]*t[5])-t[3]*(t[8]*t[1]-t[7]*t[2])+t[6]*(t[5]*t[1]-t[4]*t[2])}};function _(t,e,n){this.elements=[t,e,n]}_.prototype.e=p.prototype.e=function(t){return this.elements[t]};function v(t,i){if(!(this instanceof v)){return new v(t,i)}if(t.nodeType!==1){e.error("Panzoom called on non-Element node")}if(!e.contains(n,t)){e.error("Panzoom element must be attached to the document")}var o=e.data(t,a);if(o){return o}this.options=i=e.extend({},v.defaults,i);this.elem=t;var r=this.$elem=e(t);this.$set=i.$set&&i.$set.length?i.$set:r;this.$doc=e(t.ownerDocument||n);this.$parent=r.parent();this.parent=this.$parent[0];this.isSVG=l.test(t.namespaceURI)&&t.nodeName.toLowerCase()!=="svg";this.panning=false;this._buildTransform();this._transform=e.cssProps.transform.replace(s,"-$1").toLowerCase();this._buildTransition();this.resetDimensions();var u=e();var c=this;e.each(["$zoomIn","$zoomOut","$zoomRange","$reset"],function(t,e){c[e]=i[e]||u});this.enable();this.scale=this.getMatrix()[0];this._checkPanWhenZoomed();e.data(t,a,this)}v.rmatrix=f;v.defaults={eventNamespace:".panzoom",transition:true,cursor:"move",disablePan:false,disableZoom:false,disableXAxis:false,disableYAxis:false,which:1,increment:.3,linearZoom:false,panOnlyWhenZoomed:false,minScale:.3,maxScale:6,rangeStep:.05,duration:200,easing:"ease-in-out",contain:false};v.prototype={constructor:v,instance:function(){return this},enable:function(){this._initStyle();this._bind();this.disabled=false},disable:function(){this.disabled=true;this._resetStyle();this._unbind()},isDisabled:function(){return this.disabled},destroy:function(){this.disable();e.removeData(this.elem,a)},resetDimensions:function(){this.container=this.parent.getBoundingClientRect();var t=this.elem;var n=t.getBoundingClientRect();var a=Math.abs(this.scale);this.dimensions={width:n.width,height:n.height,left:e.css(t,"left",true)||0,top:e.css(t,"top",true)||0,border:{top:e.css(t,"borderTopWidth",true)*a||0,bottom:e.css(t,"borderBottomWidth",true)*a||0,left:e.css(t,"borderLeftWidth",true)*a||0,right:e.css(t,"borderRightWidth",true)*a||0},margin:{top:e.css(t,"marginTop",true)*a||0,left:e.css(t,"marginLeft",true)*a||0}}},reset:function(t){t=d(t);var e=this.setMatrix(this._origTransform,t);if(!t.silent){this._trigger("reset",e)}},resetZoom:function(t){t=d(t);var e=this.getMatrix(this._origTransform);t.dValue=e[3];this.zoom(e[0],t)},resetPan:function(t){var e=this.getMatrix(this._origTransform);this.pan(e[4],e[5],d(t))},setTransform:function(t){var n=this.$set;var a=n.length;while(a--){e.style(n[a],"transform",t);if(this.isSVG){n[a].setAttribute("transform",t)}}},getTransform:function(t){var n=this.$set;var a=n[0];if(t){this.setTransform(t)}else{t=e.style(a,"transform");if(this.isSVG&&(!t||t==="none")){t=e.attr(a,"transform")||"none"}}if(t!=="none"&&!f.test(t)){this.setTransform(t=e.css(a,"transform"))}return t||"none"},getMatrix:function(t){var e=f.exec(t||this.getTransform());if(e){e.shift()}return e||[1,0,0,1,0,0]},getScale:function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},setMatrix:function(t,n){if(this.disabled){return}if(!n){n={}}if(typeof t==="string"){t=this.getMatrix(t)}var a=this.getScale(t);var i=typeof n.contain!=="undefined"?n.contain:this.options.contain;if(i){var o=n.dims;if(!o){this.resetDimensions();o=this.dimensions}var r,s,l;var u=this.container;var c=o.width;var f=o.height;var h=u.width;var d=u.height;var p=h/c;var _=d/f;if(this.$parent.css("textAlign")!=="center"||e.css(this.elem,"display")!=="inline"){l=(c-this.elem.offsetWidth)/2;r=l-o.border.left;s=c-h-l+o.border.right}else{r=s=(c-h)/2}var v=(f-d)/2+o.border.top;var m=(f-d)/2-o.border.top-o.border.bottom;if(i==="invert"||i==="automatic"&&p<1.01){t[4]=Math.max(Math.min(t[4],r-o.border.left),-s)}else{t[4]=Math.min(Math.max(t[4],r),-s)}if(i==="invert"||i==="automatic"&&_<1.01){t[5]=Math.max(Math.min(t[5],v-o.border.top),-m)}else{t[5]=Math.min(Math.max(t[5],v),-m)}}if(n.animate!=="skip"){this.transition(!n.animate)}if(n.range){this.$zoomRange.val(a)}if(this.options.disableXAxis||this.options.disableYAxis){var g=this.getMatrix();if(this.options.disableXAxis){t[4]=g[4]}if(this.options.disableYAxis){t[5]=g[5]}}this.setTransform("matrix("+t.join(",")+")");this.scale=a;this._checkPanWhenZoomed(a);if(!n.silent){this._trigger("change",t)}return t},isPanning:function(){return this.panning},transition:function(t){if(!this._transition){return}var n=t||!this.options.transition?"none":this._transition;var a=this.$set;var i=a.length;while(i--){if(e.style(a[i],"transition")!==n){e.style(a[i],"transition",n)}}},pan:function(t,e,n){if(this.options.disablePan){return}if(!n){n={}}var a=n.matrix;if(!a){a=this.getMatrix()}if(n.relative){t+=+a[4];e+=+a[5]}a[4]=t;a[5]=e;this.setMatrix(a,n);if(!n.silent){this._trigger("pan",a[4],a[5])}},zoom:function(t,n){if(typeof t==="object"){n=t;t=null}else if(!n){n={}}var a=e.extend({},this.options,n);if(a.disableZoom){return}var i=false;var o=a.matrix||this.getMatrix();var r=new p(o);var s=this.getScale(o);if(typeof t!=="number"){if(a.linearZoom){t=1+a.increment*(t?-1:1)/s}else{t=t?1/(1+a.increment):1+a.increment}i=true}else{t=1/s}t=Math.max(Math.min(t,a.maxScale/s),a.minScale/s);var l=r.x(new p(t,0,0,0,typeof a.dValue==="number"?a.dValue/s:t,0));var u=a.focal;if(u&&!a.disablePan){this.resetDimensions();var c=a.dims=this.dimensions;var f=u.clientX;var h=u.clientY;if(!this.isSVG){f-=c.width/s/2;h-=c.height/s/2}var d=new _(f,h,1);var v=this.parentOffset||this.$parent.offset();var m=new p(1,0,v.left-this.$doc.scrollLeft(),0,1,v.top-this.$doc.scrollTop());var g=r.inverse().x(m.inverse().x(d));r=r.x(new p([t,0,0,t,0,0]));d=m.x(r.x(g));o[4]=+o[4]+(f-d.e(0));o[5]=+o[5]+(h-d.e(1))}o[0]=l.e(0);o[1]=l.e(3);o[2]=l.e(1);o[3]=l.e(4);this.setMatrix(o,{animate:typeof a.animate!=="undefined"?a.animate:i,range:!a.noSetRange});if(!a.silent){this._trigger("zoom",t,a)}},option:function(t,n){var a;if(!t){return e.extend({},this.options)}if(typeof t==="string"){if(arguments.length===1){return this.options[t]!==undefined?this.options[t]:null}a={};a[t]=n}else{a=t}this._setOptions(a)},_setOptions:function(t){e.each(t,e.proxy(function(t,n){switch(t){case"disablePan":this._resetStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._unbind()}this.options[t]=n;switch(t){case"disablePan":this._initStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":this[t]=n;case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._bind();break;case"cursor":e.style(this.elem,"cursor",n);break;case"minScale":this.$zoomRange.attr("min",n);break;case"maxScale":this.$zoomRange.attr("max",n);break;case"rangeStep":this.$zoomRange.attr("step",n);break;case"startTransform":this._buildTransform();break;case"duration":case"easing":this._buildTransition();case"transition":this.transition();break;case"panOnlyWhenZoomed":this._checkPanWhenZoomed();break;case"$set":if(n instanceof e&&n.length){this.$set=n;this._initStyle();this._buildTransform()}}},this))},_checkPanWhenZoomed:function(t){var e=this.options;if(e.panOnlyWhenZoomed){if(!t){t=this.getMatrix()[0]}var n=t<=e.minScale;if(e.disablePan!==n){this.option("disablePan",n)}}},_initStyle:function(){var t={"transform-origin":this.isSVG?"0 0":"50% 50%"};if(!this.options.disablePan){t.cursor=this.options.cursor}this.$set.css(t);var n=this.$parent;if(n.length&&!e.nodeName(this.parent,"body")){t={overflow:"hidden"};if(n.css("position")==="static"){t.position="relative"}n.css(t)}},_resetStyle:function(){this.$elem.css({cursor:"",transition:""});this.$parent.css({overflow:"",position:""})},_bind:function(){var t=this;var n=this.options;var a=n.eventNamespace;var i="mousedown"+a+" pointerdown"+a+" MSPointerDown"+a;var o="touchstart"+a+" "+i;var s="touchend"+a+" click"+a+" pointerup"+a+" MSPointerUp"+a;var l={};var u=this.$reset;var c=this.$zoomRange;e.each(["Start","Change","Zoom","Pan","End","Reset"],function(){var t=n["on"+this];if(e.isFunction(t)){l["panzoom"+this.toLowerCase()+a]=t}});if(!n.disablePan||!n.disableZoom){l[o]=function(e){if(!jQuery(e.target).hasClass("rgm-modes-drawing-container"))return;var a;if(e.type==="touchstart"?(a=e.touches||e.originalEvent.touches)&&(a.length===1&&!n.disablePan||a.length===2):!n.disablePan&&(e.which||e.originalEvent.which)===n.which){e.preventDefault();e.stopPropagation();t._startMove(e,a)}};if(n.which===3){l.contextmenu=false}}this.$elem.on(l);if(u.length){u.on(s,function(e){e.preventDefault();t.reset()})}if(c.length){c.attr({step:n.rangeStep===v.defaults.rangeStep&&c.attr("step")||n.rangeStep,min:n.minScale,max:n.maxScale}).prop({value:this.getMatrix()[0]})}if(n.disableZoom){return}var f=this.$zoomIn;var h=this.$zoomOut;if(f.length&&h.length){f.on("click",function(e){e.preventDefault();t.zoom()});h.on("click",function(e){e.preventDefault();t.zoom(true)})}if(c.length){l={};l[i]=function(){t.transition(true)};l[(r?"input":"change")+a]=function(){t.zoom(+this.value,{noSetRange:true})};c.on(l)}},_unbind:function(){this.$elem.add(this.$zoomIn).add(this.$zoomOut).add(this.$reset).off(this.options.eventNamespace)},_buildTransform:function(){return this._origTransform=this.getTransform(this.options.startTransform)},_buildTransition:function(){if(this._transform){var t=this.options;this._transition=this._transform+" "+t.duration+"ms "+t.easing}},_getDistance:function(t){var e=t[0];var n=t[1];return Math.sqrt(Math.pow(Math.abs(n.clientX-e.clientX),2)+Math.pow(Math.abs(n.clientY-e.clientY),2))},_getMiddle:function(t){var e=t[0];var n=t[1];return{clientX:(n.clientX-e.clientX)/2+e.clientX,clientY:(n.clientY-e.clientY)/2+e.clientY}},_trigger:function(t){if(typeof t==="string"){t="panzoom"+t}this.$elem.triggerHandler(t,[this].concat(i.call(arguments,1)))},_startMove:function(t,a){if(this.panning){return}var i,o,r,s,l,u,c,f;var d=this;var p=this.options;var _=p.eventNamespace;var v=this.getMatrix();var m=v.slice(0);var g=+m[4];var y=+m[5];var b={matrix:v,animate:"skip"};var x=t.type;if(x==="pointerdown"){i="pointermove";o="pointerup"}else if(x==="touchstart"){i="touchmove";o="touchend"}else if(x==="MSPointerDown"){i="MSPointerMove";o="MSPointerUp"}else{i="mousemove";o="mouseup"}i+=_;o+=_;this.transition(true);this.panning=true;this._trigger("start",t,a);var P=function(t,e){if(!jQuery(t.target).hasClass("rgm-modes-drawing-container"))return;if(e){if(e.length===2){if(r!=null){return}r=d._getDistance(e);s=d.getScale(v);l=d._getMiddle(e);return}if(u!=null){return}if(f=e[0]){u=f.pageX;c=f.pageY}}if(u!=null){return}u=t.pageX;c=t.pageY};P(t,a);var w=function(e){if(!jQuery(t.target).hasClass("rgm-modes-drawing-container"))return;var n;e.preventDefault();a=e.touches||e.originalEvent.touches;P(e,a);if(a){if(a.length===2){var i=d._getMiddle(a);var o=d._getDistance(a)-r;d.zoom(o*(p.increment/100)+s,{focal:i,matrix:v,animate:"skip"});d.pan(+v[4]+i.clientX-l.clientX,+v[5]+i.clientY-l.clientY,b);l=i;return}n=a[0]||{pageX:0,pageY:0}}if(!n){n=e}d.pan(g+n.pageX-u,y+n.pageY-c,b)};e(n).off(_).on(i,w).on(o,function(t){t.preventDefault();e(this).off(_);d.panning=false;t.type="panzoomend";d._trigger(t,v,!h(v,m))})}};e.Panzoom=v;e.fn.panzoom=function(t){var n,o,r,s;if(typeof t==="string"){s=[];o=i.call(arguments,1);this.each(function(){n=e.data(this,a);if(!n){s.push(undefined)}else if(t.charAt(0)!=="_"&&typeof(r=n[t])==="function"&&(r=r.apply(n,o))!==undefined){s.push(r)}});return s.length?s.length===1?s[0]:s:this}return this.each(function(){new v(this,t)})};return v});(function(){var t=this;if(typeof Math.sgn=="undefined"){Math.sgn=function(t){return t==0?0:t>0?1:-1}}var e={subtract:function(t,e){return{x:t.x-e.x,y:t.y-e.y}},dotProduct:function(t,e){return t.x*e.x+t.y*e.y},square:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},scale:function(t,e){return{x:t.x*e,y:t.y*e}}},n=64,a=Math.pow(2,-n-1);var i=function(t,n){var a=[],i=r(t,n),o=n.length-1,l=2*o-1,u=s(i,l,a,0),c=e.subtract(t,n[0]),h=e.square(c),d=0;for(var p=0;p<u;p++){c=e.subtract(t,f(n,o,a[p],null,null));var _=e.square(c);if(_<h){h=_;d=a[p]}}c=e.subtract(t,n[o]);_=e.square(c);if(_<h){h=_;d=1}return{location:d,distance:h}};var o=function(t,e){var n=i(t,e);return{point:f(e,e.length-1,n.location,null,null),location:n.location}};var r=function(t,n){var a=n.length-1,i=2*a-1,o=[],r=[],s=[],l=[],u=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]];for(var c=0;c<=a;c++)o[c]=e.subtract(n[c],t);for(var c=0;c<=a-1;c++){r[c]=e.subtract(n[c+1],n[c]);r[c]=e.scale(r[c],3)}for(var f=0;f<=a-1;f++){for(var h=0;h<=a;h++){if(!s[f])s[f]=[];s[f][h]=e.dotProduct(r[f],o[h])}}for(c=0;c<=i;c++){if(!l[c])l[c]=[];l[c].y=0;l[c].x=parseFloat(c)/i}var d=a,p=a-1;for(var _=0;_<=d+p;_++){var v=Math.max(0,_-p),m=Math.min(_,d);for(c=v;c<=m;c++){j=_-c;l[c+j].y+=s[j][c]*u[j][c]}}return l};var s=function(t,e,a,i){var o=[],r=[],h,d,p=[],_=[];switch(l(t,e)){case 0:{return 0}case 1:{if(i>=n){a[0]=(t[0].x+t[e].x)/2;return 1}if(u(t,e)){a[0]=c(t,e);return 1}break}}f(t,e,.5,o,r);h=s(o,e,p,i+1);d=s(r,e,_,i+1);for(var v=0;v<h;v++)a[v]=p[v];for(var v=0;v<d;v++)a[v+h]=_[v];return h+d};var l=function(t,e){var n=0,a,i;a=i=Math.sgn(t[0].y);for(var o=1;o<=e;o++){a=Math.sgn(t[o].y);if(a!=i)n++;i=a}return n};var u=function(t,e){var n,i,o,r,s,l,u,c,f,h,d,p,_,v,m,g;l=t[0].y-t[e].y;u=t[e].x-t[0].x;c=t[0].x*t[e].y-t[e].x*t[0].y;var y=max_distance_below=0;for(var b=1;b<e;b++){var x=l*t[b].x+u*t[b].y+c;if(x>y)y=x;else if(x<max_distance_below)max_distance_below=x}d=0;p=1;_=0;v=l;m=u;g=c-y;f=d*m-v*p;h=1/f;i=(p*g-m*_)*h;v=l;m=u;g=c-max_distance_below;f=d*m-v*p;h=1/f;o=(p*g-m*_)*h;r=Math.min(i,o);s=Math.max(i,o);n=s-r;return n<a?1:0};var c=function(t,e){var n=1,a=0,i=t[e].x-t[0].x,o=t[e].y-t[0].y,r=t[0].x-0,s=t[0].y-0,l=i*a-o*n,u=1/l,c=(i*s-o*r)*u;return 0+n*c};var f=function(t,e,n,a,i){var o=[[]];for(var r=0;r<=e;r++)o[0][r]=t[r];for(var s=1;s<=e;s++){for(var r=0;r<=e-s;r++){if(!o[s])o[s]=[];if(!o[s][r])o[s][r]={};o[s][r].x=(1-n)*o[s-1][r].x+n*o[s-1][r+1].x;o[s][r].y=(1-n)*o[s-1][r].y+n*o[s-1][r+1].y}}if(a!=null)for(r=0;r<=e;r++)a[r]=o[r][0];if(i!=null)for(r=0;r<=e;r++)i[r]=o[e-r][r];return o[e][0]};var h={};var d=function(t){var e=h[t];if(!e){e=[];var n=function(){return function(e){return Math.pow(e,t)}},a=function(){return function(e){return Math.pow(1-e,t)}},i=function(t){return function(e){return t}},o=function(){return function(t){return t}},r=function(){return function(t){return 1-t}},s=function(t){return function(e){var n=1;for(var a=0;a<t.length;a++)n=n*t[a](e);return n}};e.push(new n);for(var l=1;l<t;l++){var u=[new i(t)];for(var c=0;c<t-l;c++)u.push(new o);for(var c=0;c<l;c++)u.push(new r);e.push(new s(u))}e.push(new a);h[t]=e}return e};var p=function(t,e){var n=d(t.length-1),a=0,i=0;for(var o=0;o<t.length;o++){a=a+t[o].x*n[o](e);i=i+t[o].y*n[o](e)}return{x:a,y:i}};var _=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};var v=function(t){return t[0].x==t[1].x&&t[0].y==t[1].y};var m=function(t,e,n){if(v(t)){return{point:t[0],location:e}}var a=p(t,e),i=0,o=e,r=n>0?1:-1,s=null;while(i<Math.abs(n)){o+=.005*r;s=p(t,o);i+=_(s,a);a=s}return{point:s,location:o}};var g=function(t){if(v(t))return 0;var e=p(t,0),n=0,a=0,i=1,o=null;while(a<1){a+=.005*i;o=p(t,a);n+=_(o,e);e=o}return n};var y=function(t,e,n){return m(t,e,n).point};var b=function(t,e,n){return m(t,e,n).location};var x=function(t,e){var n=p(t,e),a=p(t.slice(0,t.length-1),e),i=a.y-n.y,o=a.x-n.x;return i==0?Infinity:Math.atan(i/o)};var P=function(t,e,n){var a=m(t,e,n);if(a.location>1)a.location=1;if(a.location<0)a.location=0;return x(t,a.location)};var w=function(t,e,n,a){a=a==null?0:a;var i=m(t,e,a),o=x(t,i.location),r=Math.atan(-1/o),s=n/2*Math.sin(r),l=n/2*Math.cos(r);return[{x:i.point.x+l,y:i.point.y+s},{x:i.point.x-l,y:i.point.y-s}]};var C=this.jsBezier={distanceFromCurve:i,gradientAtPoint:x,gradientAtPointAlongCurveFrom:P,nearestPointOnCurve:o,pointOnCurve:p,pointAlongCurveFrom:y,perpendicularToCurveAt:w,locationAlongCurveFrom:b,getLength:g,version:"0.9.0"};if(typeof exports!=="undefined"){exports.jsBezier=C}}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this;var e=t.Biltong={version:"0.4.0"};if(typeof exports!=="undefined"){exports.Biltong=e}var n=function(t){return Object.prototype.toString.call(t)==="[object Array]"},a=function(t,e,a){t=n(t)?t:[t.x,t.y];e=n(e)?e:[e.x,e.y];return a(t,e)},i=e.gradient=function(t,e){return a(t,e,function(t,e){if(e[0]==t[0])return e[1]>t[1]?Infinity:-Infinity;else if(e[1]==t[1])return e[0]>t[0]?0:-0;else return(e[1]-t[1])/(e[0]-t[0])})},o=e.normal=function(t,e){return-1/i(t,e)},r=e.lineLength=function(t,e){return a(t,e,function(t,e){return Math.sqrt(Math.pow(e[1]-t[1],2)+Math.pow(e[0]-t[0],2))})},s=e.quadrant=function(t,e){return a(t,e,function(t,e){if(e[0]>t[0]){return e[1]>t[1]?2:1}else if(e[0]==t[0]){return e[1]>t[1]?2:1}else{return e[1]>t[1]?3:4}})},l=e.theta=function(t,e){return a(t,e,function(t,e){var n=i(t,e),a=Math.atan(n),o=s(t,e);if(o==4||o==3)a+=Math.PI;if(a<0)a+=2*Math.PI;return a})},u=e.intersects=function(t,e){var n=t.x,a=t.x+t.w,i=t.y,o=t.y+t.h,r=e.x,s=e.x+e.w,l=e.y,u=e.y+e.h;return n<=r&&r<=a&&(i<=l&&l<=o)||n<=s&&s<=a&&(i<=l&&l<=o)||n<=r&&r<=a&&(i<=u&&u<=o)||n<=s&&r<=a&&(i<=u&&u<=o)||r<=n&&n<=s&&(l<=i&&i<=u)||r<=a&&a<=s&&(l<=i&&i<=u)||r<=n&&n<=s&&(l<=o&&o<=u)||r<=a&&n<=s&&(l<=o&&o<=u)},c=e.encloses=function(t,e,n){var a=t.x,i=t.x+t.w,o=t.y,r=t.y+t.h,s=e.x,l=e.x+e.w,u=e.y,c=e.y+e.h,f=function(t,e,a,i){return n?t<=e&&a>=i:t<e&&a>i};return f(a,s,i,l)&&f(o,u,r,c)},f=[null,[1,-1],[1,1],[-1,1],[-1,-1]],h=[null,[-1,-1],[-1,1],[1,1],[1,-1]],d=e.pointOnLine=function(t,e,n){var a=i(t,e),o=s(t,e),r=n>0?f[o]:h[o],l=Math.atan(a),u=Math.abs(n*Math.sin(l))*r[1],c=Math.abs(n*Math.cos(l))*r[0];return{x:t.x+c,y:t.y+u}},p=e.perpendicularLineTo=function(t,e,n){var a=i(t,e),o=Math.atan(-1/a),r=n/2*Math.sin(o),s=n/2*Math.cos(o);return[{x:e.x+s,y:e.y+r},{x:e.x-s,y:e.y-r}]}}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this,e={android:navigator.userAgent.toLowerCase().indexOf("android")>-1},n=function(t,e,n){n=n||t.parentNode;var a=n.querySelectorAll(e);for(var i=0;i<a.length;i++){if(a[i]===t){return true}}return false},a=function(t){return typeof t=="string"||t.constructor===String?document.getElementById(t):t},i=function(t){return t.srcElement||t.target},o=function(t,e,n,a){if(!a)return{path:[e],end:1};else if(typeof t.path!=="undefined"&&t.path.indexOf){return{path:t.path,end:t.path.indexOf(n)}}else{var i={path:[],end:-1},o=function(t){i.path.push(t);if(t===n){i.end=i.path.length-1}else if(t.parentNode!=null){o(t.parentNode)}};o(e);return i}},r=function(t,e){for(var n=0,a=t.length;n<a;n++){if(t[n]==e)break}if(n<t.length)t.splice(n,1)},s=1,l=function(t,e,n){var a=s++;t.__ta=t.__ta||{};t.__ta[e]=t.__ta[e]||{};t.__ta[e][a]=n;n.__tauid=a;return a},u=function(t,e,n){t.__ta&&t.__ta[e]&&delete t.__ta[e][n.__tauid];if(n.__taExtra){for(var a=0;a<n.__taExtra.length;a++){k(t,n.__taExtra[a][0],n.__taExtra[a][1])}n.__taExtra.length=0}n.__taUnstore&&n.__taUnstore()},c=function(t,e,a,r){if(t==null)return a;else{var s=t.split(","),l=function(r){l.__tauid=a.__tauid;var u=i(r),c=u;var f=o(r,u,e,t!=null);if(f.end!=-1){for(var h=0;h<f.end;h++){c=f.path[h];for(var d=0;d<s.length;d++){if(n(c,s[d],e)){a.apply(c,arguments)}}}}};f(a,r,l);return l}},f=function(t,e,n){t.__taExtra=t.__taExtra||[];t.__taExtra.push([e,n])},h=function(t,e,n,a){if(g&&b[e]){var i=c(a,t,n,b[e]);A(t,b[e],i,n)}if(e==="focus"&&t.getAttribute("tabindex")==null){t.setAttribute("tabindex","1")}A(t,e,c(a,t,n,e),n)},d=function(t,e,n,a){if(t.__taSmartClicks==null){var o=function(e){t.__tad=I(e)},s=function(e){t.__tau=I(e)},l=function(e){if(t.__tad&&t.__tau&&t.__tad[0]===t.__tau[0]&&t.__tad[1]===t.__tau[1]){for(var n=0;n<t.__taSmartClicks.length;n++)t.__taSmartClicks[n].apply(i(e),[e])}};h(t,"mousedown",o,a);h(t,"mouseup",s,a);h(t,"click",l,a);t.__taSmartClicks=[]}t.__taSmartClicks.push(n);n.__taUnstore=function(){r(t.__taSmartClicks,n)}},p={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},_=function(t,e){return function(a,s,l,u){if(s=="contextmenu"&&y)h(a,s,l,u);else{if(a.__taTapHandler==null){var c=a.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:false,taps:0,downSelectors:[]};var f=function(r){var s=i(r),l=o(r,s,a,u!=null),f=false;for(var h=0;h<l.end;h++){if(f)return;s=l.path[h];for(var d=0;d<c.downSelectors.length;d++){if(c.downSelectors[d]==null||n(s,c.downSelectors[d],a)){c.down=true;setTimeout(_,t);setTimeout(v,e);f=true;break}}}},d=function(t){if(c.down){var e=i(t),r,s;c.taps++;var l=M(t);for(var u in p){if(p.hasOwnProperty(u)){var f=p[u];if(f.touches===l&&(f.taps===1||f.taps===c.taps)){for(var h=0;h<c[u].length;h++){s=o(t,e,a,c[u][h][1]!=null);for(var d=0;d<s.end;d++){r=s.path[d];if(c[u][h][1]==null||n(r,c[u][h][1],a)){c[u][h][0].apply(r,[t]);break}}}}}}}},_=function(){c.down=false},v=function(){c.taps=0};h(a,"mousedown",f);h(a,"mouseup",d)}a.__taTapHandler.downSelectors.push(u);a.__taTapHandler[s].push([l,u]);l.__taUnstore=function(){r(a.__taTapHandler[s],l)}}}},v=function(t,e,n,a){for(var i in n.__tamee[t]){if(n.__tamee[t].hasOwnProperty(i)){n.__tamee[t][i].apply(a,[e])}}},m=function(){var t=[];return function(e,a,o,r){if(!e.__tamee){e.__tamee={over:false,mouseenter:[],mouseexit:[]};var s=function(a){var o=i(a);if(r==null&&(o==e&&!e.__tamee.over)||n(o,r,e)&&(o.__tamee==null||!o.__tamee.over)){v("mouseenter",a,e,o);o.__tamee=o.__tamee||{};o.__tamee.over=true;t.push(o)}},u=function(a){var o=i(a);for(var r=0;r<t.length;r++){if(o==t[r]&&!n(a.relatedTarget||a.toElement,"*",o)){o.__tamee.over=false;t.splice(r,1);v("mouseexit",a,e,o)}}};A(e,"mouseover",c(r,e,s,"mouseover"),s);A(e,"mouseout",c(r,e,u,"mouseout"),u)}o.__taUnstore=function(){delete e.__tamee[a][o.__tauid]};l(e,a,o);e.__tamee[a][o.__tauid]=o}},g="ontouchstart"in document.documentElement,y="onmousedown"in document.documentElement,b={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},x="touchstart",P="touchend",w="touchmove",C=function(){var t=-1;if(navigator.appName=="Microsoft Internet Explorer"){var e=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(n.exec(e)!=null)t=parseFloat(RegExp.$1)}return t}(),j=C>-1&&C<9,E=function(t,e){if(t==null)return[0,0];var n=D(t),a=Q(n,0);return[a[e+"X"],a[e+"Y"]]},I=function(t){if(t==null)return[0,0];if(j){return[t.clientX+document.documentElement.scrollLeft,t.clientY+document.documentElement.scrollTop]}else{return E(t,"page")}},S=function(t){return E(t,"screen")},T=function(t){return E(t,"client")},Q=function(t,e){return t.item?t.item(e):t[e]},D=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},M=function(t){return D(t).length},A=function(t,e,n,a){l(t,e,n);a.__tauid=n.__tauid;if(t.addEventListener)t.addEventListener(e,n,false);else if(t.attachEvent){var i=e+n.__tauid;t["e"+i]=n;t[i]=function(){t["e"+i]&&t["e"+i](window.event)};t.attachEvent("on"+e,t[i])}},k=function(t,e,n){if(n==null)return;O(t,function(){var i=a(this);u(i,e,n);if(n.__tauid!=null){if(i.removeEventListener){i.removeEventListener(e,n,false);if(g&&b[e])i.removeEventListener(b[e],n,false)}else if(this.detachEvent){var o=e+n.__tauid;i[o]&&i.detachEvent("on"+e,i[o]);i[o]=null;i["e"+o]=null}}if(n.__taTouchProxy){k(t,n.__taTouchProxy[1],n.__taTouchProxy[0])}})},O=function(t,e){if(t==null)return;t=typeof Window!=="undefined"&&(typeof t.top!=="unknown"&&t==t.top)?[t]:typeof t!=="string"&&(t.tagName==null&&t.length!=null)?t:typeof t==="string"?document.querySelectorAll(t):[t];for(var n=0;n<t.length;n++)e.apply(t[n])};t.Mottle=function(t){t=t||{};var n=t.clickThreshold||250,i=t.dblClickThreshold||450,o=new m,r=new _(n,i),s=t.smartClicks,l=function(t,e,n,i){if(n==null)return;O(t,function(){var t=a(this);if(s&&e==="click")d(t,e,n,i);else if(e==="tap"||e==="dbltap"||e==="contextmenu"){r(t,e,n,i)}else if(e==="mouseenter"||e=="mouseexit")o(t,e,n,i);else h(t,e,n,i)})};this.remove=function(t){O(t,function(){var t=a(this);if(t.__ta){for(var e in t.__ta){if(t.__ta.hasOwnProperty(e)){for(var n in t.__ta[e]){if(t.__ta[e].hasOwnProperty(n))k(t,e,t.__ta[e][n])}}}}t.parentNode&&t.parentNode.removeChild(t)});return this};this.on=function(t,e,n,a){var i=arguments[0],o=arguments.length==4?arguments[2]:null,r=arguments[1],s=arguments[arguments.length-1];l(i,r,s,o);return this};this.off=function(t,e,n){k(t,e,n);return this};this.trigger=function(t,n,i,o){var r=y&&(typeof MouseEvent==="undefined"||i==null||i.constructor===MouseEvent);var s=g&&!y&&b[n]?b[n]:n,l=!(g&&!y&&b[n]);var u=I(i),c=S(i),f=T(i);O(t,function(){var t=a(this),h;i=i||{screenX:c[0],screenY:c[1],clientX:f[0],clientY:f[1]};var d=function(t){if(o)t.payload=o};var p={TouchEvent:function(e){var n=document.createTouch(window,t,0,u[0],u[1],c[0],c[1],f[0],f[1],0,0,0,0);var a=document.createTouchList(n);var i=document.createTouchList(n);var o=document.createTouchList(n);e.initTouchEvent(s,true,true,window,null,c[0],c[1],f[0],f[1],false,false,false,false,a,i,o,1,0)},MouseEvents:function(n){n.initMouseEvent(s,true,true,window,0,c[0],c[1],f[0],f[1],false,false,false,false,1,t);if(e.android){var a=document.createTouch(window,t,0,u[0],u[1],c[0],c[1],f[0],f[1],0,0,0,0);n.touches=n.targetTouches=n.changedTouches=document.createTouchList(a)}}};if(document.createEvent){var _=!l&&!r&&(g&&b[n]&&!e.android),v=_?"TouchEvent":"MouseEvents";h=document.createEvent(v);p[v](h);d(h);t.dispatchEvent(h)}else if(document.createEventObject){h=document.createEventObject();h.eventType=h.eventName=s;h.screenX=c[0];h.screenY=c[1];h.clientX=f[0];h.clientY=f[1];d(h);t.fireEvent("on"+s,h)}});return this}};t.Mottle.consume=function(t,e){if(t.stopPropagation)t.stopPropagation();else t.returnValue=false;if(!e&&t.preventDefault)t.preventDefault()};t.Mottle.pageLocation=I;t.Mottle.setForceTouchEvents=function(t){g=t};t.Mottle.setForceMouseEvents=function(t){y=t};t.Mottle.version="0.8.0";if(typeof exports!=="undefined"){exports.Mottle=t.Mottle}}).call(typeof window==="undefined"?this:window);(function(){"use strict";var t=this;var e=function(t,e,n){if(t.indexOf(e)===-1){n?t.unshift(e):t.push(e);return true}return false};var n=function(t,e){var n=t.indexOf(e);if(n!=-1)t.splice(n,1)};var a=function(t,e){var n=[];for(var a=0;a<t.length;a++){if(e.indexOf(t[a])==-1)n.push(t[a])}return n};var i=function(t){return t==null?false:typeof t==="string"||t.constructor==String};var o=function(t){var e=t.getBoundingClientRect(),n=document.body,a=document.documentElement,i=window.pageYOffset||a.scrollTop||n.scrollTop,o=window.pageXOffset||a.scrollLeft||n.scrollLeft,r=a.clientTop||n.clientTop||0,s=a.clientLeft||n.clientLeft||0,l=e.top+i-r,u=e.left+o-s;return{top:Math.round(l),left:Math.round(u)}};var r=function(t,e,n){n=n||t.parentNode;var a=n.querySelectorAll(e);for(var i=0;i<a.length;i++){if(a[i]===t)return true}return false};var s=function(){var t=-1;if(navigator.appName=="Microsoft Internet Explorer"){var e=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(n.exec(e)!=null)t=parseFloat(RegExp.$1)}return t}(),l=50,u=50,c=s>-1&&s<9,f=s==9,h=function(t){if(c){return[t.clientX+document.documentElement.scrollLeft,t.clientY+document.documentElement.scrollTop]}else{var e=p(t),n=d(e,0);return f?[n.pageX||n.clientX,n.pageY||n.clientY]:[n.pageX,n.pageY]}},d=function(t,e){return t.item?t.item(e):t[e]},p=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},_={draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy"},v="katavorio-drag-scope",m=["stop","start","drag","drop","over","out","beforeStart"],g=function(){},y=function(){return true
},b=function(t,e,n){for(var a=0;a<t.length;a++){if(t[a]!=n)e(t[a])}},x=function(t,e,n,a){b(t,function(t){t.setActive(e);if(e)t.updatePosition();if(n)t.setHover(a,e)})},P=function(t,e){if(t==null)return;t=!i(t)&&(t.tagName==null&&t.length!=null)?t:[t];for(var n=0;n<t.length;n++)e.apply(t[n],[t[n]])},w=function(t){if(t.stopPropagation){t.stopPropagation();t.preventDefault()}else{t.returnValue=false}},C="input,textarea,select,button,option",j=function(t,e,n){var a=t.srcElement||t.target;return!r(a,n.getInputFilterSelector(),e)};var E=function(t,e,n,a){this.params=e||{};this.el=t;this.params.addClass(this.el,this._class);this.uuid=D();var i=true;this.setEnabled=function(t){i=t};this.isEnabled=function(){return i};this.toggleEnabled=function(){i=!i};this.setScope=function(t){this.scopes=t?t.split(/\s+/):[a]};this.addScope=function(t){var e={};P(this.scopes,function(t){e[t]=true});P(t?t.split(/\s+/):[],function(t){e[t]=true});this.scopes=[];for(var n in e)this.scopes.push(n)};this.removeScope=function(t){var e={};P(this.scopes,function(t){e[t]=true});P(t?t.split(/\s+/):[],function(t){delete e[t]});this.scopes=[];for(var n in e)this.scopes.push(n)};this.toggleScope=function(t){var e={};P(this.scopes,function(t){e[t]=true});P(t?t.split(/\s+/):[],function(t){if(e[t])delete e[t];else e[t]=true});this.scopes=[];for(var n in e)this.scopes.push(n)};this.setScope(e.scope);this.k=e.katavorio;return e.katavorio};var I=function(){return true};var S=function(){return false};var T=function(t,e,n,a){this._class=n.draggable;var s=E.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var c=[0,0],f=null,d=null,p=[0,0],v=false,m=this.params.consumeStartEvent!==false,g=this.el,b=this.params.clone,P=this.params.scroll,C=e.multipleDrop!==false,T=false,Q=e.ghostProxy===true?I:e.ghostProxy&&typeof e.ghostProxy==="function"?e.ghostProxy:S,A=function(t){return t.cloneNode(true)};var k=jQuery(g).parents(".rgm-modes-drawing-container");var O=[k.position().left,k.position().top];var L=0;var F=e.snapThreshold||5,N=function(t,e,n,a,i){a=a||F;i=i||F;var o=Math.floor(t[0]/e),r=e*o,s=r+e,l=Math.abs(t[0]-r)<=a?r:Math.abs(s-t[0])<=a?s:t[0];var u=Math.floor(t[1]/n),c=n*u,f=c+n,h=Math.abs(t[1]-c)<=i?c:Math.abs(f-t[1])<=i?f:t[1];return[l,h]};this.posses=[];this.posseRoles={};this.toGrid=function(t){if(this.params.grid==null){return t}else{return N(t,this.params.grid[0],this.params.grid[1])}};this.snap=function(t,e){if(g==null)return;t=t||(this.params.grid?this.params.grid[0]:l);e=e||(this.params.grid?this.params.grid[1]:u);var n=this.params.getPosition(g);this.params.setPosition(g,N(n,t,e,t,e))};this.setUseGhostProxy=function(t){Q=t?I:S};var B;var Y=function(t){return e.allowNegative===false?[Math.max(0,t[0]),Math.max(0,t[1])]:t};var G=function(t){B=typeof t==="function"?t:t?function(t){return Y([Math.max(0,Math.min(q.w-this.size[0],t[0])),Math.max(0,Math.min(q.h-this.size[1],t[1]))])}.bind(this):function(t){return Y(t)}}.bind(this);G(typeof this.params.constrain==="function"?this.params.constrain:this.params.constrain||this.params.containment);this.setConstrain=function(t){G(t)};var R;this.setRevert=function(t){R=t};var X=function(t){if(typeof t=="function"){t._katavorioId=D();return t._katavorioId}else{return t}},U={},W=function(t){for(var e in U){var n=U[e];var a=n[0](t);if(n[1])a=!a;if(!a)return false}return true},H=this.setFilter=function(e,n){if(e){var a=X(e);U[a]=[function(n){var a=n.srcElement||n.target,o;if(i(e)){o=r(a,e,t)}else if(typeof e==="function"){o=e(n,t)}return o},n!==false]}},z=this.addFilter=H,V=this.removeFilter=function(t){var e=typeof t=="function"?t._katavorioId:t;delete U[e]};this.clearAllFilters=function(){U={}};this.canDrag=this.params.canDrag||y;var q,$=[],J=[];this.downListener=function(t){var e=this.rightButtonCanDrag||t.which!==3&&t.button!==2;if(e&&this.isEnabled()&&this.canDrag()){var a=W(t)&&j(t,this.el,this.k);if(a){if(!b)g=this.el;else{g=this.el.cloneNode(true);g.setAttribute("id",null);g.style.position="absolute";var i=o(this.el);g.style.left=i.left+"px";g.style.top=i.top+"px";document.body.appendChild(g)}m&&w(t);c=h(t);O=[k.position().left,k.position().top];this.params.bind(document,"mousemove",this.moveListener);this.params.bind(document,"mouseup",this.upListener);s.markSelection(this);s.markPosses(this);this.params.addClass(document.body,n.noSelect);K("beforeStart",{el:this.el,pos:f,e:t,drag:this})}else if(this.params.consumeFilteredEvents){w(t)}}}.bind(this);this.moveListener=function(t){L=(L+1)%1e6;if(c){if(!v){var e=K("start",{el:this.el,pos:f,e:t,drag:this});if(e!==false){if(!c)return;this.mark(true);v=true}}if(c){J.length=0;var n=h(t),a=n[0]-c[0],i=n[1]-c[1],o=this.params.ignoreZoom?1:s.getZoom();var r=k.css("transform");var l=r=="none"?1:parseFloat(new RegExp("\\d(\\.\\d*)?").exec(r)[0]);var u=O[0]-k.position().left;var d=O[1]-k.position().top;a+=u;i+=d;a/=l;i/=l;a/=o;i/=o;this.moveBy(a,i,t);s.updateSelection(a,i,this);s.updatePosses(a,i,this);var p=L;var _=this;window.setTimeout(function(){if(L==p&&typeof _["moveListener"]=="function"){_.moveListener(t)}},50)}}}.bind(this);this.upListener=function(t){if(c){c=null;this.params.unbind(document,"mousemove",this.moveListener);this.params.unbind(document,"mouseup",this.upListener);this.params.removeClass(document.body,n.noSelect);this.unmark(t);s.unmarkSelection(this,t);s.unmarkPosses(this,t);this.stop(t);s.notifySelectionDragStop(this,t);s.notifyPosseDragStop(this,t);v=false;if(b){g&&g.parentNode&&g.parentNode.removeChild(g);g=null}J.length=0;if(R&&R(this.el,this.params.getPosition(this.el))===true){this.params.setPosition(this.el,f);K("revert",this.el)}}}.bind(this);this.getFilters=function(){return U};this.abort=function(){if(c!=null)this.upListener()};this.getDragElement=function(){return g||this.el};var Z={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};if(e.events.start)Z.start.push(e.events.start);if(e.events.beforeStart)Z.beforeStart.push(e.events.beforeStart);if(e.events.stop)Z.stop.push(e.events.stop);if(e.events.drag)Z.drag.push(e.events.drag);if(e.events.revert)Z.revert.push(e.events.revert);this.on=function(t,e){if(Z[t])Z[t].push(e)};this.off=function(t,e){if(Z[t]){var n=[];for(var a=0;a<Z[t].length;a++){if(Z[t][a]!==e)n.push(Z[t][a])}Z[t]=n}};var K=function(t,e){if(Z[t]){for(var n=0;n<Z[t].length;n++){try{Z[t][n](e)}catch(a){}}}};this.notifyStart=function(t){K("start",{el:this.el,pos:this.params.getPosition(g),e:t,drag:this})};this.stop=function(t,e){if(e||v){var n=[],a=s.getSelection(),i=this.params.getPosition(g);if(a.length>1){for(var o=0;o<a.length;o++){var r=this.params.getPosition(a[o].el);n.push([a[o].el,{left:r[0],top:r[1]},a[o]])}}else{n.push([g,{left:i[0],top:i[1]},this])}K("stop",{el:g,pos:te||i,finalPos:i,e:t,drag:this,selection:n})}};this.mark=function(t){f=this.params.getPosition(g);d=this.params.getPosition(g,true);p=[d[0]-f[0],d[1]-f[1]];this.size=this.params.getSize(g);$=s.getMatchingDroppables(this);x($,true,false,this);this.params.addClass(g,this.params.dragClass||n.drag);var e=this.params.getSize(g.parentNode);q={w:e[0],h:e[1]};if(t){s.notifySelectionDragStart(this)}};var te;this.unmark=function(t,a){x($,false,true,this);if(T&&Q(this.el)){te=[g.offsetLeft,g.offsetTop];this.el.parentNode.removeChild(g);g=this.el}else{te=null}this.params.removeClass(g,this.params.dragClass||n.drag);$.length=0;T=false;if(!a){if(J.length>0&&te){e.setPosition(this.el,te)}J.sort(M);for(var i=0;i<J.length;i++){var o=J[i].drop(this,t);if(o===true)break}}};this.moveBy=function(t,n,a){J.length=0;var i=this.toGrid([f[0]+t,f[1]+n]),o=B(i,g);if(Q(this.el)){if(i[0]!=o[0]||i[1]!=o[1]){if(!T){var r=A(this.el);e.addClass(r,_.ghostProxy);this.el.parentNode.appendChild(r);g=r;T=true}o=i}else{if(T){this.el.parentNode.removeChild(g);g=this.el;T=false}}}var s={x:o[0],y:o[1],w:this.size[0],h:this.size[1]},l={x:s.x+p[0],y:s.y+p[1],w:s.w,h:s.h},u=null;this.params.setPosition(g,o);for(var c=0;c<$.length;c++){var h={x:$[c].pagePosition[0],y:$[c].pagePosition[1],w:$[c].size[0],h:$[c].size[1]};if(this.params.intersects(l,h)&&(C||u==null||u==$[c].el)&&$[c].canDrop(this)){if(!u)u=$[c].el;J.push($[c]);$[c].setHover(this,true,a)}else if($[c].isHover()){$[c].setHover(this,false,a)}}K("drag",{el:this.el,pos:o,e:a,drag:this})};this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener);this.params.unbind(document,"mousemove",this.moveListener);this.params.unbind(document,"mouseup",this.upListener);this.downListener=null;this.upListener=null;this.moveListener=null};this.params.bind(this.el,"mousedown",this.downListener);if(this.params.handle)H(this.params.handle,false);else H(this.params.filter,this.params.filterExclude)};var Q=function(t,e,n,a){this._class=n.droppable;this.params=e||{};this.rank=e.rank||0;this._activeClass=this.params.activeClass||n.active;this._hoverClass=this.params.hoverClass||n.hover;E.apply(this,arguments);var i=false;this.allowLoopback=this.params.allowLoopback!==false;this.setActive=function(t){this.params[t?"addClass":"removeClass"](this.el,this._activeClass)};this.updatePosition=function(){this.position=this.params.getPosition(this.el);this.pagePosition=this.params.getPosition(this.el,true);this.size=this.params.getSize(this.el)};this.canDrop=this.params.canDrop||function(t){return true};this.isHover=function(){return i};this.setHover=function(t,e,n){if(e||this.el._katavorioDragHover==null||this.el._katavorioDragHover==t.el._katavorio){this.params[e?"addClass":"removeClass"](this.el,this._hoverClass);this.el._katavorioDragHover=e?t.el._katavorio:null;if(i!==e)this.params.events[e?"over":"out"]({el:this.el,e:n,drag:t,drop:this});i=e}};this.drop=function(t,e){return this.params.events["drop"]({drag:t,e:e,drop:this})};this.destroy=function(){this._class=null;this._activeClass=null;this._hoverClass=null;i=null}};var D=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t=="x"?e:e&3|8;return n.toString(16)})};var M=function(t,e){return t.rank<e.rank?1:t.rank>e.rank?-1:0};var A=function(t){if(t==null)return null;t=typeof t==="string"||t.constructor==String?document.getElementById(t):t;if(t==null)return null;t._katavorio=t._katavorio||D();return t};t.Katavorio=function(t){var o=[],r={};this._dragsByScope={};this._dropsByScope={};var s=1,l=function(t,e){P(t,function(t){for(var n=0;n<t.scopes.length;n++){e[t.scopes[n]]=e[t.scopes[n]]||[];e[t.scopes[n]].push(t)}})},u=function(e,n){var a=0;P(e,function(e){for(var i=0;i<e.scopes.length;i++){if(n[e.scopes[i]]){var o=t.indexOf(n[e.scopes[i]],e);if(o!=-1){n[e.scopes[i]].splice(o,1);a++}}}});return a>0},c=this.getMatchingDroppables=function(t){var e=[],n={};for(var a=0;a<t.scopes.length;a++){var i=this._dropsByScope[t.scopes[a]];if(i){for(var o=0;o<i.length;o++){if(i[o].canDrop(t)&&!n[i[o].uuid]&&(i[o].allowLoopback||i[o].el!==t.el)){n[i[o].uuid]=true;e.push(i[o])}}}}e.sort(M);return e},f=function(e){e=e||{};var n={events:{}},a;for(a in t)n[a]=t[a];for(a in e)n[a]=e[a];for(a=0;a<m.length;a++){n.events[m[a]]=e[m[a]]||g}n.katavorio=this;return n}.bind(this),h=function(t,e){for(var n=0;n<m.length;n++){if(e[m[n]]){t.on(m[n],e[m[n]])}}}.bind(this),d={},p=t.css||{},y=t.scope||v;for(var x in _)d[x]=_[x];for(var x in p)d[x]=p[x];var w=t.inputFilterSelector||C;this.getInputFilterSelector=function(){return w};this.setInputFilterSelector=function(t){w=t;return this};this.draggable=function(e,n){var a=[];P(e,function(e){e=A(e);if(e!=null){if(e._katavorioDrag==null){var i=f(n);e._katavorioDrag=new T(e,i,d,y);l(e._katavorioDrag,this._dragsByScope);a.push(e._katavorioDrag);t.addClass(e,d.draggable)}else{h(e._katavorioDrag,n)}}}.bind(this));return a};this.droppable=function(e,n){var a=[];P(e,function(e){e=A(e);if(e!=null){var i=new Q(e,f(n),d,y);e._katavorioDrop=e._katavorioDrop||[];e._katavorioDrop.push(i);l(i,this._dropsByScope);a.push(i);t.addClass(e,d.droppable)}}.bind(this));return a};this.select=function(e){P(e,function(){var e=A(this);if(e&&e._katavorioDrag){if(!r[e._katavorio]){o.push(e._katavorioDrag);r[e._katavorio]=[e,o.length-1];t.addClass(e,d.selected)}}});return this};this.deselect=function(e){P(e,function(){var e=A(this);if(e&&e._katavorio){var n=r[e._katavorio];if(n){var a=[];for(var i=0;i<o.length;i++)if(o[i].el!==e)a.push(o[i]);o=a;delete r[e._katavorio];t.removeClass(e,d.selected)}}});return this};this.deselectAll=function(){for(var e in r){var n=r[e];t.removeClass(n[0],d.selected)}o.length=0;r={}};this.markSelection=function(t){b(o,function(t){t.mark()},t)};this.markPosses=function(t){if(t.posses){P(t.posses,function(e){if(t.posseRoles[e]&&S[e]){b(S[e].members,function(t){t.mark()},t)}})}};this.unmarkSelection=function(t,e){b(o,function(t){t.unmark(e)},t)};this.unmarkPosses=function(t,e){if(t.posses){P(t.posses,function(n){if(t.posseRoles[n]&&S[n]){b(S[n].members,function(t){t.unmark(e,true)},t)}})}};this.getSelection=function(){return o.slice(0)};this.updateSelection=function(t,e,n){b(o,function(n){n.moveBy(t,e)},n)};var j=function(t,e){if(e.posses){P(e.posses,function(n){if(e.posseRoles[n]&&S[n]){b(S[n].members,function(e){t(e)},e)}})}};this.updatePosses=function(t,e,n){j(function(n){n.moveBy(t,e)},n)};this.notifyPosseDragStop=function(t,e){j(function(t){t.stop(e,true)},t)};this.notifySelectionDragStop=function(t,e){b(o,function(t){t.stop(e,true)},t)};this.notifySelectionDragStart=function(t,e){b(o,function(t){t.notifyStart(e)},t)};this.setZoom=function(t){s=t};this.getZoom=function(){return s};var E=function(t,e,n,a){P(t,function(t){u(t,n);t[a](e);l(t,n)})};P(["set","add","remove","toggle"],function(t){this[t+"Scope"]=function(e,n){E(e._katavorioDrag,n,this._dragsByScope,t+"Scope");E(e._katavorioDrop,n,this._dropsByScope,t+"Scope")}.bind(this);this[t+"DragScope"]=function(e,n){E(e.constructor===T?e:e._katavorioDrag,n,this._dragsByScope,t+"Scope")}.bind(this);this[t+"DropScope"]=function(e,n){E(e.constructor===Q?e:e._katavorioDrop,n,this._dropsByScope,t+"Scope")}.bind(this)}.bind(this));this.snapToGrid=function(t,e){for(var n in this._dragsByScope){b(this._dragsByScope[n],function(n){n.snap(t,e)})}};this.getDragsForScope=function(t){return this._dragsByScope[t]};this.getDropsForScope=function(t){return this._dropsByScope[t]};var I=function(t,e,n){t=A(t);if(t[e]){var a=o.indexOf(t[e]);if(a>=0){o.splice(a,1)}if(u(t[e],n)){P(t[e],function(t){t.destroy()})}delete t[e]}};this.elementRemoved=function(t){this.destroyDraggable(t);this.destroyDroppable(t)};this.destroyDraggable=function(t){I(t,"_katavorioDrag",this._dragsByScope)};this.destroyDroppable=function(t){I(t,"_katavorioDrop",this._dropsByScope)};this.reset=function(){this._dragsByScope={};this._dropsByScope={};o=[];r={};S={}};var S={};var D=function(t,n,a){var o=i(n)?n:n.id;var r=i(n)?true:n.active!==false;var s=S[o]||function(){var t={name:o,members:[]};S[o]=t;return t}();P(t,function(t){if(t._katavorioDrag){if(a&&t._katavorioDrag.posseRoles[s.name]!=null)return;e(s.members,t._katavorioDrag);e(t._katavorioDrag.posses,s.name);t._katavorioDrag.posseRoles[s.name]=r}});return s};this.addToPosse=function(t,e){var n=[];for(var a=1;a<arguments.length;a++){n.push(D(t,arguments[a]))}return n.length==1?n[0]:n};this.setPosse=function(t,e){var n=[];for(var i=1;i<arguments.length;i++){n.push(D(t,arguments[i],true).name)}P(t,function(t){if(t._katavorioDrag){var e=a(t._katavorioDrag.posses,n);var i=[];Array.prototype.push.apply(i,t._katavorioDrag.posses);for(var o=0;o<e.length;o++){this.removeFromPosse(t,e[o])}}}.bind(this));return n.length==1?n[0]:n};this.removeFromPosse=function(t,e){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var a=1;a<arguments.length;a++){e=arguments[a];P(t,function(t){if(t._katavorioDrag&&t._katavorioDrag.posses){var a=t._katavorioDrag;P(e,function(t){n(S[t].members,a);n(a.posses,t);delete a.posseRoles[t]})}})}};this.removeFromAllPosses=function(t){P(t,function(t){if(t._katavorioDrag&&t._katavorioDrag.posses){var e=t._katavorioDrag;P(e.posses,function(t){n(S[t].members,e)});e.posses.length=0;e.posseRoles={}}})};this.setPosseState=function(t,e,n){var a=S[e];if(a){P(t,function(t){if(t._katavorioDrag&&t._katavorioDrag.posses){t._katavorioDrag.posseRoles[a.name]=n}})}}};t.Katavorio.version="0.19.2";if(typeof exports!=="undefined"){exports.Katavorio=t.Katavorio}}).call(typeof window!=="undefined"?window:this);(function(){var t=function(t){return Object.prototype.toString.call(t)==="[object Array]"},e=function(t){return Object.prototype.toString.call(t)==="[object Number]"},n=function(t){return typeof t==="string"},a=function(t){return typeof t==="boolean"},i=function(t){return t==null},o=function(t){return t==null?false:Object.prototype.toString.call(t)==="[object Object]"},r=function(t){return Object.prototype.toString.call(t)==="[object Date]"},s=function(t){return Object.prototype.toString.call(t)==="[object Function]"},l=function(t){return s(t)&&t.name!=null&&t.name.length>0},u=function(t){for(var e in t){if(t.hasOwnProperty(e)){return false}}return true};var c=this;c.jsPlumbUtil={isArray:t,isString:n,isBoolean:a,isNull:i,isObject:o,isDate:r,isFunction:s,isEmpty:u,isNumber:e,clone:function(e){if(n(e)){return""+e}else if(a(e)){return!!e}else if(r(e)){return new Date(e.getTime())}else if(s(e)){return e}else if(t(e)){var i=[];for(var l=0;l<e.length;l++){i.push(this.clone(e[l]))}return i}else if(o(e)){var u={};for(var c in e){u[c]=this.clone(e[c])}return u}else{return e}},merge:function(e,i,r){var s={},l,u;r=r||[];for(u=0;u<r.length;u++){s[r[u]]=true}var c=this.clone(e);for(u in i){if(c[u]==null){c[u]=i[u]}else if(n(i[u])||a(i[u])){if(!s[u]){c[u]=i[u]}else{l=[];l.push.apply(l,t(c[u])?c[u]:[c[u]]);l.push.apply(l,t(i[u])?i[u]:[i[u]]);c[u]=l}}else{if(t(i[u])){l=[];if(t(c[u])){l.push.apply(l,c[u])}l.push.apply(l,i[u]);c[u]=l}else if(o(i[u])){if(!o(c[u])){c[u]={}}for(var f in i[u]){c[u][f]=i[u][f]}}}}return c},replace:function(t,e,n){if(t==null){return}var a=t,i=a;e.replace(/([^\.])+/g,function(t,e,a,o){var r=t.match(/([^\[0-9]+){1}(\[)([0-9+])/),s=a+t.length>=o.length,l=function(){return i[r[1]]||function(){i[r[1]]=[];return i[r[1]]}()};if(s){if(r){l()[r[3]]=n}else{i[t]=n}}else{if(r){var u=l();i=u[r[3]]||function(){u[r[3]]={};return u[r[3]]}()}else{i=i[t]||function(){i[t]={};return i[t]}()}}});return t},functionChain:function(t,e,n){for(var a=0;a<n.length;a++){var i=n[a][0][n[a][1]].apply(n[a][0],n[a][2]);if(i===e){return i}}return t},populate:function(e,a,i){var r=function(t){var e=t.match(/(\${.*?})/g);if(e!=null){for(var n=0;n<e.length;n++){var i=a[e[n].substring(2,e[n].length-1)]||"";if(i!=null){t=t.replace(e[n],i)}}}return t},l=function(e){if(e!=null){if(n(e)){return r(e)}else if(s(e)&&(i==null||(e.name||"").indexOf(i)===0)){return e(a)}else if(t(e)){var u=[];for(var c=0;c<e.length;c++){u.push(l(e[c]))}return u}else if(o(e)){var f={};for(var h in e){f[h]=l(e[h])}return f}else{return e}}};return l(e)},findWithFunction:function(t,e){if(t){for(var n=0;n<t.length;n++){if(e(t[n])){return n}}}return-1},removeWithFunction:function(t,e){var n=c.jsPlumbUtil.findWithFunction(t,e);if(n>-1){t.splice(n,1)}return n!==-1},remove:function(t,e){var n=t.indexOf(e);if(n>-1){t.splice(n,1)}return n!==-1},addWithFunction:function(t,e,n){if(c.jsPlumbUtil.findWithFunction(t,n)===-1){t.push(e)}},addToList:function(t,e,n,a){var i=t[e];if(i==null){i=[];t[e]=i}i[a?"unshift":"push"](n);return i},suggest:function(t,e,n){if(t.indexOf(e)===-1){if(n){t.unshift(e)}else{t.push(e)}return true}return false},extend:function(e,n,a){var i;n=t(n)?n:[n];for(i=0;i<n.length;i++){for(var o in n[i].prototype){if(n[i].prototype.hasOwnProperty(o)){e.prototype[o]=n[i].prototype[o]}}}var r=function(t,e){return function(){for(i=0;i<n.length;i++){if(n[i].prototype[t]){n[i].prototype[t].apply(this,arguments)}}return e.apply(this,arguments)}};var s=function(t){for(var n in t){e.prototype[n]=r(n,t[n])}};if(arguments.length>2){for(i=2;i<arguments.length;i++){s(arguments[i])}}return e},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t==="x"?e:e&3|8;return n.toString(16)})},logEnabled:true,log:function(){if(c.jsPlumbUtil.logEnabled&&typeof console!=="undefined"){try{var t=arguments[arguments.length-1];console.log(t)}catch(e){}}},wrap:function(t,e,n){t=t||function(){};e=e||function(){};return function(){var a=null;try{a=e.apply(this,arguments)}catch(i){c.jsPlumbUtil.log("jsPlumb function failed : "+i)}if(n==null||a!==n){try{a=t.apply(this,arguments)}catch(i){c.jsPlumbUtil.log("wrapped function failed : "+i)}}return a}}};c.jsPlumbUtil.EventGenerator=function(){var t={},e=false,n={ready:true};this.bind=function(e,n,a){var i=function(e){c.jsPlumbUtil.addToList(t,e,n,a);n.__jsPlumb=n.__jsPlumb||{};n.__jsPlumb[c.jsPlumbUtil.uuid()]=e};if(typeof e==="string"){i(e)}else if(e.length!=null){for(var o=0;o<e.length;o++){i(e[o])}}return this};this.fire=function(a,i,o){if(!e&&t[a]){var r=t[a].length,s=0,l=false,u=null;if(!this.shouldFireEvent||this.shouldFireEvent(a,i,o)){while(!l&&s<r&&u!==false){if(n[a]){t[a][s].apply(this,[i,o])}else{try{u=t[a][s].apply(this,[i,o])}catch(f){c.jsPlumbUtil.log("jsPlumb: fire failed for event "+a+" : "+f)}}s++;if(t==null||t[a]==null){l=true}}}}return this};this.unbind=function(e,n){if(arguments.length===0){t={}}else if(arguments.length===1){if(typeof e==="string"){delete t[e]}else if(e.__jsPlumb){var a;for(var i in e.__jsPlumb){a=e.__jsPlumb[i];c.jsPlumbUtil.remove(t[a]||[],e)}}}else if(arguments.length===2){c.jsPlumbUtil.remove(t[e]||[],n)}return this};this.getListener=function(e){return t[e]};this.setSuspendEvents=function(t){e=t};this.isSuspendEvents=function(){return e};this.silently=function(t){this.setSuspendEvents(true);try{t()}catch(e){c.jsPlumbUtil.log("Cannot execute silent function "+e)}this.setSuspendEvents(false)};this.cleanupListeners=function(){for(var e in t){t[e]=null}}};c.jsPlumbUtil.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}};if(typeof exports!=="undefined"){exports.jsPlumbUtil=c.jsPlumbUtil}}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this;t.jsPlumbUtil.matchesSelector=function(t,e,n){n=n||t.parentNode;var a=n.querySelectorAll(e);for(var i=0;i<a.length;i++){if(a[i]===t){return true}}return false};t.jsPlumbUtil.consume=function(t,e){if(t.stopPropagation){t.stopPropagation()}else{t.returnValue=false}if(!e&&t.preventDefault){t.preventDefault()}};t.jsPlumbUtil.sizeElement=function(t,e,n,a,i){if(t){t.style.height=i+"px";t.height=i;t.style.width=a+"px";t.width=a;t.style.left=e+"px";t.style.top=n+"px"}}}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this;var e=[],n;var a=t.jsPlumbUtil,i=function(){return""+(new Date).getTime()},o=function(t){if(t._jsPlumb.paintStyle&&t._jsPlumb.hoverPaintStyle){var e={};g.extend(e,t._jsPlumb.paintStyle);g.extend(e,t._jsPlumb.hoverPaintStyle);delete t._jsPlumb.hoverPaintStyle;if(e.gradient&&t._jsPlumb.paintStyle.fill){delete e.gradient}t._jsPlumb.hoverPaintStyle=e}},r=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],s={mouseout:"mouseleave",mouseexit:"mouseleave"},l=function(t,e,n,a){var i=t.getAttachedElements();if(i){for(var o=0,r=i.length;o<r;o++){if(!a||a!==i[o]){i[o].setHover(e,true,n)}}}},u=function(t){return t==null?null:t.split(" ")},c=function(t,e,n){for(var a in e){t[a]=n}},f=function(t,e){e=a.isArray(e)||e.length!=null&&!a.isString(e)?e:[e];for(var n=0;n<e.length;n++){try{t.apply(e[n],[e[n]])}catch(i){a.log(".each iteration failed : "+i)}}},h=function(t,e,n){if(t.getDefaultType){var i=t.getTypeDescriptor(),o={};var r=t.getDefaultType();var s=a.merge({},r);c(o,r,"__default");for(var l=0,u=t._jsPlumb.types.length;l<u;l++){var f=t._jsPlumb.types[l];if(f!=="__default"){var h=t._jsPlumb.instance.getType(f,i);if(h!=null){s=a.merge(s,h,["cssClass"]);c(o,h,f)}}}if(e){s=a.populate(s,e,"_")}t.applyType(s,n,o);if(!n){t.repaint()}}},d=t.jsPlumbUIComponent=function(t){a.EventGenerator.apply(this,arguments);var e=this,n=arguments,i=e.idPrefix,o=i+(new Date).getTime();this._jsPlumb={instance:t._jsPlumb,parameters:t.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:false,beforeDetach:t.beforeDetach,beforeDrop:t.beforeDrop,overlayPlacements:[],hoverClass:t.hoverClass||t._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}};this.cacheTypeItem=function(t,e,n){this._jsPlumb.typeCache[n]=this._jsPlumb.typeCache[n]||{};this._jsPlumb.typeCache[n][t]=e};this.getCachedTypeItem=function(t,e){return this._jsPlumb.typeCache[e]?this._jsPlumb.typeCache[e][t]:null};this.getId=function(){return o};var r=t.overlays||[],s={};if(this.defaultOverlayKeys){for(var l=0;l<this.defaultOverlayKeys.length;l++){Array.prototype.push.apply(r,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[l]]||[])}for(l=0;l<r.length;l++){var u=g.convertToFullOverlaySpec(r[l]);s[u[1].id]=u}}var c={overlays:s,parameters:t.parameters||{},scope:t.scope||this._jsPlumb.instance.getDefaultScope()};this.getDefaultType=function(){return c};this.appendToDefaultType=function(t){for(var e in t){c[e]=t[e]}};if(t.events){for(var f in t.events){e.bind(f,t.events[f])}}this.clone=function(){var t=Object.create(this.constructor.prototype);this.constructor.apply(t,n);return t}.bind(this);this.isDetachAllowed=function(t){var e=true;if(this._jsPlumb.beforeDetach){try{e=this._jsPlumb.beforeDetach(t)}catch(n){a.log("jsPlumb: beforeDetach callback failed",n)}}return e};this.isDropAllowed=function(t,e,n,i,o,r,s){var l=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:t,targetId:e,scope:n,connection:i,dropEndpoint:o,source:r,target:s});if(this._jsPlumb.beforeDrop){try{l=this._jsPlumb.beforeDrop({sourceId:t,targetId:e,scope:n,connection:i,dropEndpoint:o,source:r,target:s})}catch(u){a.log("jsPlumb: beforeDrop callback failed",u)}}return l};var h=[];this.setListenerComponent=function(t){for(var e=0;e<h.length;e++){h[e][3]=t}}};var p=function(t,e){var n=t._jsPlumb.types[e],a=t._jsPlumb.instance.getType(n,t.getTypeDescriptor());if(a!=null&&a.cssClass&&t.canvas){t._jsPlumb.instance.removeClass(t.canvas,a.cssClass)}};a.extend(t.jsPlumbUIComponent,a.EventGenerator,{getParameter:function(t){return this._jsPlumb.parameters[t]},setParameter:function(t,e){this._jsPlumb.parameters[t]=e},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(t){this._jsPlumb.parameters=t},getClass:function(){return g.getClass(this.canvas)},hasClass:function(t){return g.hasClass(this.canvas,t)},addClass:function(t){g.addClass(this.canvas,t)},removeClass:function(t){g.removeClass(this.canvas,t)},updateClasses:function(t,e){g.updateClasses(this.canvas,t,e)},setType:function(t,e,n){this.clearTypes();this._jsPlumb.types=u(t)||[];h(this,e,n)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(t,e){h(this,t,e)},hasType:function(t){return this._jsPlumb.types.indexOf(t)!==-1},addType:function(t,e,n){var a=u(t),i=false;if(a!=null){for(var o=0,r=a.length;o<r;o++){if(!this.hasType(a[o])){this._jsPlumb.types.push(a[o]);i=true}}if(i){h(this,e,n)}}},removeType:function(t,e,n){var a=u(t),i=false,o=function(t){var e=this._jsPlumb.types.indexOf(t);if(e!==-1){p(this,e);this._jsPlumb.types.splice(e,1);return true}return false}.bind(this);if(a!=null){for(var r=0,s=a.length;r<s;r++){i=o(a[r])||i}if(i){h(this,e,n)}}},clearTypes:function(t,e){var n=this._jsPlumb.types.length;for(var a=0;a<n;a++){p(this,0);this._jsPlumb.types.splice(0,1)}h(this,t,e)},toggleType:function(t,e,n){var a=u(t);if(a!=null){for(var i=0,o=a.length;i<o;i++){var r=this._jsPlumb.types.indexOf(a[i]);if(r!==-1){p(this,r);this._jsPlumb.types.splice(r,1)}else{this._jsPlumb.types.push(a[i])}}h(this,e,n)}},applyType:function(t,e){this.setPaintStyle(t.paintStyle,e);this.setHoverPaintStyle(t.hoverPaintStyle,e);if(t.parameters){for(var n in t.parameters){this.setParameter(n,t.parameters[n])}}this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(t,e){this._jsPlumb.paintStyle=t;this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle;o(this);if(!e){this.repaint()}},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(t,e){this._jsPlumb.hoverPaintStyle=t;o(this);if(!e){this.repaint()}},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(t){if(t||this.typeId==null){this.cleanupListeners();this.clone=null;this._jsPlumb=null}},isHover:function(){return this._jsPlumb.hover},setHover:function(t,e,n){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=t;var a=t?"addClass":"removeClass";if(this.canvas!=null){if(this._jsPlumb.instance.hoverClass!=null){this._jsPlumb.instance[a](this.canvas,this._jsPlumb.instance.hoverClass)}if(this._jsPlumb.hoverClass!=null){this._jsPlumb.instance[a](this.canvas,this._jsPlumb.hoverClass)}}if(this._jsPlumb.hoverPaintStyle!=null){this._jsPlumb.paintStyleInUse=t?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle;if(!this._jsPlumb.instance.isSuspendDrawing()){n=n||i();this.repaint({timestamp:n,recalc:false})}}if(this.getAttachedElements&&!e){l(this,t,i(),this)}}}});var _=0,v=function(){var t=_+1;_++;return t};var m=t.jsPlumbInstance=function(o){this.version="2.4.3";if(o){g.extend(this.Defaults,o)}this.logEnabled=this.Defaults.LogEnabled;this._connectionTypes={};this._endpointTypes={};a.EventGenerator.apply(this);var s=this,l=v(),u=s.bind,c={},h=1,p=function(t){if(t==null){return null}else if(t.nodeType===3||t.nodeType===8){return{el:t,text:true}}else{var e=s.getElement(t);return{el:e,id:a.isString(t)&&e==null?t:J(e)}}};this.getInstanceIndex=function(){return l};this.setZoom=function(t,e){h=t;s.fire("zoom",h);if(e){s.repaintEverything()}return true};this.getZoom=function(){return h};for(var _ in this.Defaults){c[_]=this.Defaults[_]}var m,y=[];this.unbindContainer=function(){if(m!=null&&y.length>0){for(var t=0;t<y.length;t++){s.off(m,y[t][0],y[t][1])}}};this.setContainer=function(t){this.unbindContainer();t=this.getElement(t);this.select().each(function(e){e.moveParent(t)});this.selectEndpoints().each(function(e){e.moveParent(t)});var e=m;m=t;y.length=0;var n={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"};var a=function(t,e,a){var i=e.srcElement||e.target,o=(i&&i.parentNode?i.parentNode._jsPlumb:null)||(i?i._jsPlumb:null)||(i&&i.parentNode&&i.parentNode.parentNode?i.parentNode.parentNode._jsPlumb:null);if(o){o.fire(t,o,e);var r=a?n[a+t]||t:t;s.fire(r,o.component||o,e)}};var i=function(t,e,n){y.push([t,n]);s.on(m,t,e,n)};var o=function(t){i(t,".jtk-connector",function(e){a(t,e)});i(t,".jtk-endpoint",function(e){a(t,e,"endpoint")});i(t,".jtk-overlay",function(e){a(t,e)})};for(var l=0;l<r.length;l++){o(r[l])}for(var u in j){var c=j[u].el;if(c.parentNode===e){e.removeChild(c);m.appendChild(c)}}};this.getContainer=function(){return m};this.bind=function(t,e){if("ready"===t&&x){e()}else{u.apply(s,[t,e])}};s.importDefaults=function(t){for(var e in t){s.Defaults[e]=t[e]}if(t.Container){s.setContainer(t.Container)}return s};s.restoreDefaults=function(){s.Defaults=g.extend({},c);return s};var b=null,x=false,P=[],w={},C={},j={},E={},I={},S={},T=false,Q=[],D=false,M=null,A=this.Defaults.Scope,k=1,O=function(){return""+k++},L=function(t,e){if(m){m.appendChild(t)}else if(!e){this.appendToRoot(t)}else{this.getElement(e).appendChild(t)}}.bind(this),F=function(t,e,n,a){if(!D){var o=J(t),r,l=s.getDragManager();if(l){r=l.getElementsForDraggable(o)}if(n==null){n=i()}var u=xe({elId:o,offset:e,recalc:false,timestamp:n});if(r&&u&&u.o){for(var c in r){xe({elId:r[c].id,offset:{left:u.o.left+r[c].offset.left,top:u.o.top+r[c].offset.top},recalc:false,timestamp:n})}}s.anchorManager.redraw(o,e,n,null,a);if(r){for(var f in r){s.anchorManager.redraw(r[f].id,e,n,r[f].offset,a,true)}}}},N=function(t){return C[t]},B=function(t,e,n,i,o){if(!g.headless){var r=e==null?false:e;if(r){if(g.isDragSupported(t,s)){var l=n||s.Defaults.DragOptions;l=g.extend({},l);if(!g.isAlreadyDraggable(t,s)){var u=g.dragEvents.drag,c=g.dragEvents.stop,f=g.dragEvents.start,h=false;
ye(i,t);l[f]=a.wrap(l[f],function(){s.setHoverSuspended(true);s.select({source:t}).addClass(s.elementDraggingClass+" "+s.sourceElementDraggingClass,true);s.select({target:t}).addClass(s.elementDraggingClass+" "+s.targetElementDraggingClass,true);s.setConnectionBeingDragged(true);if(l.canDrag){return n.canDrag()}},false);l[u]=a.wrap(l[u],function(){var e=s.getUIPosition(arguments,s.getZoom());if(e!=null){F(t,e,null,true);if(h){s.addClass(t,"jtk-dragged")}h=true}});l[c]=a.wrap(l[c],function(){var t=arguments[0].selection,e;var n=function(t){if(t[1]!=null){e=s.getUIPosition([{el:t[2].el,pos:[t[1].left,t[1].top]}]);F(t[2].el,e)}s.removeClass(t[0],"jtk-dragged");s.select({source:t[2].el}).removeClass(s.elementDraggingClass+" "+s.sourceElementDraggingClass,true);s.select({target:t[2].el}).removeClass(s.elementDraggingClass+" "+s.targetElementDraggingClass,true);s.getDragManager().dragEnded(t[2].el)};for(var a=0;a<t.length;a++){n(t[a])}h=false;s.setHoverSuspended(false);s.setConnectionBeingDragged(false)});var d=J(t);S[d]=true;var p=S[d];l.disabled=p==null?false:!p;s.initDraggable(t,l);s.getDragManager().register(t);if(o){s.fire("elementDraggable",{el:t,options:l})}}else{if(n.force){s.initDraggable(t,l)}}}}}},Y=function(t,e){var n=t.scope.split(/\s/),a=e.scope.split(/\s/);for(var i=0;i<n.length;i++){for(var o=0;o<a.length;o++){if(a[o]===n[i]){return true}}}return false},G=function(t,e){var n=g.extend({},t);if(e){g.extend(n,e)}if(n.source){if(n.source.endpoint){n.sourceEndpoint=n.source}else{n.source=s.getElement(n.source)}}if(n.target){if(n.target.endpoint){n.targetEndpoint=n.target}else{n.target=s.getElement(n.target)}}if(t.uuids){n.sourceEndpoint=N(t.uuids[0]);n.targetEndpoint=N(t.uuids[1])}if(n.sourceEndpoint&&n.sourceEndpoint.isFull()){a.log(s,"could not add connection; source endpoint is full");return}if(n.targetEndpoint&&n.targetEndpoint.isFull()){a.log(s,"could not add connection; target endpoint is full");return}if(!n.type&&n.sourceEndpoint){n.type=n.sourceEndpoint.connectionType}if(n.sourceEndpoint&&n.sourceEndpoint.connectorOverlays){n.overlays=n.overlays||[];for(var i=0,o=n.sourceEndpoint.connectorOverlays.length;i<o;i++){n.overlays.push(n.sourceEndpoint.connectorOverlays[i])}}if(n.sourceEndpoint&&n.sourceEndpoint.scope){n.scope=n.sourceEndpoint.scope}if(!n["pointer-events"]&&n.sourceEndpoint&&n.sourceEndpoint.connectorPointerEvents){n["pointer-events"]=n.sourceEndpoint.connectorPointerEvents}var r=function(t,e){var n=g.extend({},t);for(var a in e){if(e[a]){n[a]=e[a]}}return n};var l=function(t,e,a){return s.addEndpoint(t,r(e,{anchor:n.anchors?n.anchors[a]:n.anchor,endpoint:n.endpoints?n.endpoints[a]:n.endpoint,paintStyle:n.endpointStyles?n.endpointStyles[a]:n.endpointStyle,hoverPaintStyle:n.endpointHoverStyles?n.endpointHoverStyles[a]:n.endpointHoverStyle}))};var u=function(t,e,a,i){if(n[t]&&!n[t].endpoint&&!n[t+"Endpoint"]&&!n.newConnection){var o=J(n[t]),r=a[o];r=r?r[i]:null;if(r){if(!r.enabled){return false}var s=r.endpoint!=null&&r.endpoint._jsPlumb?r.endpoint:l(n[t],r.def,e);if(s.isFull()){return false}n[t+"Endpoint"]=s;if(!n.scope&&r.def.scope){n.scope=r.def.scope}s.setDeleteOnEmpty(true);if(r.uniqueEndpoint){if(!r.endpoint){r.endpoint=s;s.setDeleteOnEmpty(false)}else{s.finalEndpoint=r.endpoint}}}}};if(u("source",0,this.sourceEndpointDefinitions,n.type||"default")===false){return}if(u("target",1,this.targetEndpointDefinitions,n.type||"default")===false){return}if(n.sourceEndpoint&&n.targetEndpoint){if(!Y(n.sourceEndpoint,n.targetEndpoint)){n=null}}return n}.bind(s),R=function(t){var e=s.Defaults.ConnectionType||s.getDefaultConnectionType();t._jsPlumb=s;t.newConnection=R;t.newEndpoint=U;t.endpointsByUUID=C;t.endpointsByElement=w;t.finaliseConnection=X;t.id="con_"+O();var n=new e(t);if(n.isDetachable()){n.endpoints[0].initDraggable("_jsPlumbSource");n.endpoints[1].initDraggable("_jsPlumbTarget")}return n},X=s.finaliseConnection=function(t,e,n,a){e=e||{};if(!t.suspendedEndpoint){P.push(t)}t.pending=null;t.endpoints[0].isTemporarySource=false;if(a!==false){s.anchorManager.newConnection(t)}F(t.source);if(!e.doNotFireConnectionEvent&&e.fireEvent!==false){var i={connection:t,source:t.source,target:t.target,sourceId:t.sourceId,targetId:t.targetId,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1]};s.fire("connection",i,n)}},U=function(t,e){var n=s.Defaults.EndpointType||g.Endpoint;var a=g.extend({},t);a._jsPlumb=s;a.newConnection=R;a.newEndpoint=U;a.endpointsByUUID=C;a.endpointsByElement=w;a.fireDetachEvent=te;a.elementId=e||J(a.source);var i=new n(a);i.id="ep_"+O();ye(a.elementId,a.source);if(!g.headless){s.getDragManager().endpointAdded(a.source,e)}return i},W=function(t,e,n){var a=w[t];if(a&&a.length){for(var i=0,o=a.length;i<o;i++){for(var r=0,s=a[i].connections.length;r<s;r++){var l=e(a[i].connections[r]);if(l){return}}if(n){n(a[i])}}}},H=function(t,e){return g.each(t,function(t){if(s.isDragSupported(t)){S[s.getAttribute(t,"id")]=e;s.setElementDraggable(t,e)}})},z=function(t,e,n){e=e==="block";var a=null;if(n){a=function(t){t.setVisible(e,true,true)}}var i=p(t);W(i.id,function(t){if(e&&n){var a=t.sourceId===i.id?1:0;if(t.endpoints[a].isVisible()){t.setVisible(true)}}else{t.setVisible(e)}},a)},V=function(t){var e;g.each(t,function(t){var n=s.getAttribute(t,"id");e=S[n]==null?false:S[n];e=!e;S[n]=e;s.setDraggable(t,e);return e}.bind(this));return e},q=function(t,e){var n=null;if(e){n=function(t){var e=t.isVisible();t.setVisible(!e)}}W(t,function(t){var e=t.isVisible();t.setVisible(!e)},n)},$=function(t){var e=E[t];if(!e){return xe({elId:t})}else{return{o:e,s:Q[t]}}},J=function(t,e,n){if(a.isString(t)){return t}if(t==null){return null}var i=s.getAttribute(t,"id");if(!i||i==="undefined"){if(arguments.length===2&&arguments[1]!==undefined){i=e}else if(arguments.length===1||arguments.length===3&&!arguments[2]){i="jsPlumb_"+l+"_"+O()}if(!n){s.setAttribute(t,"id",i)}}return i};this.setConnectionBeingDragged=function(t){T=t};this.isConnectionBeingDragged=function(){return T};this.getManagedElements=function(){return j};this.connectorClass="jtk-connector";this.connectorOutlineClass="jtk-connector-outline";this.editableConnectorClass="jtk-connector-editable";this.connectedClass="jtk-connected";this.hoverClass="jtk-hover";this.endpointClass="jtk-endpoint";this.endpointConnectedClass="jtk-endpoint-connected";this.endpointFullClass="jtk-endpoint-full";this.endpointDropAllowedClass="jtk-endpoint-drop-allowed";this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden";this.overlayClass="jtk-overlay";this.draggingClass="jtk-dragging";this.elementDraggingClass="jtk-element-dragging";this.sourceElementDraggingClass="jtk-source-element-dragging";this.targetElementDraggingClass="jtk-target-element-dragging";this.endpointAnchorClassPrefix="jtk-endpoint-anchor";this.hoverSourceClass="jtk-source-hover";this.hoverTargetClass="jtk-target-hover";this.dragSelectClass="jtk-drag-select";this.Anchors={};this.Connectors={svg:{}};this.Endpoints={svg:{}};this.Overlays={svg:{}};this.ConnectorRenderers={};this.SVG="svg";this.addEndpoint=function(t,e,n){n=n||{};var i=g.extend({},n);g.extend(i,e);i.endpoint=i.endpoint||s.Defaults.Endpoint;i.paintStyle=i.paintStyle||s.Defaults.EndpointStyle;var o=[],r=a.isArray(t)||t.length!=null&&!a.isString(t)?t:[t];for(var l=0,u=r.length;l<u;l++){i.source=s.getElement(r[l]);me(i.source);var c=J(i.source),f=U(i,c);var h=ye(c,i.source).info.o;a.addToList(w,c,f);if(!D){f.paint({anchorLoc:f.anchor.compute({xy:[h.left,h.top],wh:Q[c],element:f,timestamp:M}),timestamp:M})}o.push(f)}return o.length===1?o[0]:o};this.addEndpoints=function(t,e,n){var i=[];for(var o=0,r=e.length;o<r;o++){var l=s.addEndpoint(t,e[o],n);if(a.isArray(l)){Array.prototype.push.apply(i,l)}else{i.push(l)}}return i};this.animate=function(t,e,n){if(!this.animationSupported){return false}n=n||{};var i=s.getElement(t),o=J(i),r=g.animEvents.step,l=g.animEvents.complete;n[r]=a.wrap(n[r],function(){s.revalidate(o)});n[l]=a.wrap(n[l],function(){s.revalidate(o)});s.doAnimate(i,e,n)};this.checkCondition=function(t,e){var n=s.getListener(t),i=true;if(n&&n.length>0){var o=Array.prototype.slice.call(arguments,1);try{for(var r=0,l=n.length;r<l;r++){i=i&&n[r].apply(n[r],o)}}catch(u){a.log(s,"cannot check condition ["+t+"]"+u)}}return i};this.connect=function(t,e){var n=G(t,e),i;if(n){if(n.source==null&&n.sourceEndpoint==null){a.log("Cannot establish connection - source does not exist");return}if(n.target==null&&n.targetEndpoint==null){a.log("Cannot establish connection - target does not exist");return}me(n.source);i=R(n);X(i,n)}return i};var Z=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}];var K=function(t,e,n,a){var i,o=Z[n],r=t[o.elId],s=t[o.el],l,u,c=t.endpoints[n];var f={index:n,originalSourceId:n===0?r:t.sourceId,newSourceId:t.sourceId,originalTargetId:n===1?r:t.targetId,newTargetId:t.targetId,connection:t};if(e.constructor===g.Endpoint){i=e;i.addConnection(t);e=i.element}else{l=J(e);u=this[o.epDefs][l];if(l===t[o.elId]){i=null}else if(u){for(var h in u){if(!u[h].enabled){return}i=u[h].endpoint!=null&&u[h].endpoint._jsPlumb?u[h].endpoint:this.addEndpoint(e,u[h].def);if(u[h].uniqueEndpoint){u[h].endpoint=i}i.addConnection(t)}}else{i=t.makeEndpoint(n===0,e,l)}}if(i!=null){c.detachFromConnection(t);t.endpoints[n]=i;t[o.el]=i.element;t[o.elId]=i.elementId;f[n===0?"newSourceId":"newTargetId"]=i.elementId;ee(f);if(!a){t.repaint()}}f.element=e;return f}.bind(this);this.setSource=function(t,e,n){var a=K(t,e,0,n);this.anchorManager.sourceChanged(a.originalSourceId,a.newSourceId,t,a.el)};this.setTarget=function(t,e,n){var a=K(t,e,1,n);this.anchorManager.updateOtherEndpoint(a.originalSourceId,a.originalTargetId,a.newTargetId,t)};this.deleteEndpoint=function(t,e,n){var a=typeof t==="string"?C[t]:t;if(a){s.deleteObject({endpoint:a,dontUpdateHover:e,deleteAttachedObjects:n})}return s};this.deleteEveryEndpoint=function(){var t=s.setSuspendDrawing(true);for(var e in w){var n=w[e];if(n&&n.length){for(var a=0,i=n.length;a<i;a++){s.deleteEndpoint(n[a],true)}}}w={};j={};C={};E={};I={};s.anchorManager.reset();var o=s.getDragManager();if(o){o.reset()}if(!t){s.setSuspendDrawing(false)}return s};var te=function(t,e,n){var a=s.Defaults.ConnectionType||s.getDefaultConnectionType(),i=t.constructor===a,o=i?{connection:t,source:t.source,target:t.target,sourceId:t.sourceId,targetId:t.targetId,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1]}:t;if(e){s.fire("connectionDetached",o,n)}s.fire("internal.connectionDetached",o,n);s.anchorManager.connectionDetached(o)};var ee=s.fireMoveEvent=function(t,e){s.fire("connectionMoved",t,e)};this.unregisterEndpoint=function(t){if(t._jsPlumb.uuid){C[t._jsPlumb.uuid]=null}s.anchorManager.deleteEndpoint(t);for(var e in w){var n=w[e];if(n){var a=[];for(var i=0,o=n.length;i<o;i++){if(n[i]!==t){a.push(n[i])}}w[e]=a}if(w[e].length<1){delete w[e]}}};var ne="isDetachAllowed";var ae="beforeDetach";var ie="checkCondition";this.deleteConnection=function(t,e){if(t!=null){e=e||{};if(e.force||a.functionChain(true,false,[[t.endpoints[0],ne,[t]],[t.endpoints[1],ne,[t]],[t,ne,[t]],[s,ie,[ae,t]]])){t.setHover(false);te(t,!t.pending&&e.fireEvent!==false,e.originalEvent);t.endpoints[0].detachFromConnection(t);t.endpoints[1].detachFromConnection(t);a.removeWithFunction(P,function(e){return t.id===e.id});t.cleanup();t.destroy();return true}}return false};this.deleteEveryConnection=function(t){t=t||{};var e=P.length,n=0;s.batch(function(){for(var a=0;a<e;a++){n+=s.deleteConnection(P[0],t)?1:0}});return n};this.deleteConnectionsForElement=function(t,e){e=e||{};t=s.getElement(t);var n=J(t),a=w[n];if(a&&a.length){for(var i=0,o=a.length;i<o;i++){a[i].deleteEveryConnection(e)}}return s};this.deleteObject=function(t){var e={endpoints:{},connections:{},endpointCount:0,connectionCount:0},n=t.deleteAttachedObjects!==false;var i=function(n){if(n!=null&&e.connections[n.id]==null){if(!t.dontUpdateHover&&n._jsPlumb!=null){n.setHover(false)}e.connections[n.id]=n;e.connectionCount++}};var o=function(a){if(a!=null&&e.endpoints[a.id]==null){if(!t.dontUpdateHover&&a._jsPlumb!=null){a.setHover(false)}e.endpoints[a.id]=a;e.endpointCount++;if(n){for(var o=0;o<a.connections.length;o++){var r=a.connections[o];i(r)}}}};if(t.connection){i(t.connection)}else{o(t.endpoint)}for(var r in e.connections){var l=e.connections[r];if(l._jsPlumb){a.removeWithFunction(P,function(t){return l.id===t.id});te(l,t.fireEvent===false?false:!l.pending,t.originalEvent);var u=t.deleteAttachedObjects==null?null:!t.deleteAttachedObjects;l.endpoints[0].detachFromConnection(l,null,u);l.endpoints[1].detachFromConnection(l,null,u);l.cleanup(true);l.destroy(true)}}for(var c in e.endpoints){var f=e.endpoints[c];if(f._jsPlumb){s.unregisterEndpoint(f);f.cleanup(true);f.destroy(true)}}return e};this.draggable=function(t,e){var n;f(function(t){n=p(t);if(n.el){B(n.el,true,e,n.id,true)}},t);return s};this.droppable=function(t,e){var n;e=e||{};e.allowLoopback=false;f(function(t){n=p(t);if(n.el){s.initDroppable(n.el,e)}},t);return s};var oe=function(t,e,n,a){for(var i=0,o=t.length;i<o;i++){t[i][e].apply(t[i],n)}return a(t)},re=function(t,e,n){var a=[];for(var i=0,o=t.length;i<o;i++){a.push([t[i][e].apply(t[i],n),t[i]])}return a},se=function(t,e,n){return function(){return oe(t,e,arguments,n)}},le=function(t,e){return function(){return re(t,e,arguments)}},ue=function(t,e){var n=[];if(t){if(typeof t==="string"){if(t==="*"){return t}n.push(t)}else{if(e){n=t}else{if(t.length){for(var a=0,i=t.length;a<i;a++){n.push(p(t[a]).id)}}else{n.push(p(t).id)}}}}return n},ce=function(t,e,n){if(t==="*"){return true}return t.length>0?t.indexOf(e)!==-1:!n};this.getConnections=function(t,e){if(!t){t={}}else if(t.constructor===String){t={scope:t}}var n=t.scope||s.getDefaultScope(),a=ue(n,true),i=ue(t.source),o=ue(t.target),r=!e&&a.length>1?{}:[],l=function(t,n){if(!e&&a.length>1){var i=r[t];if(i==null){i=r[t]=[]}i.push(n)}else{r.push(n)}};for(var u=0,c=P.length;u<c;u++){var f=P[u],h=f.proxies&&f.proxies[0]?f.proxies[0].originalEp.elementId:f.sourceId,d=f.proxies&&f.proxies[1]?f.proxies[1].originalEp.elementId:f.targetId;if(ce(a,f.scope)&&ce(i,h)&&ce(o,d)){l(f.scope,f)}}return r};var fe=function(t,e){return function(n){for(var a=0,i=t.length;a<i;a++){n(t[a])}return e(t)}},he=function(t){return function(e){return t[e]}};var de=function(t,e){var n={length:t.length,each:fe(t,e),get:he(t)},a=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],i=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"],o,r;for(o=0,r=a.length;o<r;o++){n[a[o]]=se(t,a[o],e)}for(o=0,r=i.length;o<r;o++){n[i[o]]=le(t,i[o])}return n};var pe=function(t){var e=de(t,pe);return g.extend(e,{setDetachable:se(t,"setDetachable",pe),setReattach:se(t,"setReattach",pe),setConnector:se(t,"setConnector",pe),"delete":function(){for(var e=0,n=t.length;e<n;e++){s.deleteConnection(t[e])}},isDetachable:le(t,"isDetachable"),isReattach:le(t,"isReattach")})};var _e=function(t){var e=de(t,_e);return g.extend(e,{setEnabled:se(t,"setEnabled",_e),setAnchor:se(t,"setAnchor",_e),isEnabled:le(t,"isEnabled"),deleteEveryConnection:function(){for(var e=0,n=t.length;e<n;e++){t[e].deleteEveryConnection()}},"delete":function(){for(var e=0,n=t.length;e<n;e++){s.deleteEndpoint(t[e])}}})};this.select=function(t){t=t||{};t.scope=t.scope||"*";return pe(t.connections||s.getConnections(t,true))};this.selectEndpoints=function(t){t=t||{};t.scope=t.scope||"*";var e=!t.element&&!t.source&&!t.target,n=e?"*":ue(t.element),a=e?"*":ue(t.source),i=e?"*":ue(t.target),o=ue(t.scope,true);var r=[];for(var s in w){var l=ce(n,s,true),u=ce(a,s,true),c=a!=="*",f=ce(i,s,true),h=i!=="*";if(l||u||f){t:for(var d=0,p=w[s].length;d<p;d++){var _=w[s][d];if(ce(o,_.scope,true)){var v=c&&a.length>0&&!_.isSource,m=h&&i.length>0&&!_.isTarget;if(v||m){continue t}r.push(_)}}}}return _e(r)};this.getAllConnections=function(){return P};this.getDefaultScope=function(){return A};this.getEndpoint=N;this.getEndpoints=function(t){return w[p(t).id]||[]};this.getDefaultEndpointType=function(){return g.Endpoint};this.getDefaultConnectionType=function(){return g.Connection};this.getId=J;this.appendElement=L;var ve=false;this.isHoverSuspended=function(){return ve};this.setHoverSuspended=function(t){ve=t};this.hide=function(t,e){z(t,"none",e);return s};this.idstamp=O;this.connectorsInitialized=false;this.registerConnectorType=function(t,n){e.push([t,n])};var me=function(t){if(!m&&t){var e=s.getElement(t);if(e.offsetParent){s.setContainer(e.offsetParent)}}};var ge=function(){if(s.Defaults.Container){s.setContainer(s.Defaults.Container)}};var ye=s.manage=function(t,e,n){if(!j[t]){j[t]={el:e,endpoints:[],connections:[]};j[t].info=xe({elId:t,timestamp:M});if(!n){s.fire("manageElement",{id:t,info:j[t].info,el:e})}}return j[t]};var be=function(t){if(j[t]){delete j[t];s.fire("unmanageElement",t)}};var xe=this.updateOffset=function(t){var e=t.timestamp,n=t.recalc,a=t.offset,i=t.elId,o;if(D&&!e){e=M}if(!n){if(e&&e===I[i]){return{o:t.offset||E[i],s:Q[i]}}}if(n||!a&&E[i]==null){o=j[i]?j[i].el:null;if(o!=null){Q[i]=s.getSize(o);E[i]=s.getOffset(o);I[i]=e}}else{E[i]=a||E[i];if(Q[i]==null){o=j[i].el;if(o!=null){Q[i]=s.getSize(o)}}I[i]=e}if(E[i]&&!E[i].right){E[i].right=E[i].left+Q[i][0];E[i].bottom=E[i].top+Q[i][1];E[i].width=Q[i][0];E[i].height=Q[i][1];E[i].centerx=E[i].left+E[i].width/2;E[i].centery=E[i].top+E[i].height/2}return{o:E[i],s:Q[i]}};this.init=function(){n=t.jsPlumb.getRenderModes();var i=function(e,n,i){t.jsPlumb.Connectors[e][n]=function(){i.apply(this,arguments);t.jsPlumb.ConnectorRenderers[e].apply(this,arguments)};a.extend(t.jsPlumb.Connectors[e][n],[i,t.jsPlumb.ConnectorRenderers[e]])};if(!t.jsPlumb.connectorsInitialized){for(var o=0;o<e.length;o++){for(var r=0;r<n.length;r++){i(n[r],e[o][1],e[o][0])}}t.jsPlumb.connectorsInitialized=true}if(!x){ge();s.anchorManager=new t.jsPlumb.AnchorManager({jsPlumbInstance:s});x=true;s.fire("ready",s)}}.bind(this);this.log=b;this.jsPlumbUIComponent=d;this.makeAnchor=function(){var e,n=function(e,n){if(t.jsPlumb.Anchors[e]){return new t.jsPlumb.Anchors[e](n)}if(!s.Defaults.DoNotThrowErrors){throw{msg:"jsPlumb: unknown anchor type '"+e+"'"}}};if(arguments.length===0){return null}var i=arguments[0],o=arguments[1],r=arguments[2],l=null;if(i.compute&&i.getOrientation){return i}else if(typeof i==="string"){l=n(arguments[0],{elementId:o,jsPlumbInstance:s})}else if(a.isArray(i)){if(a.isArray(i[0])||a.isString(i[0])){if(i.length===2&&a.isObject(i[1])){if(a.isString(i[0])){e=t.jsPlumb.extend({elementId:o,jsPlumbInstance:s},i[1]);l=n(i[0],e)}else{e=t.jsPlumb.extend({elementId:o,jsPlumbInstance:s,anchors:i[0]},i[1]);l=new t.jsPlumb.DynamicAnchor(e)}}else{l=new g.DynamicAnchor({anchors:i,selector:null,elementId:o,jsPlumbInstance:s})}}else{var u={x:i[0],y:i[1],orientation:i.length>=4?[i[2],i[3]]:[0,0],offsets:i.length>=6?[i[4],i[5]]:[0,0],elementId:o,jsPlumbInstance:s,cssClass:i.length===7?i[6]:null};l=new t.jsPlumb.Anchor(u);l.clone=function(){return new t.jsPlumb.Anchor(u)}}}if(!l.id){l.id="anchor_"+O()}return l};this.makeAnchors=function(e,n,i){var o=[];for(var r=0,l=e.length;r<l;r++){if(typeof e[r]==="string"){o.push(t.jsPlumb.Anchors[e[r]]({elementId:n,jsPlumbInstance:i}))}else if(a.isArray(e[r])){o.push(s.makeAnchor(e[r],n,i))}}return o};this.makeDynamicAnchor=function(e,n){return new t.jsPlumb.DynamicAnchor({anchors:e,selector:n,elementId:null,jsPlumbInstance:s})};this.targetEndpointDefinitions={};this.sourceEndpointDefinitions={};var Pe=function(t,e,n,a,i){var o=t.target||t.srcElement,r=false,s=a.getSelector(e,n);for(var l=0;l<s.length;l++){if(s[l]===o){r=true;break}}return i?!r:r};var we=function(e,n,i,o,r){var l=new d(n);var u=n._jsPlumb.EndpointDropHandler({jsPlumb:s,enabled:function(){return e.def.enabled},isFull:function(){var t=s.select({target:e.id}).length;return e.def.maxConnections>0&&t>=e.def.maxConnections},element:e.el,elementId:e.id,isSource:o,isTarget:r,addClass:function(t){s.addClass(e.el,t)},removeClass:function(t){s.removeClass(e.el,t)},onDrop:function(t){var e=t.endpoints[0];e.anchor.locked=false},isDropAllowed:function(){return l.isDropAllowed.apply(l,arguments)},isRedrop:function(t){return t.suspendedElement!=null&&t.suspendedEndpoint!=null&&t.suspendedEndpoint.element===e.el},getEndpoint:function(a){var i=e.def.endpoint;if(i==null||i._jsPlumb==null){var o=s.deriveEndpointAndAnchorSpec(a.getType().join(" "),true);var r=o.endpoints?t.jsPlumb.extend(n,{endpoint:e.def.def.endpoint||o.endpoints[1]}):n;if(o.anchors){r=t.jsPlumb.extend(r,{anchor:e.def.def.anchor||o.anchors[1]})}i=s.addEndpoint(e.el,r);i._mtNew=true}if(n.uniqueEndpoint){e.def.endpoint=i}i.setDeleteOnEmpty(true);if(a.isDetachable()){i.initDraggable()}if(i.anchor.positionFinder!=null){var l=s.getUIPosition(arguments,s.getZoom()),u=s.getOffset(e.el),c=s.getSize(e.el),f=l==null?[0,0]:i.anchor.positionFinder(l,u,c,i.anchor.constructorParams);i.anchor.x=f[0];i.anchor.y=f[1]}return i},maybeCleanup:function(t){if(t._mtNew&&t.connections.length===0){s.deleteObject({endpoint:t})}else{delete t._mtNew}}});var c=t.jsPlumb.dragEvents.drop;i.scope=i.scope||(n.scope||s.Defaults.Scope);i[c]=a.wrap(i[c],u,true);if(r){i[t.jsPlumb.dragEvents.over]=function(){return true}}if(n.allowLoopback===false){i.canDrop=function(t){var n=t.getDragElement()._jsPlumbRelatedElement;return n!==e.el}}s.initDroppable(e.el,i,"internal");return u};this.makeTarget=function(e,n,a){var i=t.jsPlumb.extend({_jsPlumb:this},a);t.jsPlumb.extend(i,n);var o=i.maxConnections||-1,r=function(e){var n=p(e),a=n.id,r=t.jsPlumb.extend({},i.dropOptions||{}),s=i.connectionType||"default";this.targetEndpointDefinitions[a]=this.targetEndpointDefinitions[a]||{};me(a);if(n.el._isJsPlumbGroup&&r.rank==null){r.rank=-1}var l={def:t.jsPlumb.extend({},i),uniqueEndpoint:i.uniqueEndpoint,maxConnections:o,enabled:true};n.def=l;this.targetEndpointDefinitions[a][s]=l;we(n,i,r,i.isSource===true,true);n.el._katavorioDrop[n.el._katavorioDrop.length-1].targetDef=l}.bind(this);var s=e.length&&e.constructor!==String?e:[e];for(var l=0,u=s.length;l<u;l++){r(s[l])}return this};this.unmakeTarget=function(t,e){var n=p(t);s.destroyDroppable(n.el,"internal");if(!e){delete this.targetEndpointDefinitions[n.id]}return this};this.makeSource=function(e,n,i){var o=t.jsPlumb.extend({_jsPlumb:this},i);t.jsPlumb.extend(o,n);var r=o.connectionType||"default";var l=s.deriveEndpointAndAnchorSpec(r);o.endpoint=o.endpoint||l.endpoints[0];o.anchor=o.anchor||l.anchors[0];var u=o.maxConnections||-1,c=o.onMaxConnections,f=function(e){var n=e.id,i=this.getElement(e.el);this.sourceEndpointDefinitions[n]=this.sourceEndpointDefinitions[n]||{};me(n);var l={def:t.jsPlumb.extend({},o),uniqueEndpoint:o.uniqueEndpoint,maxConnections:u,enabled:true};this.sourceEndpointDefinitions[n][r]=l;e.def=l;var f=t.jsPlumb.dragEvents.stop,d=t.jsPlumb.dragEvents.drag,p=t.jsPlumb.extend({},o.dragOptions||{}),_=p.drag,v=p.stop,m=null,g=false;p.scope=p.scope||o.scope;p[d]=a.wrap(p[d],function(){if(_){_.apply(this,arguments)}g=false});p[f]=a.wrap(p[f],function(){if(v){v.apply(this,arguments)}this.currentlyDragging=false;if(m._jsPlumb!=null){var t=o.anchor||this.Defaults.Anchor,e=m.anchor,a=m.connections[0];var i=this.makeAnchor(t,n,this),r=m.element;if(i.positionFinder!=null){var l=s.getOffset(r),u=this.getSize(r),c={left:l.left+e.x*u[0],top:l.top+e.y*u[1]},f=i.positionFinder(c,l,u,i.constructorParams);i.x=f[0];i.y=f[1]}m.setAnchor(i,true);m.repaint();this.repaint(m.elementId);if(a!=null){this.repaint(a.targetId)}}}.bind(this));var y=function(l){if(l.which===3||l.button===2){return}var f=this.sourceEndpointDefinitions[n][r];if(!f.enabled){return}n=this.getId(this.getElement(e.el));if(o.filter){var d=a.isString(o.filter)?Pe(l,e.el,o.filter,this,o.filterExclude):o.filter(l,e.el);if(d===false){return}}var _=this.select({source:n}).length;if(f.maxConnections>=0&&_>=f.maxConnections){if(c){c({element:e.el,maxConnections:u},l)}return false}var v=t.jsPlumb.getPositionOnElement(l,i,h);var y={};t.jsPlumb.extend(y,o);y.isTemporarySource=true;y.anchor=[v[0],v[1],0,0];y.dragOptions=p;if(f.def.scope){y.scope=f.def.scope}m=this.addEndpoint(n,y);g=true;m.setDeleteOnEmpty(true);if(f.uniqueEndpoint){if(!f.endpoint){f.endpoint=m;m.setDeleteOnEmpty(false)}else{m.finalEndpoint=f.endpoint}}var b=function(){s.off(m.canvas,"mouseup",b);s.off(e.el,"mouseup",b);if(g){g=false;s.deleteEndpoint(m)}};s.on(m.canvas,"mouseup",b);s.on(e.el,"mouseup",b);var x={};if(f.def.extract){for(var P in f.def.extract){var w=(l.srcElement||l.target).getAttribute(P);if(w){x[f.def.extract[P]]=w}}}s.trigger(m.canvas,"mousedown",l,x);a.consume(l)}.bind(this);this.on(e.el,"mousedown",y);l.trigger=y;if(o.filter&&(a.isString(o.filter)||a.isFunction(o.filter))){s.setDragFilter(e.el,o.filter)}var b=t.jsPlumb.extend({},o.dropOptions||{});we(e,o,b,true,o.isTarget===true)}.bind(this);var d=e.length&&e.constructor!==String?e:[e];for(var _=0,v=d.length;_<v;_++){f(p(d[_]))}return this};this.unmakeSource=function(t,e,n){var a=p(t);s.destroyDroppable(a.el,"internal");var i=this.sourceEndpointDefinitions[a.id];if(i){for(var o in i){if(e==null||e===o){var r=i[o].trigger;if(r){s.off(a.el,"mousedown",r)}if(!n){delete this.sourceEndpointDefinitions[a.id][o]}}}}return this};this.unmakeEverySource=function(){for(var t in this.sourceEndpointDefinitions){s.unmakeSource(t,null,true)}this.sourceEndpointDefinitions={};return this};var Ce=function(t,e,n){e=a.isArray(e)?e:[e];var i=J(t);n=n||"default";for(var o=0;o<e.length;o++){var r=this[e[o]][i];if(r&&r[n]){return r[n].def.scope||this.Defaults.Scope}}}.bind(this);var je=function(t,e,n,i){n=a.isArray(n)?n:[n];var o=J(t);i=i||"default";for(var r=0;r<n.length;r++){var s=this[n[r]][o];if(s&&s[i]){s[i].def.scope=e}}}.bind(this);this.getScope=function(t,e){return Ce(t,["sourceEndpointDefinitions","targetEndpointDefinitions"])};this.getSourceScope=function(t){return Ce(t,"sourceEndpointDefinitions")};this.getTargetScope=function(t){return Ce(t,"targetEndpointDefinitions")};this.setScope=function(t,e,n){this.setSourceScope(t,e,n);this.setTargetScope(t,e,n)};this.setSourceScope=function(t,e,n){je(t,e,"sourceEndpointDefinitions",n);this.setDragScope(t,e)};this.setTargetScope=function(t,e,n){je(t,e,"targetEndpointDefinitions",n);this.setDropScope(t,e)};this.unmakeEveryTarget=function(){for(var t in this.targetEndpointDefinitions){s.unmakeTarget(t,true)}this.targetEndpointDefinitions={};return this};var Ee=function(t,e,n,i,o){var r=t==="source"?this.sourceEndpointDefinitions:this.targetEndpointDefinitions,l,u,c;o=o||"default";if(e.length&&!a.isString(e)){l=[];for(var f=0,h=e.length;f<h;f++){u=p(e[f]);if(r[u.id]&&r[u.id][o]){l[f]=r[u.id][o].enabled;c=i?!l[f]:n;r[u.id][o].enabled=c;s[c?"removeClass":"addClass"](u.el,"jtk-"+t+"-disabled")}}}else{u=p(e);var d=u.id;if(r[d]&&r[d][o]){l=r[d][o].enabled;c=i?!l:n;r[d][o].enabled=c;s[c?"removeClass":"addClass"](u.el,"jtk-"+t+"-disabled")}}return l}.bind(this);var Ie=function(t,e){if(a.isString(t)||!t.length){return e.apply(this,[t])}else if(t.length){return e.apply(this,[t[0]])}}.bind(this);this.toggleSourceEnabled=function(t,e){Ee("source",t,null,true,e);return this.isSourceEnabled(t,e)};this.setSourceEnabled=function(t,e,n){return Ee("source",t,e,null,n)};this.isSource=function(t,e){e=e||"default";return Ie(t,function(t){var n=this.sourceEndpointDefinitions[p(t).id];return n!=null&&n[e]!=null}.bind(this))};this.isSourceEnabled=function(t,e){e=e||"default";return Ie(t,function(t){var n=this.sourceEndpointDefinitions[p(t).id];return n&&n[e]&&n[e].enabled===true}.bind(this))};this.toggleTargetEnabled=function(t,e){Ee("target",t,null,true,e);return this.isTargetEnabled(t,e)};this.isTarget=function(t,e){e=e||"default";return Ie(t,function(t){var n=this.targetEndpointDefinitions[p(t).id];return n!=null&&n[e]!=null}.bind(this))};this.isTargetEnabled=function(t,e){e=e||"default";return Ie(t,function(t){var n=this.targetEndpointDefinitions[p(t).id];return n&&n[e]&&n[e].enabled===true}.bind(this))};this.setTargetEnabled=function(t,e,n){return Ee("target",t,e,null,n)};this.ready=function(t){s.bind("ready",t)};var Se=function(t,e){if(typeof t==="object"&&t.length){for(var n=0,a=t.length;n<a;n++){e(t[n])}}else{e(t)}return s};this.repaint=function(t,e,n){return Se(t,function(t){F(t,e,n)})};this.revalidate=function(t,e,n){return Se(t,function(t){var a=n?t:s.getId(t);s.updateOffset({elId:a,recalc:true,timestamp:e});var i=s.getDragManager();if(i){i.updateOffsets(a)}s.repaint(t)})};this.repaintEverything=function(){var t=i(),e;for(e in w){s.updateOffset({elId:e,recalc:true,timestamp:t})}for(e in w){F(e,null,t)}return this};this.removeAllEndpoints=function(t,e,n){n=n||[];var a=function(t){var i=p(t),o=w[i.id],r,l;if(o){n.push(i);for(r=0,l=o.length;r<l;r++){s.deleteEndpoint(o[r],false)}}delete w[i.id];if(e){if(i.el&&i.el.nodeType!==3&&i.el.nodeType!==8){for(r=0,l=i.el.childNodes.length;r<l;r++){a(i.el.childNodes[r])}}}};a(t);return this};var Te=function(t,e){s.removeAllEndpoints(t.id,true,e);var n=s.getDragManager();var a=function(t){if(n){n.elementRemoved(t.id)}s.anchorManager.clearFor(t.id);s.anchorManager.removeFloatingConnection(t.id);if(s.isSource(t.el)){s.unmakeSource(t.el)}if(s.isTarget(t.el)){s.unmakeTarget(t.el)}s.destroyDraggable(t.el);s.destroyDroppable(t.el);delete s.floatingConnections[t.id];delete j[t.id];delete E[t.id];if(t.el){s.removeElement(t.el);t.el._jsPlumb=null}};for(var i=1;i<e.length;i++){a(e[i])}a(t)};this.remove=function(t,e){var n=p(t),a=[];if(n.text){n.el.parentNode.removeChild(n.el)}else if(n.id){s.batch(function(){Te(n,a)},e===false)}return s};this.empty=function(t,e){var n=[];var a=function(t,e){var i=p(t);if(i.text){i.el.parentNode.removeChild(i.el)}else if(i.el){while(i.el.childNodes.length>0){a(i.el.childNodes[0])}if(!e){Te(i,n)}}};s.batch(function(){a(t,true)},e===false);return s};this.reset=function(){s.silently(function(){ve=false;s.removeAllGroups();s.removeGroupManager();s.deleteEveryEndpoint();s.unbind();this.targetEndpointDefinitions={};this.sourceEndpointDefinitions={};P.length=0;if(this.doReset){this.doReset()}}.bind(this))};var Qe=function(t){if(t.canvas&&t.canvas.parentNode){t.canvas.parentNode.removeChild(t.canvas)}t.cleanup();t.destroy()};this.clear=function(){s.select().each(Qe);s.selectEndpoints().each(Qe);w={};C={}};this.setDefaultScope=function(t){A=t;return s};this.setDraggable=H;this.deriveEndpointAndAnchorSpec=function(t,e){var n=((e?"":"default ")+t).split(/[\s]/),a=null,i=null,o=null,r=null;for(var l=0;l<n.length;l++){var u=s.getType(n[l],"connection");if(u){if(u.endpoints){a=u.endpoints}if(u.endpoint){i=u.endpoint}if(u.anchors){r=u.anchors}if(u.anchor){o=u.anchor}}}return{endpoints:a?a:[i,i],anchors:r?r:[o,o]}};this.setId=function(t,e,n){var i;if(a.isString(t)){i=t}else{t=this.getElement(t);i=this.getId(t)}var o=this.getConnections({source:i,scope:"*"},true),r=this.getConnections({target:i,scope:"*"},true);e=""+e;if(!n){t=this.getElement(i);this.setAttribute(t,"id",e)}else{t=this.getElement(e)}w[e]=w[i]||[];for(var s=0,l=w[e].length;s<l;s++){w[e][s].setElementId(e);w[e][s].setReferenceElement(t)}delete w[i];this.sourceEndpointDefinitions[e]=this.sourceEndpointDefinitions[i];delete this.sourceEndpointDefinitions[i];this.targetEndpointDefinitions[e]=this.targetEndpointDefinitions[i];delete this.targetEndpointDefinitions[i];this.anchorManager.changeId(i,e);var u=this.getDragManager();if(u){u.changeId(i,e)}j[e]=j[i];delete j[i];var c=function(n,a,i){for(var o=0,r=n.length;o<r;o++){n[o].endpoints[a].setElementId(e);n[o].endpoints[a].setReferenceElement(t);n[o][i+"Id"]=e;n[o][i]=t}};c(o,0,"source");c(r,1,"target");this.repaint(e)
};this.setDebugLog=function(t){b=t};this.setSuspendDrawing=function(t,e){var n=D;D=t;if(t){M=(new Date).getTime()}else{M=null}if(e){this.repaintEverything()}return n};this.isSuspendDrawing=function(){return D};this.getSuspendedAt=function(){return M};this.batch=function(t,e){var n=this.isSuspendDrawing();if(!n){this.setSuspendDrawing(true)}try{t()}catch(i){a.log("Function run while suspended failed",i)}if(!n){this.setSuspendDrawing(false,!e)}};this.doWhileSuspended=this.batch;this.getCachedData=$;this.timestamp=i;this.show=function(t,e){z(t,"block",e);return s};this.toggleVisible=q;this.toggleDraggable=V;this.addListener=this.bind};a.extend(t.jsPlumbInstance,a.EventGenerator,{setAttribute:function(t,e,n){this.setAttribute(t,e,n)},getAttribute:function(e,n){return this.getAttribute(t.jsPlumb.getElement(e),n)},convertToFullOverlaySpec:function(t){if(a.isString(t)){t=[t,{}]}t[1].id=t[1].id||a.uuid();return t},registerConnectionType:function(e,n){this._connectionTypes[e]=t.jsPlumb.extend({},n);if(n.overlays){var a={};for(var i=0;i<n.overlays.length;i++){var o=this.convertToFullOverlaySpec(n.overlays[i]);a[o[1].id]=o}this._connectionTypes[e].overlays=a}},registerConnectionTypes:function(t){for(var e in t){this.registerConnectionType(e,t[e])}},registerEndpointType:function(e,n){this._endpointTypes[e]=t.jsPlumb.extend({},n);if(n.overlays){var a={};for(var i=0;i<n.overlays.length;i++){var o=this.convertToFullOverlaySpec(n.overlays[i]);a[o[1].id]=o}this._endpointTypes[e].overlays=a}},registerEndpointTypes:function(t){for(var e in t){this.registerEndpointType(e,t[e])}},getType:function(t,e){return e==="connection"?this._connectionTypes[t]:this._endpointTypes[t]},setIdChanged:function(t,e){this.setId(t,e,true)},setParent:function(t,e){var n=this.getElement(t),a=this.getId(n),i=this.getElement(e),o=this.getId(i),r=this.getDragManager();n.parentNode.removeChild(n);i.appendChild(n);if(r){r.setParent(n,a,i,o)}},extend:function(t,e,n){var a;if(n){for(a=0;a<n.length;a++){t[n[a]]=e[n[a]]}}else{for(a in e){t[a]=e[a]}}return t},floatingConnections:{},getFloatingAnchorIndex:function(t){return t.endpoints[0].isFloating()?0:t.endpoints[1].isFloating()?1:-1}});m.prototype.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:true,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:false,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:false,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:false,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"};var g=new m;t.jsPlumb=g;g.getInstance=function(t,e){var n=new m(t);if(e){for(var a in e){n[a]=e[a]}}n.init();return n};g.each=function(t,e){if(t==null){return}if(typeof t==="string"){e(g.getElement(t))}else if(t.length!=null){for(var n=0;n<t.length;n++){e(g.getElement(t[n]))}}else{e(t)}};if(typeof exports!=="undefined"){exports.jsPlumb=g}}).call(typeof window!=="undefined"?window:this);(function(){var t=this,e=t.jsPlumbUtil;var n=function(t,e){if(e==null){return[0,0]}var n=s(e),a=r(n,0);return[a[t+"X"],a[t+"Y"]]},a=n.bind(this,"page"),i=n.bind(this,"screen"),o=n.bind(this,"client"),r=function(t,e){return t.item?t.item(e):t[e]},s=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]};var l=function(t){var e={},n=[],a={},i={},o={};this.register=function(r){var s=t.getId(r),l=t.getOffset(r);if(!e[s]){e[s]=r;n.push(r);a[s]={}}var u=function(e){if(e){for(var n=0;n<e.childNodes.length;n++){if(e.childNodes[n].nodeType!==3&&e.childNodes[n].nodeType!==8){var r=jsPlumb.getElement(e.childNodes[n]),c=t.getId(e.childNodes[n],null,true);if(c&&i[c]&&i[c]>0){var f=t.getOffset(r);a[s][c]={id:c,offset:{left:f.left-l.left,top:f.top-l.top}};o[c]=s}u(e.childNodes[n])}}}};u(r)};this.updateOffsets=function(e,n){if(e!=null){n=n||{};var i=jsPlumb.getElement(e),r=t.getId(i),s=a[r],l=t.getOffset(i);if(s){for(var u in s){if(s.hasOwnProperty(u)){var c=jsPlumb.getElement(u),f=n[u]||t.getOffset(c);if(c.offsetParent==null&&a[r][u]!=null){continue}a[r][u]={id:u,offset:{left:f.left-l.left,top:f.top-l.top}};o[u]=r}}}}};this.endpointAdded=function(n,r){r=r||t.getId(n);var s=document.body,l=n.parentNode;i[r]=i[r]?i[r]+1:1;while(l!=null&&l!==s){var u=t.getId(l,null,true);if(u&&e[u]){var c=t.getOffset(l);if(a[u][r]==null){var f=t.getOffset(n);a[u][r]={id:r,offset:{left:f.left-c.left,top:f.top-c.top}};o[r]=u}break}l=l.parentNode}};this.endpointDeleted=function(t){if(i[t.elementId]){i[t.elementId]--;if(i[t.elementId]<=0){for(var e in a){if(a.hasOwnProperty(e)&&a[e]){delete a[e][t.elementId];delete o[t.elementId]}}}}};this.changeId=function(t,e){a[e]=a[t];a[t]={};o[e]=o[t];o[t]=null};this.getElementsForDraggable=function(t){return a[t]};this.elementRemoved=function(t){var e=o[t];if(e){delete a[e][t];delete o[t]}};this.reset=function(){e={};n=[];a={};i={}};this.dragEnded=function(e){if(e.offsetParent!=null){var n=t.getId(e),a=o[n];if(a){this.updateOffsets(a)}}};this.setParent=function(e,n,i,r,s){var l=o[n];if(!a[r]){a[r]={}}var u=t.getOffset(i),c=s||t.getOffset(e);if(l&&a[l]){delete a[l][n]}a[r][n]={id:n,offset:{left:c.left-u.left,top:c.top-u.top}};o[n]=r};this.clearParent=function(t,e){var n=o[e];if(n){delete a[n][e];delete o[e]}};this.revalidateParent=function(e,n,a){var i=o[n];if(i){var r={};r[n]=a;this.updateOffsets(i,r);t.revalidate(i)}};this.getDragAncestor=function(e){var n=jsPlumb.getElement(e),a=t.getId(n),i=o[a];if(i){return jsPlumb.getElement(i)}else{return null}}};var u=function(t){return t==null?null:t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},c=function(t,e){e=u(e);if(typeof t.className.baseVal!=="undefined"){t.className.baseVal=e}else{t.className=e}},f=function(t){return typeof t.className.baseVal==="undefined"?t.className:t.className.baseVal},h=function(t,n,a){n=n==null?[]:e.isArray(n)?n:n.split(/\s+/);a=a==null?[]:e.isArray(a)?a:a.split(/\s+/);var i=f(t),o=i.split(/\s+/);var r=function(t,e){for(var n=0;n<e.length;n++){if(t){if(o.indexOf(e[n])===-1){o.push(e[n])}}else{var a=o.indexOf(e[n]);if(a!==-1){o.splice(a,1)}}}};r(true,n);r(false,a);c(t,o.join(" "))};t.jsPlumb.extend(t.jsPlumbInstance.prototype,{headless:false,pageLocation:a,screenLocation:i,clientLocation:o,getDragManager:function(){if(this.dragManager==null){this.dragManager=new l(this)}return this.dragManager},recalculateOffsets:function(t){this.getDragManager().updateOffsets(t)},createElement:function(t,e,n,a){return this.createElementNS(null,t,e,n,a)},createElementNS:function(t,e,n,a,i){var o=t==null?document.createElement(e):document.createElementNS(t,e);var r;n=n||{};for(r in n){o.style[r]=n[r]}if(a){o.className=a}i=i||{};for(r in i){o.setAttribute(r,""+i[r])}return o},getAttribute:function(t,e){return t.getAttribute!=null?t.getAttribute(e):null},setAttribute:function(t,e,n){if(t.setAttribute!=null){t.setAttribute(e,n)}},setAttributes:function(t,e){for(var n in e){if(e.hasOwnProperty(n)){t.setAttribute(n,e[n])}}},appendToRoot:function(t){document.body.appendChild(t)},getRenderModes:function(){return["svg"]},getClass:f,addClass:function(t,e){jsPlumb.each(t,function(t){h(t,e)})},hasClass:function(t,e){t=jsPlumb.getElement(t);if(t.classList){return t.classList.contains(e)}else{return f(t).indexOf(e)!==-1}},removeClass:function(t,e){jsPlumb.each(t,function(t){h(t,null,e)})},updateClasses:function(t,e,n){jsPlumb.each(t,function(t){h(t,e,n)})},setClass:function(t,e){jsPlumb.each(t,function(t){c(t,e)})},setPosition:function(t,e){t.style.left=e.left+"px";t.style.top=e.top+"px"},getPosition:function(t){var e=function(e){var n=t.style[e];return n?n.substring(0,n.length-2):0};return{left:e("left"),top:e("top")}},getStyle:function(t,e){if(typeof window.getComputedStyle!=="undefined"){return getComputedStyle(t,null).getPropertyValue(e)}else{return t.currentStyle[e]}},getSelector:function(t,e){var n=null;if(arguments.length===1){n=t.nodeType!=null?t:document.querySelectorAll(t)}else{n=t.querySelectorAll(e)}return n},getOffset:function(t,e,n){t=jsPlumb.getElement(t);n=n||this.getContainer();var a={left:t.offsetLeft,top:t.offsetTop},i=e||n!=null&&(t!==n&&t.offsetParent!==n)?t.offsetParent:null,o=function(t){if(t!=null&&t!==document.body&&(t.scrollTop>0||t.scrollLeft>0)){a.left-=t.scrollLeft;a.top-=t.scrollTop}}.bind(this);while(i!=null){a.left+=i.offsetLeft;a.top+=i.offsetTop;o(i);i=e?i.offsetParent:i.offsetParent===n?null:i.offsetParent}if(n!=null&&!e&&(n.scrollTop>0||n.scrollLeft>0)){var r=t.offsetParent!=null?this.getStyle(t.offsetParent,"position"):"static",s=this.getStyle(t,"position");if(s!=="absolute"&&s!=="fixed"&&r!=="absolute"&&r!=="fixed"){a.left-=n.scrollLeft;a.top-=n.scrollTop}}return a},getPositionOnElement:function(t,e,n){var a=typeof e.getBoundingClientRect!=="undefined"?e.getBoundingClientRect():{left:0,top:0,width:0,height:0},i=document.body,o=document.documentElement,r=window.pageYOffset||o.scrollTop||i.scrollTop,s=window.pageXOffset||o.scrollLeft||i.scrollLeft,l=o.clientTop||i.clientTop||0,u=o.clientLeft||i.clientLeft||0,c=0,f=0,h=a.top+r-l+c*n,d=a.left+s-u+f*n,p=jsPlumb.pageLocation(t),_=a.width||e.offsetWidth*n,v=a.height||e.offsetHeight*n,m=(p[0]-d)/_,g=(p[1]-h)/v;return[m,g]},getAbsolutePosition:function(t){var e=function(e){var n=t.style[e];if(n){return parseFloat(n.substring(0,n.length-2))}};return[e("left"),e("top")]},setAbsolutePosition:function(t,e,n,a){if(n){this.animate(t,{left:"+="+(e[0]-n[0]),top:"+="+(e[1]-n[1])},a)}else{t.style.left=e[0]+"px";t.style.top=e[1]+"px"}},getSize:function(t){return[t.offsetWidth,t.offsetHeight]},getWidth:function(t){return t.offsetWidth},getHeight:function(t){return t.offsetHeight},getRenderMode:function(){return"svg"}})}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil;var a="__label",i=function(t,n){var i={cssClass:n.cssClass,labelStyle:t.labelStyle,id:a,component:t,_jsPlumb:t._jsPlumb.instance},o=e.extend(i,n);return new(e.Overlays[t._jsPlumb.instance.getRenderMode()].Label)(o)},o=function(t,a){var i=null;if(n.isArray(a)){var o=a[0],r=e.extend({component:t,_jsPlumb:t._jsPlumb.instance},a[1]);if(a.length===3){e.extend(r,a[2])}i=new(e.Overlays[t._jsPlumb.instance.getRenderMode()][o])(r)}else if(a.constructor===String){i=new(e.Overlays[t._jsPlumb.instance.getRenderMode()][a])({component:t,_jsPlumb:t._jsPlumb.instance})}else{i=a}i.id=i.id||n.uuid();t.cacheTypeItem("overlay",i,i.id);t._jsPlumb.overlays[i.id]=i;return i};e.OverlayCapableJsPlumbUIComponent=function(e){t.jsPlumbUIComponent.apply(this,arguments);this._jsPlumb.overlays={};this._jsPlumb.overlayPositions={};if(e.label){this.getDefaultType().overlays[a]=["Label",{label:e.label,location:e.labelLocation||this.defaultLabelLocation||.5,labelStyle:e.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:a}]}this.setListenerComponent=function(t){if(this._jsPlumb){for(var e in this._jsPlumb.overlays){this._jsPlumb.overlays[e].setListenerComponent(t)}}}};e.OverlayCapableJsPlumbUIComponent.applyType=function(t,e){if(e.overlays){var n={},a;for(a in e.overlays){var i=t._jsPlumb.overlays[e.overlays[a][1].id];if(i){i.updateFrom(e.overlays[a][1]);n[e.overlays[a][1].id]=true}else{var o=t.getCachedTypeItem("overlay",e.overlays[a][1].id);if(o!=null){o.reattach(t._jsPlumb.instance);o.setVisible(true);o.updateFrom(e.overlays[a][1]);t._jsPlumb.overlays[o.id]=o}else{o=t.addOverlay(e.overlays[a],true)}n[o.id]=true}}for(a in t._jsPlumb.overlays){if(n[t._jsPlumb.overlays[a].id]==null){t.removeOverlay(t._jsPlumb.overlays[a].id,true)}}}};n.extend(e.OverlayCapableJsPlumbUIComponent,t.jsPlumbUIComponent,{setHover:function(t,e){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()){for(var n in this._jsPlumb.overlays){this._jsPlumb.overlays[n][t?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)}}},addOverlay:function(t,e){var n=o(this,t);if(!e){this.repaint()}return n},getOverlay:function(t){return this._jsPlumb.overlays[t]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(t){var e=this.getOverlay(t);if(e){e.hide()}},hideOverlays:function(){for(var t in this._jsPlumb.overlays){this._jsPlumb.overlays[t].hide()}},showOverlay:function(t){var e=this.getOverlay(t);if(e){e.show()}},showOverlays:function(){for(var t in this._jsPlumb.overlays){this._jsPlumb.overlays[t].show()}},removeAllOverlays:function(t){for(var e in this._jsPlumb.overlays){if(this._jsPlumb.overlays[e].cleanup){this._jsPlumb.overlays[e].cleanup()}}this._jsPlumb.overlays={};this._jsPlumb.overlayPositions=null;if(!t){this.repaint()}},removeOverlay:function(t,e){var n=this._jsPlumb.overlays[t];if(n){n.setVisible(false);if(!e&&n.cleanup){n.cleanup()}delete this._jsPlumb.overlays[t];if(this._jsPlumb.overlayPositions){delete this._jsPlumb.overlayPositions[t]}}},removeOverlays:function(){for(var t=0,e=arguments.length;t<e;t++){this.removeOverlay(arguments[t])}},moveParent:function(t){if(this.bgCanvas){this.bgCanvas.parentNode.removeChild(this.bgCanvas);t.appendChild(this.bgCanvas)}if(this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas);t.appendChild(this.canvas);for(var e in this._jsPlumb.overlays){if(this._jsPlumb.overlays[e].isAppendedAtTopLevel){var n=this._jsPlumb.overlays[e].getElement();n.parentNode.removeChild(n);t.appendChild(n)}}}},getLabel:function(){var t=this.getOverlay(a);return t!=null?t.getLabel():null},getLabelOverlay:function(){return this.getOverlay(a)},setLabel:function(t){var e=this.getOverlay(a);if(!e){var n=t.constructor===String||t.constructor===Function?{label:t}:t;e=i(this,n);this._jsPlumb.overlays[a]=e}else{if(t.constructor===String||t.constructor===Function){e.setLabel(t)}else{if(t.label){e.setLabel(t.label)}if(t.location){e.setLocation(t.location)}}}if(!this._jsPlumb.instance.isSuspendDrawing()){this.repaint()}},cleanup:function(t){for(var e in this._jsPlumb.overlays){this._jsPlumb.overlays[e].cleanup(t);this._jsPlumb.overlays[e].destroy(t)}if(t){this._jsPlumb.overlays={};this._jsPlumb.overlayPositions=null}},setVisible:function(t){this[t?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(t,e){this._jsPlumb.overlayPositions[t.id]=e},getAbsoluteOverlayPosition:function(t){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[t.id]:null},_clazzManip:function(t,e,n){if(!n){for(var a in this._jsPlumb.overlays){this._jsPlumb.overlays[a][t+"Class"](e)}}},addClass:function(t,e){this._clazzManip("add",t,e)},removeClass:function(t,e){this._clazzManip("remove",t,e)}})}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil;var a=function(t,e,n){var a=false;return{drag:function(){if(a){a=false;return true}if(e.element){var i=n.getUIPosition(arguments,n.getZoom());if(i!=null){n.setPosition(e.element,i)}n.repaint(e.element,i);t.paint({anchorPoint:t.anchor.getCurrentLocation({element:t})})}},stopDrag:function(){a=true}}};var i=function(t,e,n,a){var i=e.createElement("div",{position:"absolute"});e.appendElement(i);var o=e.getId(i);e.setPosition(i,n);i.style.width=a[0]+"px";i.style.height=a[1]+"px";e.manage(o,i,true);t.id=o;t.element=i};var o=function(t,n,a,i,o,r,s,l){var u=new e.FloatingAnchor({reference:n,referenceCanvas:i,jsPlumbInstance:r});return s({paintStyle:t,endpoint:a,anchor:u,source:o,scope:l})};var r=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"];var s=function(t,e){var n=0;if(e!=null){for(var a=0;a<t.connections.length;a++){if(t.connections[a].sourceId===e||t.connections[a].targetId===e){n=a;break}}}return t.connections[n]};e.Endpoint=function(t){var l=t._jsPlumb,u=t.newConnection,c=t.newEndpoint;this.idPrefix="_jsplumb_e_";this.defaultLabelLocation=[.5,.5];this.defaultOverlayKeys=["Overlays","EndpointOverlays"];e.OverlayCapableJsPlumbUIComponent.apply(this,arguments);this.appendToDefaultType({connectionType:t.connectionType,maxConnections:t.maxConnections==null?this._jsPlumb.instance.Defaults.MaxConnections:t.maxConnections,paintStyle:t.endpointStyle||t.paintStyle||t.style||this._jsPlumb.instance.Defaults.EndpointStyle||e.Defaults.EndpointStyle,hoverPaintStyle:t.endpointHoverStyle||t.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||e.Defaults.EndpointHoverStyle,connectorStyle:t.connectorStyle,connectorHoverStyle:t.connectorHoverStyle,connectorClass:t.connectorClass,connectorHoverClass:t.connectorHoverClass,connectorOverlays:t.connectorOverlays,connector:t.connector,connectorTooltip:t.connectorTooltip});this._jsPlumb.enabled=!(t.enabled===false);this._jsPlumb.visible=true;this.element=e.getElement(t.source);this._jsPlumb.uuid=t.uuid;this._jsPlumb.floatingEndpoint=null;var f=null;if(this._jsPlumb.uuid){t.endpointsByUUID[this._jsPlumb.uuid]=this}this.elementId=t.elementId;this.dragProxy=t.dragProxy;this._jsPlumb.connectionCost=t.connectionCost;this._jsPlumb.connectionsDirected=t.connectionsDirected;this._jsPlumb.currentAnchorClass="";this._jsPlumb.events={};var h=t.deleteOnEmpty===true;this.setDeleteOnEmpty=function(t){h=t};var d=function(){var t=l.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var n=l.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(t);this.addClass(n);e.updateClasses(this.element,n,t)}.bind(this);this.prepareAnchor=function(t){var e=this._jsPlumb.instance.makeAnchor(t,this.elementId,l);e.bind("anchorChanged",function(t){this.fire("anchorChanged",{endpoint:this,anchor:t});d()}.bind(this));return e};this.setPreparedAnchor=function(t,e){this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId);this.anchor=t;d();if(!e){this._jsPlumb.instance.repaint(this.elementId)}return this};this.setAnchor=function(t,e){var n=this.prepareAnchor(t);this.setPreparedAnchor(n,e);return this};var p=function(t){if(this.connections.length>0){for(var e=0;e<this.connections.length;e++){this.connections[e].setHover(t,false)}}else{this.setHover(t)}}.bind(this);this.bind("mouseover",function(){p(true)});this.bind("mouseout",function(){p(false)});if(!t._transient){this._jsPlumb.instance.anchorManager.add(this,this.elementId)}this.prepareEndpoint=function(a,i){var o=function(t,n){var a=l.getRenderMode();if(e.Endpoints[a][t]){return new e.Endpoints[a][t](n)}if(!l.Defaults.DoNotThrowErrors){throw{msg:"jsPlumb: unknown endpoint type '"+t+"'"}}};var r={_jsPlumb:this._jsPlumb.instance,cssClass:t.cssClass,container:t.container,tooltip:t.tooltip,connectorTooltip:t.connectorTooltip,endpoint:this};var s;if(n.isString(a)){s=o(a,r)}else if(n.isArray(a)){r=n.merge(a[1],r);s=o(a[0],r)}else{s=a.clone()}s.clone=function(){if(n.isString(a)){return o(a,r)}else if(n.isArray(a)){r=n.merge(a[1],r);return o(a[0],r)}}.bind(this);s.typeId=i;return s};this.setEndpoint=function(t,e){var n=this.prepareEndpoint(t);this.setPreparedEndpoint(n,true)};this.setPreparedEndpoint=function(t,e){if(this.endpoint!=null){this.endpoint.cleanup();this.endpoint.destroy()}this.endpoint=t;this.type=this.endpoint.type;this.canvas=this.endpoint.canvas};e.extend(this,t,r);this.isSource=t.isSource||false;this.isTemporarySource=t.isTemporarySource||false;this.isTarget=t.isTarget||false;this.connections=t.connections||[];this.connectorPointerEvents=t["connector-pointer-events"];this.scope=t.scope||l.getDefaultScope();this.timestamp=null;this.reattachConnections=t.reattach||l.Defaults.ReattachConnections;this.connectionsDetachable=l.Defaults.ConnectionsDetachable;if(t.connectionsDetachable===false||t.detachable===false){this.connectionsDetachable=false}this.dragAllowedWhenFull=t.dragAllowedWhenFull!==false;if(t.onMaxConnections){this.bind("maxConnections",t.onMaxConnections)}this.addConnection=function(t){this.connections.push(t);this[(this.connections.length>0?"add":"remove")+"Class"](l.endpointConnectedClass);this[(this.isFull()?"add":"remove")+"Class"](l.endpointFullClass)};this.detachFromConnection=function(t,e,n){e=e==null?this.connections.indexOf(t):e;if(e>=0){this.connections.splice(e,1);this[(this.connections.length>0?"add":"remove")+"Class"](l.endpointConnectedClass);this[(this.isFull()?"add":"remove")+"Class"](l.endpointFullClass)}if(!n&&h&&this.connections.length===0){l.deleteObject({endpoint:this,fireEvent:false,deleteAttachedObjects:n!==true})}};this.deleteEveryConnection=function(t){var e=this.connections.length;for(var n=0;n<e;n++){l.deleteConnection(this.connections[0],t)}};this.detachFrom=function(t,e,n){var a=[];for(var i=0;i<this.connections.length;i++){if(this.connections[i].endpoints[1]===t||this.connections[i].endpoints[0]===t){a.push(this.connections[i])}}for(var o=0,r=a.length;o<r;o++){l.deleteConnection(a[0])}return this};this.getElement=function(){return this.element};this.setElement=function(a){var i=this._jsPlumb.instance.getId(a),o=this.elementId;n.removeWithFunction(t.endpointsByElement[this.elementId],function(t){return t.id===this.id}.bind(this));this.element=e.getElement(a);this.elementId=l.getId(this.element);l.anchorManager.rehomeEndpoint(this,o,this.element);l.dragManager.endpointAdded(this.element);n.addToList(t.endpointsByElement,i,this);return this};this.makeInPlaceCopy=function(){var e=this.anchor.getCurrentLocation({element:this}),n=this.anchor.getOrientation(this),a=this.anchor.getCssClass(),i={bind:function(){},compute:function(){return[e[0],e[1]]},getCurrentLocation:function(){return[e[0],e[1]]},getOrientation:function(){return n},getCssClass:function(){return a}};return c({dropOptions:t.dropOptions,anchor:i,source:this.element,paintStyle:this.getPaintStyle(),endpoint:t.hideOnDrag?"Blank":this.endpoint,_transient:true,scope:this.scope,reference:this})};this.connectorSelector=function(){var t=this.connections[0];if(t){return t}else{return this.connections.length<this._jsPlumb.maxConnections||this._jsPlumb.maxConnections===-1?null:t}};this.setStyle=this.setPaintStyle;this.paint=function(t){t=t||{};var e=t.timestamp,n=!(t.recalc===false);if(!e||this.timestamp!==e){var a=l.updateOffset({elId:this.elementId,timestamp:e});var i=t.offset?t.offset.o:a.o;if(i!=null){var o=t.anchorPoint,r=t.connectorPaintStyle;if(o==null){var u=t.dimensions||a.s,c={xy:[i.left,i.top],wh:u,element:this,timestamp:e};if(n&&this.anchor.isDynamic&&this.connections.length>0){var f=s(this,t.elementWithPrecedence),h=f.endpoints[0]===this?1:0,d=h===0?f.sourceId:f.targetId,p=l.getCachedData(d),_=p.o,v=p.s;c.txy=[_.left,_.top];c.twh=v;c.tElement=f.endpoints[h]}o=this.anchor.compute(c)}this.endpoint.compute(o,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,r||this.paintStyleInUse);this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor);this.timestamp=e;for(var m in this._jsPlumb.overlays){if(this._jsPlumb.overlays.hasOwnProperty(m)){var g=this._jsPlumb.overlays[m];if(g.isVisible()){this._jsPlumb.overlayPlacements[m]=g.draw(this.endpoint,this._jsPlumb.paintStyleInUse);g.paint(this._jsPlumb.overlayPlacements[m])}}}}}};this.getTypeDescriptor=function(){return"endpoint"};this.isVisible=function(){return this._jsPlumb.visible};this.repaint=this.paint;var _=false;this.initDraggable=function(){if(!_&&e.isDragSupported(this.element)){var r={id:null,element:null},s=null,h=false,d=null,p=a(this,r,l),v=t.dragOptions||{},m={},g=e.dragEvents.start,y=e.dragEvents.stop,b=e.dragEvents.drag,x=e.dragEvents.beforeStart,P;var w=function(t){P=t.e.payload||{}};var C=function(a){s=this.connectorSelector();var f=true;if(!this.isEnabled()){f=false}if(s==null&&!this.isSource&&!this.isTemporarySource){f=false}if(this.isSource&&this.isFull()&&!(s!=null&&this.dragAllowedWhenFull)){f=false}if(s!=null&&!s.isDetachable(this)){f=false}var _=l.checkCondition(s==null?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:s});if(_===false){f=false}else if(typeof _==="object"){e.extend(_,P||{})}else{_=P||{}}if(f===false){if(l.stopDrag){l.stopDrag(this.canvas)}p.stopDrag();return false}for(var v=0;v<this.connections.length;v++){this.connections[v].setHover(false)}this.addClass("endpointDrag");l.setConnectionBeingDragged(true);if(s&&!this.isFull()&&this.isSource){s=null}l.updateOffset({elId:this.elementId});var m=this._jsPlumb.instance.getOffset(this.canvas),g=this.canvas,y=this._jsPlumb.instance.getSize(this.canvas);i(r,l,m,y);l.setAttributes(this.canvas,{dragId:r.id,elId:this.elementId});var b=this.dragProxy||this.endpoint;if(this.dragProxy==null&&this.connectionType!=null){var x=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);if(x.endpoints[1]){b=x.endpoints[1]}}var w=this._jsPlumb.instance.makeAnchor("Center");w.isFloating=true;this._jsPlumb.floatingEndpoint=o(this.getPaintStyle(),w,b,this.canvas,r.element,l,c,this.scope);var C=this._jsPlumb.floatingEndpoint.anchor;if(s==null){this.setHover(false,false);s=u({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:r.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:t.connectorStyle,hoverPaintStyle:t.connectorHoverStyle,connector:t.connector,overlays:t.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:t.scope,data:_});s.pending=true;s.addClass(l.draggingClass);this._jsPlumb.floatingEndpoint.addClass(l.draggingClass);this._jsPlumb.floatingEndpoint.anchor=C;l.fire("connectionDrag",s);l.anchorManager.newConnection(s)}else{h=true;s.setHover(false);var j=s.endpoints[0].id===this.id?0:1;this.detachFromConnection(s,null,true);var E=l.getDragScope(g);l.setAttribute(this.canvas,"originalScope",E);l.fire("connectionDrag",s);if(j===0){d=[s.source,s.sourceId,g,E];l.anchorManager.sourceChanged(s.endpoints[j].elementId,r.id,s,r.element)}else{d=[s.target,s.targetId,g,E];s.target=r.element;s.targetId=r.id;l.anchorManager.updateOtherEndpoint(s.sourceId,s.endpoints[j].elementId,s.targetId,s)}s.suspendedEndpoint=s.endpoints[j];s.suspendedElement=s.endpoints[j].getElement();s.suspendedElementId=s.endpoints[j].elementId;s.suspendedElementType=j===0?"source":"target";s.suspendedEndpoint.setHover(false);this._jsPlumb.floatingEndpoint.referenceEndpoint=s.suspendedEndpoint;s.endpoints[j]=this._jsPlumb.floatingEndpoint;s.addClass(l.draggingClass);this._jsPlumb.floatingEndpoint.addClass(l.draggingClass)}l.floatingConnections[r.id]=s;n.addToList(t.endpointsByElement,r.id,this._jsPlumb.floatingEndpoint);l.currentlyDragging=true}.bind(this);var j=function(){l.setConnectionBeingDragged(false);if(s&&s.endpoints!=null){var t=l.getDropEvent(arguments);var e=l.getFloatingAnchorIndex(s);s.endpoints[e===0?1:0].anchor.locked=false;s.removeClass(l.draggingClass);if(this._jsPlumb&&(s.deleteConnectionNow||s.endpoints[e]===this._jsPlumb.floatingEndpoint)){if(h&&s.suspendedEndpoint){if(e===0){s.floatingElement=s.source;s.floatingId=s.sourceId;s.floatingEndpoint=s.endpoints[0];s.floatingIndex=0;s.source=d[0];s.sourceId=d[1]}else{s.floatingElement=s.target;s.floatingId=s.targetId;s.floatingEndpoint=s.endpoints[1];s.floatingIndex=1;s.target=d[0];s.targetId=d[1]}var n=this._jsPlumb.floatingEndpoint;l.setDragScope(d[2],d[3]);s.endpoints[e]=s.suspendedEndpoint;if(s.isReattach()||s._forceReattach||s._forceDetach||!l.deleteConnection(s)){s.setHover(false);s._forceDetach=null;s._forceReattach=null;this._jsPlumb.floatingEndpoint.detachFromConnection(s);s.suspendedEndpoint.addConnection(s);if(e===1){l.anchorManager.updateOtherEndpoint(s.sourceId,s.floatingId,s.targetId,s)}else{l.anchorManager.sourceChanged(s.floatingId,s.sourceId,s,s.source)}l.repaint(d[1])}else{l.deleteObject({endpoint:n})}}}if(this.deleteAfterDragStop){l.deleteObject({endpoint:this})}else{if(this._jsPlumb){this.paint({recalc:false})}}l.fire("connectionDragStop",s,t);if(s.pending){l.fire("connectionAborted",s,t)}l.currentlyDragging=false;s.suspendedElement=null;s.suspendedEndpoint=null;s=null}if(r&&r.element){l.remove(r.element,false,false)}if(f){l.deleteObject({endpoint:f})}if(this._jsPlumb){this.canvas.style.visibility="visible";this.anchor.locked=false;this._jsPlumb.floatingEndpoint=null}}.bind(this);v=e.extend(m,v);v.scope=this.scope||v.scope;v[x]=n.wrap(v[x],w,false);v[g]=n.wrap(v[g],C,false);v[b]=n.wrap(v[b],p.drag);v[y]=n.wrap(v[y],j);v.multipleDrop=false;v.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0}.bind(this);l.initDraggable(this.canvas,v,"internal");this.canvas._jsPlumbRelatedElement=this.element;_=true}};var v=t.endpoint||this._jsPlumb.instance.Defaults.Endpoint||e.Defaults.Endpoint;this.setEndpoint(v,true);var m=t.anchor?t.anchor:t.anchors?t.anchors:l.Defaults.Anchor||"Top";this.setAnchor(m,true);var g=["default",t.type||""].join(" ");this.addType(g,t.data,true);this.canvas=this.endpoint.canvas;this.canvas._jsPlumb=this;this.initDraggable();var y=function(a,i,o,r){if(e.isDropSupported(this.element)){var s=t.dropOptions||l.Defaults.DropOptions||e.Defaults.DropOptions;s=e.extend({},s);s.scope=s.scope||this.scope;var u=e.dragEvents.drop,c=e.dragEvents.over,f=e.dragEvents.out,h=this,d=l.EndpointDropHandler({getEndpoint:function(){return h},jsPlumb:l,enabled:function(){return o!=null?o.isEnabled():true},isFull:function(){return o.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(t){h.addClass(t)},removeClass:function(t){h.removeClass(t)},isDropAllowed:function(){return h.isDropAllowed.apply(h,arguments)},reference:r,isRedrop:function(t,e){return t.suspendedEndpoint&&e.reference&&t.suspendedEndpoint.id===e.reference.id}});s[u]=n.wrap(s[u],d,true);s[c]=n.wrap(s[c],function(){var t=e.getDragObject(arguments),n=l.getAttribute(e.getElement(t),"dragId"),a=l.floatingConnections[n];if(a!=null){var i=l.getFloatingAnchorIndex(a);var o=this.isTarget&&i!==0||a.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===a.suspendedEndpoint.id;if(o){var r=l.checkCondition("checkDropAllowed",{sourceEndpoint:a.endpoints[i],targetEndpoint:this,connection:a});this[(r?"add":"remove")+"Class"](l.endpointDropAllowedClass);this[(r?"remove":"add")+"Class"](l.endpointDropForbiddenClass);a.endpoints[i].anchor.over(this.anchor,this)}}}.bind(this));s[f]=n.wrap(s[f],function(){var t=e.getDragObject(arguments),n=t==null?null:l.getAttribute(e.getElement(t),"dragId"),a=n?l.floatingConnections[n]:null;if(a!=null){var i=l.getFloatingAnchorIndex(a);var o=this.isTarget&&i!==0||a.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===a.suspendedEndpoint.id;if(o){this.removeClass(l.endpointDropAllowedClass);this.removeClass(l.endpointDropForbiddenClass);a.endpoints[i].anchor.out()}}}.bind(this));l.initDroppable(a,s,"internal",i)}}.bind(this);if(!this.anchor.isFloating){y(this.canvas,!(t._transient||this.anchor.isFloating),this,t.reference)}return this};n.extend(e.Endpoint,e.OverlayCapableJsPlumbUIComponent,{setVisible:function(t,e,n){this._jsPlumb.visible=t;if(this.canvas){this.canvas.style.display=t?"block":"none"}this[t?"showOverlays":"hideOverlays"]();if(!e){for(var a=0;a<this.connections.length;a++){this.connections[a].setVisible(t);if(!n){var i=this===this.connections[a].endpoints[0]?1:0;if(this.connections[a].endpoints[i].connections.length===1){this.connections[a].endpoints[i].setVisible(t,true,true)}}}}},getAttachedElements:function(){return this.connections},applyType:function(t,n){this.setPaintStyle(t.endpointStyle||t.paintStyle,n);this.setHoverPaintStyle(t.endpointHoverStyle||t.hoverPaintStyle,n);if(t.maxConnections!=null){this._jsPlumb.maxConnections=t.maxConnections}if(t.scope){this.scope=t.scope}e.extend(this,t,r);if(t.cssClass!=null&&this.canvas){this._jsPlumb.instance.addClass(this.canvas,t.cssClass)}e.OverlayCapableJsPlumbUIComponent.applyType(this,t)},isEnabled:function(){return this._jsPlumb.enabled
},setEnabled:function(t){this._jsPlumb.enabled=t},cleanup:function(){var t=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");e.removeClass(this.element,t);this.anchor=null;this.endpoint.cleanup(true);this.endpoint.destroy();this.endpoint=null;this._jsPlumb.instance.destroyDraggable(this.canvas,"internal");this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(t){if(this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()){this.endpoint.setHover(t)}},isFull:function(){return this._jsPlumb.maxConnections===0?true:!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return this.anchor!=null&&this.anchor.isFloating},isConnectedTo:function(t){var e=false;if(t){for(var n=0;n<this.connections.length;n++){if(this.connections[n].endpoints[1]===t||this.connections[n].endpoints[0]===t){e=true;break}}}return e},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(t){this._jsPlumb.connectionCost=t},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(t){this._jsPlumb.connectionsDirected=t},setElementId:function(t){this.elementId=t;this.anchor.elementId=t},setReferenceElement:function(t){this.element=e.getElement(t)},setDragAllowedWhenFull:function(t){this.dragAllowedWhenFull=t},equals:function(t){return this.anchor.equals(t.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(t){return this.anchor.compute(t)}});t.jsPlumbInstance.prototype.EndpointDropHandler=function(t){return function(e){var a=t.jsPlumb;t.removeClass(a.endpointDropAllowedClass);t.removeClass(a.endpointDropForbiddenClass);var i=a.getDropEvent(arguments),o=a.getDragObject(arguments),r=a.getAttribute(o,"dragId"),s=a.getAttribute(o,"elId"),l=a.getAttribute(o,"originalScope"),u=a.floatingConnections[r];if(u==null){return}var c=u.suspendedEndpoint!=null;if(c&&u.suspendedEndpoint._jsPlumb==null){return}var f=t.getEndpoint(u);if(f==null){return}if(t.isRedrop(u,t)){u._forceReattach=true;u.setHover(false);if(t.maybeCleanup){t.maybeCleanup(f)}return}var h=a.getFloatingAnchorIndex(u);if(h==-1){if(t.maybeCleanup){t.maybeCleanup(f)}return}if(h===0&&!t.isSource||h===1&&!t.isTarget){if(t.maybeCleanup){t.maybeCleanup(f)}return}if(t.onDrop){t.onDrop(u)}if(l){a.setDragScope(o,l)}var d=t.isFull(e);if(d){f.fire("maxConnections",{endpoint:this,connection:u,maxConnections:f._jsPlumb.maxConnections},i)}if(!d&&t.enabled()){var p=true;if(h===0){u.floatingElement=u.source;u.floatingId=u.sourceId;u.floatingEndpoint=u.endpoints[0];u.floatingIndex=0;u.source=t.element;u.sourceId=t.elementId}else{u.floatingElement=u.target;u.floatingId=u.targetId;u.floatingEndpoint=u.endpoints[1];u.floatingIndex=1;u.target=t.element;u.targetId=t.elementId}if(c&&u.suspendedEndpoint.id!==f.id){if(!u.isDetachAllowed(u)||!u.endpoints[h].isDetachAllowed(u)||!u.suspendedEndpoint.isDetachAllowed(u)||!a.checkCondition("beforeDetach",u)){p=false}}var _=function(e){u.endpoints[h].detachFromConnection(u);if(u.suspendedEndpoint){u.suspendedEndpoint.detachFromConnection(u)}u.endpoints[h]=f;f.addConnection(u);var o=f.getParameters();for(var r in o){u.setParameter(r,o[r])}if(!c){if(o.draggable){a.initDraggable(this.element,t.dragOptions,"internal",a)}}else{var s=u.suspendedEndpoint.elementId;a.fireMoveEvent({index:h,originalSourceId:h===0?s:u.sourceId,newSourceId:h===0?f.elementId:u.sourceId,originalTargetId:h===1?s:u.targetId,newTargetId:h===1?f.elementId:u.targetId,originalSourceEndpoint:h===0?u.suspendedEndpoint:u.endpoints[0],newSourceEndpoint:h===0?f:u.endpoints[0],originalTargetEndpoint:h===1?u.suspendedEndpoint:u.endpoints[1],newTargetEndpoint:h===1?f:u.endpoints[1],connection:u},i)}if(h===1){a.anchorManager.updateOtherEndpoint(u.sourceId,u.floatingId,u.targetId,u)}else{a.anchorManager.sourceChanged(u.floatingId,u.sourceId,u,u.source)}if(u.endpoints[0].finalEndpoint){var l=u.endpoints[0];l.detachFromConnection(u);u.endpoints[0]=u.endpoints[0].finalEndpoint;u.endpoints[0].addConnection(u)}if(n.isObject(e)){u.mergeData(e)}a.finaliseConnection(u,null,i,false);u.setHover(false)}.bind(this);var v=function(){if(u.suspendedEndpoint){u.endpoints[h]=u.suspendedEndpoint;u.setHover(false);u._forceDetach=true;if(h===0){u.source=u.suspendedEndpoint.element;u.sourceId=u.suspendedEndpoint.elementId}else{u.target=u.suspendedEndpoint.element;u.targetId=u.suspendedEndpoint.elementId}u.suspendedEndpoint.addConnection(u);if(h===1){a.anchorManager.updateOtherEndpoint(u.sourceId,u.floatingId,u.targetId,u)}else{a.anchorManager.sourceChanged(u.floatingId,u.sourceId,u,u.source)}a.repaint(u.sourceId);u._forceDetach=false}};p=p&&t.isDropAllowed(u.sourceId,u.targetId,u.scope,u,f);if(p){_(p);return true}else{v()}}if(t.maybeCleanup){t.maybeCleanup(f)}a.currentlyDragging=false}}}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil;var a=function(t,n,a,i,o){if(!t.Defaults.DoNotThrowErrors&&e.Connectors[n][a]==null){throw{msg:"jsPlumb: unknown connector type '"+a+"'"}}return new e.Connectors[n][a](i,o)},i=function(t,e,n){return t?n.makeAnchor(t,e,n):null},o=function(t,e,a,i){if(e!=null){e._jsPlumbConnections=e._jsPlumbConnections||{};if(i){delete e._jsPlumbConnections[t.id]}else{e._jsPlumbConnections[t.id]=true}if(n.isEmpty(e._jsPlumbConnections)){a.removeClass(e,a.connectedClass)}else{a.addClass(e,a.connectedClass)}}};e.Connection=function(t){var a=t.newEndpoint;this.id=t.id;this.connector=null;this.idPrefix="_jsplumb_c_";this.defaultLabelLocation=.5;this.defaultOverlayKeys=["Overlays","ConnectionOverlays"];this.previousConnection=t.previousConnection;this.source=e.getElement(t.source);this.target=e.getElement(t.target);if(t.sourceEndpoint){this.source=t.sourceEndpoint.getElement()}if(t.targetEndpoint){this.target=t.targetEndpoint.getElement()}e.OverlayCapableJsPlumbUIComponent.apply(this,arguments);this.sourceId=this._jsPlumb.instance.getId(this.source);this.targetId=this._jsPlumb.instance.getId(this.target);this.scope=t.scope;this.endpoints=[];this.endpointStyles=[];var i=this._jsPlumb.instance;i.manage(this.sourceId,this.source);i.manage(this.targetId,this.target);this._jsPlumb.visible=true;this._jsPlumb.editable=t.editable===true;this._jsPlumb.params={cssClass:t.cssClass,container:t.container,"pointer-events":t["pointer-events"],editorParams:t.editorParams,overlays:t.overlays};this._jsPlumb.lastPaintedAt=null;this.bind("mouseover",function(){this.setHover(true)}.bind(this));this.bind("mouseout",function(){this.setHover(false)}.bind(this));this.editableRequested=t.editable!==false;this.setEditable=function(t){return this.connector?this.connector.setEditable(t):false};this.isEditable=function(){return this.connector?this.connector.isEditable():false};this.isEditing=function(){return this.connector?this.connector.isEditing():false};this.makeEndpoint=function(e,n,o,r){o=o||this._jsPlumb.instance.getId(n);return this.prepareEndpoint(i,a,this,r,e?0:1,t,n,o)};if(t.type){t.endpoints=t.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(t.type).endpoints}var o=this.makeEndpoint(true,this.source,this.sourceId,t.sourceEndpoint),r=this.makeEndpoint(false,this.target,this.targetId,t.targetEndpoint);if(o){n.addToList(t.endpointsByElement,this.sourceId,o)}if(r){n.addToList(t.endpointsByElement,this.targetId,r)}if(!this.scope){this.scope=this.endpoints[0].scope}if(t.deleteEndpointsOnEmpty!=null){this.endpoints[0].setDeleteOnEmpty(t.deleteEndpointsOnEmpty);this.endpoints[1].setDeleteOnEmpty(t.deleteEndpointsOnEmpty)}var s=i.Defaults.ConnectionsDetachable;if(t.detachable===false){s=false}if(this.endpoints[0].connectionsDetachable===false){s=false}if(this.endpoints[1].connectionsDetachable===false){s=false}var l=t.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||i.Defaults.ReattachConnections;this.appendToDefaultType({detachable:s,reattach:l,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||t.paintStyle||i.Defaults.PaintStyle||e.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||t.hoverPaintStyle||i.Defaults.HoverPaintStyle||e.Defaults.HoverPaintStyle});var u=i.getSuspendedAt();if(!i.isSuspendDrawing()){var c=i.getCachedData(this.sourceId),f=c.o,h=c.s,d=i.getCachedData(this.targetId),p=d.o,_=d.s,v=u||i.timestamp(),m=this.endpoints[0].anchor.compute({xy:[f.left,f.top],wh:h,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[p.left,p.top],twh:_,tElement:this.endpoints[1],timestamp:v});this.endpoints[0].paint({anchorLoc:m,timestamp:v});m=this.endpoints[1].anchor.compute({xy:[p.left,p.top],wh:_,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[f.left,f.top],twh:h,tElement:this.endpoints[0],timestamp:v});this.endpoints[1].paint({anchorLoc:m,timestamp:v})}this.getTypeDescriptor=function(){return"connection"};this.getAttachedElements=function(){return this.endpoints};this.isDetachable=function(){return this._jsPlumb.detachable===true};this.setDetachable=function(t){this._jsPlumb.detachable=t===true};this.isReattach=function(){return this._jsPlumb.reattach===true||this.endpoints[0].reattachConnections===true||this.endpoints[1].reattachConnections===true};this.setReattach=function(t){this._jsPlumb.reattach=t===true};this._jsPlumb.cost=t.cost||this.endpoints[0].getConnectionCost();this._jsPlumb.directed=t.directed;if(t.directed==null){this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected()}var g=e.extend({},this.endpoints[1].getParameters());e.extend(g,this.endpoints[0].getParameters());e.extend(g,this.getParameters());this.setParameters(g);this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||t.connector||i.Defaults.Connector||e.Defaults.Connector,true);if(t.geometry){this.connector.setGeometry(t.geometry)}var y=t.data==null||!n.isObject(t.data)?{}:t.data;this.getData=function(){return y};this.setData=function(t){y=t||{}};this.mergeData=function(t){y=e.extend(y,t)};var b=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,t.type].join(" ");if(/[^\s]/.test(b)){this.addType(b,t.data,true)}this.updateConnectedClass()};n.extend(e.Connection,e.OverlayCapableJsPlumbUIComponent,{applyType:function(t,n,a){if(t.detachable!=null){this.setDetachable(t.detachable)}if(t.reattach!=null){this.setReattach(t.reattach)}if(t.scope){this.scope=t.scope}if(t.cssClass!=null&&this.canvas){this._jsPlumb.instance.addClass(this.canvas,t.cssClass)}var i=null;if(t.anchor){i=this.getCachedTypeItem("anchors",a.anchor);if(i==null){i=[this._jsPlumb.instance.makeAnchor(t.anchor),this._jsPlumb.instance.makeAnchor(t.anchor)];this.cacheTypeItem("anchors",i,a.anchor)}}else if(t.anchors){i=this.getCachedTypeItem("anchors",a.anchors);if(i==null){i=[this._jsPlumb.instance.makeAnchor(t.anchors[0]),this._jsPlumb.instance.makeAnchor(t.anchors[1])];this.cacheTypeItem("anchors",i,a.anchors)}}if(i!=null){this.endpoints[0].anchor=i[0];this.endpoints[1].anchor=i[1];if(this.endpoints[1].anchor.isDynamic){this._jsPlumb.instance.repaint(this.endpoints[1].elementId)}}e.OverlayCapableJsPlumbUIComponent.applyType(this,t)},addClass:function(t,e){if(e){this.endpoints[0].addClass(t);this.endpoints[1].addClass(t);if(this.suspendedEndpoint){this.suspendedEndpoint.addClass(t)}}if(this.connector){this.connector.addClass(t)}},removeClass:function(t,e){if(e){this.endpoints[0].removeClass(t);this.endpoints[1].removeClass(t);if(this.suspendedEndpoint){this.suspendedEndpoint.removeClass(t)}}if(this.connector){this.connector.removeClass(t)}},isVisible:function(){return this._jsPlumb.visible},setVisible:function(t){this._jsPlumb.visible=t;if(this.connector){this.connector.setVisible(t)}this.repaint()},cleanup:function(){this.updateConnectedClass(true);this.endpoints=null;this.source=null;this.target=null;if(this.connector!=null){this.connector.cleanup(true);this.connector.destroy(true)}this.connector=null},updateConnectedClass:function(t){if(this._jsPlumb){o(this,this.source,this._jsPlumb.instance,t);o(this,this.target,this._jsPlumb.instance,t)}},setHover:function(e){if(this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()){this.connector.setHover(e);t.jsPlumb[e?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass);t.jsPlumb[e?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass)}},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-Infinity},setCost:function(t){this._jsPlumb.cost=t},isDirected:function(){return this._jsPlumb.directed===true},getConnector:function(){return this.connector},getGeometry:function(){return this.connector?this.connector.getGeometry():null},setGeometry:function(t){if(this.connector){this.connector.setGeometry(t)}},prepareConnector:function(t,e){var i={_jsPlumb:this._jsPlumb.instance,cssClass:(this._jsPlumb.params.cssClass||"")+(this.isEditable()?this._jsPlumb.instance.editableConnectorClass:""),container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"],editable:this.editableRequested},o=this._jsPlumb.instance.getRenderMode(),r;if(n.isString(t)){r=a(this._jsPlumb.instance,o,t,i,this)}else if(n.isArray(t)){if(t.length===1){r=a(this._jsPlumb.instance,o,t[0],i,this)}else{r=a(this._jsPlumb.instance,o,t[0],n.merge(t[1],i),this)}}if(e!=null){r.typeId=e}return r},setPreparedConnector:function(t,e,n,a){var i,o="";if(this.connector!=null){i=this.connector;o=i.getClass();this.connector.cleanup();this.connector.destroy()}this.connector=t;if(a){this.cacheTypeItem("connector",t,a)}this.canvas=this.connector.canvas;this.bgCanvas=this.connector.bgCanvas;this.addClass(o);if(this.canvas){this.canvas._jsPlumb=this}if(this.bgCanvas){this.bgCanvas._jsPlumb=this}if(i!=null){var r=this.getOverlays();for(var s=0;s<r.length;s++){if(r[s].transfer){r[s].transfer(this.connector)}}}if(!n){this.setListenerComponent(this.connector)}if(!e){this.repaint()}},setConnector:function(t,e,n,a){var i=this.prepareConnector(t,a);this.setPreparedConnector(i,e,n,a)},paint:function(t){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){t=t||{};var e=t.timestamp,n=false,a=n?this.sourceId:this.targetId,i=n?this.targetId:this.sourceId,o=n?0:1,r=n?1:0;if(e==null||e!==this._jsPlumb.lastPaintedAt){var s=this._jsPlumb.instance.updateOffset({elId:i}).o,l=this._jsPlumb.instance.updateOffset({elId:a}).o,u=this.endpoints[r],c=this.endpoints[o];var f=u.anchor.getCurrentLocation({xy:[s.left,s.top],wh:[s.width,s.height],element:u,timestamp:e}),h=c.anchor.getCurrentLocation({xy:[l.left,l.top],wh:[l.width,l.height],element:c,timestamp:e});this.connector.resetBounds();this.connector.compute({sourcePos:f,targetPos:h,sourceEndpoint:this.endpoints[r],targetEndpoint:this.endpoints[o],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:s,targetInfo:l});var d={minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity};for(var p in this._jsPlumb.overlays){if(this._jsPlumb.overlays.hasOwnProperty(p)){var _=this._jsPlumb.overlays[p];if(_.isVisible()){this._jsPlumb.overlayPlacements[p]=_.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(_));d.minX=Math.min(d.minX,this._jsPlumb.overlayPlacements[p].minX);d.maxX=Math.max(d.maxX,this._jsPlumb.overlayPlacements[p].maxX);d.minY=Math.min(d.minY,this._jsPlumb.overlayPlacements[p].minY);d.maxY=Math.max(d.maxY,this._jsPlumb.overlayPlacements[p].maxY)}}}var v=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,m=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),g={xmin:Math.min(this.connector.bounds.minX-(v+m),d.minX),ymin:Math.min(this.connector.bounds.minY-(v+m),d.minY),xmax:Math.max(this.connector.bounds.maxX+(v+m),d.maxX),ymax:Math.max(this.connector.bounds.maxY+(v+m),d.maxY)};this.connector.paint(this._jsPlumb.paintStyleInUse,null,g);for(var y in this._jsPlumb.overlays){if(this._jsPlumb.overlays.hasOwnProperty(y)){var b=this._jsPlumb.overlays[y];if(b.isVisible()){b.paint(this._jsPlumb.overlayPlacements[y],g)}}}}this._jsPlumb.lastPaintedAt=e}},repaint:function(t){t=t||{};this.paint({elId:this.sourceId,recalc:!(t.recalc===false),timestamp:t.timestamp})},prepareEndpoint:function(t,n,a,o,r,s,l,u){var c;if(o){a.endpoints[r]=o;o.addConnection(a)}else{if(!s.endpoints){s.endpoints=[null,null]}var f=s.endpoints[r]||s.endpoint||t.Defaults.Endpoints[r]||e.Defaults.Endpoints[r]||t.Defaults.Endpoint||e.Defaults.Endpoint;if(!s.endpointStyles){s.endpointStyles=[null,null]}if(!s.endpointHoverStyles){s.endpointHoverStyles=[null,null]}var h=s.endpointStyles[r]||s.endpointStyle||t.Defaults.EndpointStyles[r]||e.Defaults.EndpointStyles[r]||t.Defaults.EndpointStyle||e.Defaults.EndpointStyle;if(h.fill==null&&s.paintStyle!=null){h.fill=s.paintStyle.stroke}if(h.outlineStroke==null&&s.paintStyle!=null){h.outlineStroke=s.paintStyle.outlineStroke}if(h.outlineWidth==null&&s.paintStyle!=null){h.outlineWidth=s.paintStyle.outlineWidth}var d=s.endpointHoverStyles[r]||s.endpointHoverStyle||t.Defaults.EndpointHoverStyles[r]||e.Defaults.EndpointHoverStyles[r]||t.Defaults.EndpointHoverStyle||e.Defaults.EndpointHoverStyle;if(s.hoverPaintStyle!=null){if(d==null){d={}}if(d.fill==null){d.fill=s.hoverPaintStyle.stroke}}var p=s.anchors?s.anchors[r]:s.anchor?s.anchor:i(t.Defaults.Anchors[r],u,t)||i(e.Defaults.Anchors[r],u,t)||i(t.Defaults.Anchor,u,t)||i(e.Defaults.Anchor,u,t),_=s.uuids?s.uuids[r]:null;c=n({paintStyle:h,hoverPaintStyle:d,endpoint:f,connections:[a],uuid:_,anchor:p,source:l,scope:s.scope,reattach:s.reattach||t.Defaults.ReattachConnections,detachable:s.detachable||t.Defaults.ConnectionsDetachable});if(o==null){c.setDeleteOnEmpty(true)}a.endpoints[r]=c;if(s.drawEndpoints===false){c.setVisible(false,true,true)}}return c}})}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this,e=t.jsPlumbUtil,n=t.jsPlumb;n.AnchorManager=function(t){var a={},i={},o={},r={},s={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},l=["left","top","right","bottom"],u={},c=this,f={},h=t.jsPlumbInstance,d={},p=function(t,e,n,a,i,o){if(t===e){return{orientation:s.IDENTITY,a:["top","top"]}}var r=Math.atan2(a.centery-n.centery,a.centerx-n.centerx),u=Math.atan2(n.centery-a.centery,n.centerx-a.centerx);var c=[],f={};(function(t,e){for(var n=0;n<t.length;n++){f[t[n]]={left:[e[n].left,e[n].centery],right:[e[n].right,e[n].centery],top:[e[n].centerx,e[n].top],bottom:[e[n].centerx,e[n].bottom]}}})(["source","target"],[n,a]);for(var h=0;h<l.length;h++){for(var d=0;d<l.length;d++){c.push({source:l[h],target:l[d],dist:Biltong.lineLength(f.source[l[h]],f.target[l[d]])})}}c.sort(function(t,e){return t.dist<e.dist?-1:t.dist>e.dist?1:0});var p=c[0].source,_=c[0].target;for(var v=0;v<c.length;v++){if(!i.isContinuous||i.isEdgeSupported(c[v].source)){p=c[v].source}else{p=null}if(!o.isContinuous||o.isEdgeSupported(c[v].target)){_=c[v].target}else{_=null}if(p!=null&&_!=null){break}}return{a:[p,_],theta:r,theta2:u}},_=function(t,e,n,a,i,o,r){var s=[],l=e[i?0:1]/(a.length+1);for(var u=0;u<a.length;u++){var c=(u+1)*l,f=o*e[i?1:0];if(r){c=e[i?0:1]-c}var h=i?c:f,d=n[0]+h,p=h/e[0],_=i?f:c,v=n[1]+_,m=_/e[1];s.push([d,v,p,m,a[u][1],a[u][2]])}return s},v=function(t){return function(e,n){var a=true;if(t){a=e[0][0]<n[0][0]}else{a=e[0][0]>n[0][0]}return a===false?-1:1}},m=function(t,e){var n=t[0][0]<0?-Math.PI-t[0][0]:Math.PI-t[0][0],a=e[0][0]<0?-Math.PI-e[0][0]:Math.PI-e[0][0];if(n>a){return 1}else{return-1}},g={top:function(t,e){return t[0]>e[0]?1:-1},right:v(true),bottom:v(true),left:m},y=function(t,e){return t.sort(e)},b=function(t,e){var n=h.getCachedData(t),a=n.s,o=n.o,s=function(e,n,a,o,s,l,u){if(o.length>0){var c=y(o,g[e]),f=e==="right"||e==="top",h=_(e,n,a,c,s,l,f);var d=function(t,e){i[t.id]=[e[0],e[1],e[2],e[3]];r[t.id]=u};for(var p=0;p<h.length;p++){var v=h[p][4],m=v.endpoints[0].elementId===t,b=v.endpoints[1].elementId===t;if(m){d(v.endpoints[0],h[p])}if(b){d(v.endpoints[1],h[p])}}}};s("bottom",a,[o.left,o.top],e.bottom,true,1,[0,1]);s("top",a,[o.left,o.top],e.top,true,0,[0,-1]);s("left",a,[o.left,o.top],e.left,false,0,[-1,0]);s("right",a,[o.left,o.top],e.right,false,1,[1,0])};this.reset=function(){a={};u={};f={}};this.addFloatingConnection=function(t,e){d[t]=e};this.removeFloatingConnection=function(t){delete d[t]};this.newConnection=function(t){var a=t.sourceId,i=t.targetId,o=t.endpoints,r=true,s=function(s,l,c,f,h){if(a===i&&c.isContinuous){t._jsPlumb.instance.removeElement(o[1].canvas);r=false}e.addToList(u,f,[h,l,c.constructor===n.DynamicAnchor])};s(0,o[0],o[0].anchor,i,t);if(r){s(1,o[1],o[1].anchor,a,t)}};var x=function(t){(function(t,n){if(t){var a=function(t){return t[4]===n};e.removeWithFunction(t.top,a);e.removeWithFunction(t.left,a);e.removeWithFunction(t.bottom,a);e.removeWithFunction(t.right,a)}})(f[t.elementId],t.id)};this.connectionDetached=function(t,n){var a=t.connection||t,i=t.sourceId,o=t.targetId,r=a.endpoints,s=function(t,n,a,i,o){e.removeWithFunction(u[i],function(t){return t[0].id===o.id})};s(1,r[1],r[1].anchor,i,a);s(0,r[0],r[0].anchor,o,a);if(a.floatingId){s(a.floatingIndex,a.floatingEndpoint,a.floatingEndpoint.anchor,a.floatingId,a);x(a.floatingEndpoint)}x(a.endpoints[0]);x(a.endpoints[1]);if(!n){c.redraw(a.sourceId);if(a.targetId!==a.sourceId){c.redraw(a.targetId)}}};this.add=function(t,n){e.addToList(a,n,t)};this.changeId=function(t,e){u[e]=u[t];a[e]=a[t];delete u[t];delete a[t]};this.getConnectionsFor=function(t){return u[t]||[]};this.getEndpointsFor=function(t){return a[t]||[]};this.deleteEndpoint=function(t){e.removeWithFunction(a[t.elementId],function(e){return e.id===t.id});x(t)};this.clearFor=function(t){delete a[t];a[t]=[]};var P=function(n,a,i,o,r,s,l,u,c,f,h,d){var p=-1,_=-1,v=o.endpoints[l],m=v.id,g=[1,0][l],y=[[a,i],o,r,s,m],b=n[c],x=v._continuousAnchorEdge?n[v._continuousAnchorEdge]:null,P,w;if(x){var C=e.findWithFunction(x,function(t){return t[4]===m});if(C!==-1){x.splice(C,1);for(P=0;P<x.length;P++){w=x[P][1];e.addWithFunction(h,w,function(t){return t.id===w.id});e.addWithFunction(d,x[P][1].endpoints[l],function(t){return t.id===w.endpoints[l].id});e.addWithFunction(d,x[P][1].endpoints[g],function(t){return t.id===w.endpoints[g].id})}}}for(P=0;P<b.length;P++){w=b[P][1];if(t.idx===1&&b[P][3]===s&&_===-1){_=P}e.addWithFunction(h,w,function(t){return t.id===w.id});e.addWithFunction(d,b[P][1].endpoints[l],function(t){return t.id===w.endpoints[l].id});e.addWithFunction(d,b[P][1].endpoints[g],function(t){return t.id===w.endpoints[g].id})}if(p!==-1){b[p]=y}else{var j=u?_!==-1?_:0:b.length;b.splice(j,0,y)}v._continuousAnchorEdge=c};this.updateOtherEndpoint=function(t,a,i,o){var r=e.findWithFunction(u[t],function(t){return t[0].id===o.id}),s=e.findWithFunction(u[a],function(t){return t[0].id===o.id});if(r!==-1){u[t][r][0]=o;u[t][r][1]=o.endpoints[1];u[t][r][2]=o.endpoints[1].anchor.constructor===n.DynamicAnchor}if(s>-1){u[a].splice(s,1);e.addToList(u,i,[o,o.endpoints[0],o.endpoints[0].anchor.constructor===n.DynamicAnchor])}o.updateConnectedClass()};this.sourceChanged=function(t,a,i,o){if(t!==a){i.sourceId=a;i.source=o;e.removeWithFunction(u[t],function(t){return t[0].id===i.id});var r=e.findWithFunction(u[i.targetId],function(t){return t[0].id===i.id});if(r>-1){u[i.targetId][r][0]=i;u[i.targetId][r][1]=i.endpoints[0];u[i.targetId][r][2]=i.endpoints[0].anchor.constructor===n.DynamicAnchor}e.addToList(u,a,[i,i.endpoints[1],i.endpoints[1].anchor.constructor===n.DynamicAnchor]);if(i.endpoints[1].anchor.isContinuous){if(i.source===i.target){i._jsPlumb.instance.removeElement(i.endpoints[1].canvas)}else{if(i.endpoints[1].canvas.parentNode==null){i._jsPlumb.instance.appendElement(i.endpoints[1].canvas)}}}i.updateConnectedClass()}};this.rehomeEndpoint=function(t,e,n){var i=a[e]||[],o=h.getId(n);if(o!==e){var r=i.indexOf(t);if(r>-1){var s=i.splice(r,1)[0];c.add(s,o)}}for(var l=0;l<t.connections.length;l++){if(t.connections[l].sourceId===e){c.sourceChanged(e,t.elementId,t.connections[l],t.element)}else if(t.connections[l].targetId===e){t.connections[l].targetId=t.elementId;t.connections[l].target=t.element;c.updateOtherEndpoint(t.connections[l].sourceId,e,t.elementId,t.connections[l])}}};this.redraw=function(t,i,o,r,s,l){if(!h.isSuspendDrawing()){var c=a[t]||[],_=u[t]||[],v=[],m=[],g=[];o=o||h.timestamp();r=r||{left:0,top:0};if(i){i={left:i.left+r.left,top:i.top+r.top}}var y=h.updateOffset({elId:t,offset:i,recalc:false,timestamp:o}),x={};for(var w=0;w<_.length;w++){var C=_[w][0],j=C.sourceId,E=C.targetId,I=C.endpoints[0].anchor.isContinuous,S=C.endpoints[1].anchor.isContinuous;if(I||S){var T=j+"_"+E,Q=x[T],D=C.sourceId===t?1:0;if(I&&!f[j]){f[j]={top:[],right:[],bottom:[],left:[]}}if(S&&!f[E]){f[E]={top:[],right:[],bottom:[],left:[]}}if(t!==E){h.updateOffset({elId:E,timestamp:o})}if(t!==j){h.updateOffset({elId:j,timestamp:o})}var M=h.getCachedData(E),A=h.getCachedData(j);if(E===j&&(I||S)){P(f[j],-Math.PI/2,0,C,false,E,0,false,"top",j,v,m);P(f[E],-Math.PI/2,0,C,false,j,1,false,"top",E,v,m)}else{if(!Q){Q=p(j,E,A.o,M.o,C.endpoints[0].anchor,C.endpoints[1].anchor);x[T]=Q}if(I){P(f[j],Q.theta,0,C,false,E,0,false,Q.a[0],j,v,m)}if(S){P(f[E],Q.theta2,-1,C,true,j,1,true,Q.a[1],E,v,m)}}if(I){e.addWithFunction(g,j,function(t){return t===j})}if(S){e.addWithFunction(g,E,function(t){return t===E})}e.addWithFunction(v,C,function(t){return t.id===C.id});if(I&&D===0||S&&D===1){e.addWithFunction(m,C.endpoints[D],function(t){return t.id===C.endpoints[D].id})}}}for(w=0;w<c.length;w++){if(c[w].connections.length===0&&c[w].anchor.isContinuous){if(!f[t]){f[t]={top:[],right:[],bottom:[],left:[]}}P(f[t],-Math.PI/2,0,{endpoints:[c[w],c[w]],paint:function(){}},false,t,0,false,c[w].anchor.getDefaultFace(),t,v,m);e.addWithFunction(g,t,function(e){return e===t})}}for(w=0;w<g.length;w++){b(g[w],f[g[w]])}for(w=0;w<c.length;w++){c[w].paint({timestamp:o,offset:y,dimensions:y.s,recalc:l!==true})}for(w=0;w<m.length;w++){var k=h.getCachedData(m[w].elementId);m[w].paint({timestamp:o,offset:k,dimensions:k.s})}for(w=0;w<_.length;w++){var O=_[w][1];if(O.anchor.constructor===n.DynamicAnchor){O.paint({elementWithPrecedence:t,timestamp:o});e.addWithFunction(v,_[w][0],function(t){return t.id===_[w][0].id});for(var L=0;L<O.connections.length;L++){if(O.connections[L]!==_[w][0]){e.addWithFunction(v,O.connections[L],function(t){return t.id===O.connections[L].id})}}}else if(O.anchor.constructor===n.Anchor){e.addWithFunction(v,_[w][0],function(t){return t.id===_[w][0].id})}}var F=d[t];if(F){F.paint({timestamp:o,recalc:false,elId:t})}for(w=0;w<v.length;w++){v[w].paint({elId:t,timestamp:o,recalc:false,clearEdits:s})}}};var w=function(t){e.EventGenerator.apply(this);this.type="Continuous";this.isDynamic=true;this.isContinuous=true;var n=t.faces||["top","right","bottom","left"],a=!(t.clockwise===false),s={},l={top:"bottom",right:"left",left:"right",bottom:"top"},u={top:"right",right:"bottom",left:"top",bottom:"left"},c={top:"left",right:"top",left:"bottom",bottom:"right"},f=a?u:c,h=a?c:u,d=t.cssClass||"";for(var p=0;p<n.length;p++){s[n[p]]=true}this.getDefaultFace=function(){return n.length===0?"top":n[0]};this.verifyEdge=function(t){if(s[t]){return t}else if(s[l[t]]){return l[t]}else if(s[f[t]]){return f[t]}else if(s[h[t]]){return h[t]}return t};this.isEdgeSupported=function(t){return s[t]===true};this.compute=function(t){return o[t.element.id]||i[t.element.id]||[0,0]};this.getCurrentLocation=function(t){return o[t.element.id]||i[t.element.id]||[0,0]};this.getOrientation=function(t){return r[t.id]||[0,0]};this.clearUserDefinedLocation=function(){delete o[t.elementId]};this.setUserDefinedLocation=function(e){o[t.elementId]=e};this.getCssClass=function(){return d}};h.continuousAnchorFactory={get:function(t){return new w(t)},clear:function(t){delete o[t];delete i[t]}}};n.Anchor=function(t){this.x=t.x||0;this.y=t.y||0;this.elementId=t.elementId;this.cssClass=t.cssClass||"";this.userDefinedLocation=null;this.orientation=t.orientation||[0,0];this.lastReturnValue=null;this.offsets=t.offsets||[0,0];this.timestamp=null;e.EventGenerator.apply(this);this.compute=function(t){var e=t.xy,n=t.wh,a=t.timestamp;if(t.clearUserDefinedLocation){this.userDefinedLocation=null}if(a&&a===this.timestamp){return this.lastReturnValue}if(this.userDefinedLocation!=null){this.lastReturnValue=this.userDefinedLocation}else{this.lastReturnValue=[e[0]+this.x*n[0]+this.offsets[0],e[1]+this.y*n[1]+this.offsets[1]]}this.timestamp=a;return this.lastReturnValue};this.getCurrentLocation=function(t){t=t||{};return this.lastReturnValue==null||t.timestamp!=null&&this.timestamp!==t.timestamp?this.compute(t):this.lastReturnValue}};e.extend(n.Anchor,e.EventGenerator,{equals:function(t){if(!t){return false}var e=t.getOrientation(),n=this.getOrientation();return this.x===t.x&&this.y===t.y&&this.offsets[0]===t.offsets[0]&&this.offsets[1]===t.offsets[1]&&n[0]===e[0]&&n[1]===e[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(t){this.userDefinedLocation=t},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}});n.FloatingAnchor=function(t){n.Anchor.apply(this,arguments);var e=t.reference,a=t.referenceCanvas,i=n.getSize(a),o=0,r=0,s=null,l=null;this.orientation=null;this.x=0;this.y=0;this.isFloating=true;this.compute=function(t){var e=t.xy,n=[e[0]+i[0]/2,e[1]+i[1]/2];l=n;return n};this.getOrientation=function(t){if(s){return s}else{var n=e.getOrientation(t);return[Math.abs(n[0])*o*-1,Math.abs(n[1])*r*-1]}};this.over=function(t,e){s=t.getOrientation(e)};this.out=function(){s=null};this.getCurrentLocation=function(t){return l==null?this.compute(t):l}};e.extend(n.FloatingAnchor,n.Anchor);var a=function(t,e,a){return t.constructor===n.Anchor?t:e.makeAnchor(t,a,e)};n.DynamicAnchor=function(t){n.Anchor.apply(this,arguments);this.isDynamic=true;this.anchors=[];this.elementId=t.elementId;this.jsPlumbInstance=t.jsPlumbInstance;for(var e=0;e<t.anchors.length;e++){this.anchors[e]=a(t.anchors[e],this.jsPlumbInstance,this.elementId)}this.getAnchors=function(){return this.anchors};this.locked=false;var i=this.anchors.length>0?this.anchors[0]:null,o=i,r=this,s=function(t,e,n,a,i){var o=a[0]+t.x*i[0],r=a[1]+t.y*i[1],s=a[0]+i[0]/2,l=a[1]+i[1]/2;return Math.sqrt(Math.pow(e-o,2)+Math.pow(n-r,2))+Math.sqrt(Math.pow(s-o,2)+Math.pow(l-r,2))},l=t.selector||function(t,e,n,a,i){var o=n[0]+a[0]/2,r=n[1]+a[1]/2;var l=-1,u=Infinity;for(var c=0;c<i.length;c++){var f=s(i[c],o,r,t,e);if(f<u){l=c+0;u=f}}return i[l]};this.compute=function(t){var e=t.xy,n=t.wh,a=t.txy,s=t.twh;this.timestamp=t.timestamp;var u=r.getUserDefinedLocation();if(u!=null){return u}if(this.locked||a==null||s==null){return i.compute(t)}else{t.timestamp=null}i=l(e,n,a,s,this.anchors);this.x=i.x;this.y=i.y;if(i!==o){this.fire("anchorChanged",i)}o=i;return i.compute(t)};this.getCurrentLocation=function(t){return this.getUserDefinedLocation()||(i!=null?i.getCurrentLocation(t):null)};this.getOrientation=function(t){return i!=null?i.getOrientation(t):[0,0]};this.over=function(t,e){if(i!=null){i.over(t,e)}};this.out=function(){if(i!=null){i.out()}};this.getCssClass=function(){return i&&i.getCssClass()||""}};e.extend(n.DynamicAnchor,n.Anchor);var i=function(t,e,a,i,o,r){n.Anchors[o]=function(n){var s=n.jsPlumbInstance.makeAnchor([t,e,a,i,0,0],n.elementId,n.jsPlumbInstance);s.type=o;if(r){r(s,n)}return s}};i(.5,0,0,-1,"TopCenter");i(.5,1,0,1,"BottomCenter");i(0,.5,-1,0,"LeftMiddle");i(1,.5,1,0,"RightMiddle");i(.5,0,0,-1,"Top");i(.5,1,0,1,"Bottom");i(0,.5,-1,0,"Left");i(1,.5,1,0,"Right");i(.5,.5,0,0,"Center");i(1,0,0,-1,"TopRight");i(1,1,0,1,"BottomRight");i(0,0,0,-1,"TopLeft");i(0,1,0,1,"BottomLeft");n.Defaults.DynamicAnchors=function(t){return t.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],t.elementId,t.jsPlumbInstance)
};n.Anchors.AutoDefault=function(t){var e=t.jsPlumbInstance.makeDynamicAnchor(n.Defaults.DynamicAnchors(t));e.type="AutoDefault";return e};var o=function(t,e){n.Anchors[t]=function(n){var a=n.jsPlumbInstance.makeAnchor(["Continuous",{faces:e}],n.elementId,n.jsPlumbInstance);a.type=t;return a}};n.Anchors.Continuous=function(t){return t.jsPlumbInstance.continuousAnchorFactory.get(t)};o("ContinuousLeft",["left"]);o("ContinuousTop",["top"]);o("ContinuousBottom",["bottom"]);o("ContinuousRight",["right"]);i(0,0,0,0,"Assign",function(t,e){var n=e.position||"Fixed";t.positionFinder=n.constructor===String?e.jsPlumbInstance.AnchorPositionFinders[n]:n;t.constructorParams=e});t.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(t,e,n){return[(t.left-e.left)/n[0],(t.top-e.top)/n[1]]},Grid:function(t,e,n,a){var i=t.left-e.left,o=t.top-e.top,r=n[0]/a.grid[0],s=n[1]/a.grid[1],l=Math.floor(i/r),u=Math.floor(o/s);return[(l*r+r/2)/n[0],(u*s+s/2)/n[1]]}};n.Anchors.Perimeter=function(t){t=t||{};var e=t.anchorCount||60,n=t.shape;if(!n){throw new Error("no shape supplied to Perimeter Anchor type")}var a=function(){var t=.5,n=Math.PI*2/e,a=0,i=[];for(var o=0;o<e;o++){var r=t+t*Math.sin(a),s=t+t*Math.cos(a);i.push([r,s,0,0]);a+=n}return i},i=function(t){var n=e/t.length,a=[],i=function(t,i,o,r,s){n=e*s;var l=(o-t)/n,u=(r-i)/n;for(var c=0;c<n;c++){a.push([t+l*c,i+u*c,0,0])}};for(var o=0;o<t.length;o++){i.apply(null,t[o])}return a},o=function(t){var e=[];for(var n=0;n<t.length;n++){e.push([t[n][0],t[n][1],t[n][2],t[n][3],1/t.length])}return i(e)},r=function(){return o([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])};var s={Circle:a,Ellipse:a,Diamond:function(){return o([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:r,Square:r,Triangle:function(){return o([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(t){var e=t.points,n=[],a=0;for(var o=0;o<e.length-1;o++){var r=Math.sqrt(Math.pow(e[o][2]-e[o][0])+Math.pow(e[o][3]-e[o][1]));a+=r;n.push([e[o][0],e[o][1],e[o+1][0],e[o+1][1],r])}for(var s=0;s<n.length;s++){n[s][4]=n[s][4]/a}return i(n)}},l=function(t,e){var n=[],a=e/180*Math.PI;for(var i=0;i<t.length;i++){var o=t[i][0]-.5,r=t[i][1]-.5;n.push([.5+(o*Math.cos(a)-r*Math.sin(a)),.5+(o*Math.sin(a)+r*Math.cos(a)),t[i][2],t[i][3]])}return n};if(!s[n]){throw new Error("Shape ["+n+"] is unknown by Perimeter Anchor type")}var u=s[n](t);if(t.rotation){u=l(u,t.rotation)}var c=t.jsPlumbInstance.makeDynamicAnchor(u);c.type="Perimeter";return c}}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,a=t.Biltong;e.Segments={AbstractSegment:function(t){this.params=t;this.findClosestPointOnPath=function(t,e){return{d:Infinity,x:null,y:null,l:null}};this.getBounds=function(){return{minX:Math.min(t.x1,t.x2),minY:Math.min(t.y1,t.y2),maxX:Math.max(t.x1,t.x2),maxY:Math.max(t.y1,t.y2)}}},Straight:function(t){var n=e.Segments.AbstractSegment.apply(this,arguments),i,o,r,s,l,u,c,f=function(){i=Math.sqrt(Math.pow(l-s,2)+Math.pow(c-u,2));o=a.gradient({x:s,y:u},{x:l,y:c});r=-1/o};this.type="Straight";this.getLength=function(){return i};this.getGradient=function(){return o};this.getCoordinates=function(){return{x1:s,y1:u,x2:l,y2:c}};this.setCoordinates=function(t){s=t.x1;u=t.y1;l=t.x2;c=t.y2;f()};this.setCoordinates({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2});this.getBounds=function(){return{minX:Math.min(s,l),minY:Math.min(u,c),maxX:Math.max(s,l),maxY:Math.max(u,c)}};this.pointOnPath=function(t,e){if(t===0&&!e){return{x:s,y:u}}else if(t===1&&!e){return{x:l,y:c}}else{var n=e?t>0?t:i+t:t*i;return a.pointOnLine({x:s,y:u},{x:l,y:c},n)}};this.gradientAtPoint=function(t){return o};this.pointAlongPathFrom=function(t,e,n){var i=this.pointOnPath(t,n),o=e<=0?{x:s,y:u}:{x:l,y:c};if(e<=0&&Math.abs(e)>1){e*=-1}return a.pointOnLine(i,o,e)};var h=function(t,e,n){return n>=Math.min(t,e)&&n<=Math.max(t,e)};var d=function(t,e,n){return Math.abs(n-t)<Math.abs(n-e)?t:e};this.findClosestPointOnPath=function(t,e){var n={d:Infinity,x:null,y:null,l:null,x1:s,x2:l,y1:u,y2:c};if(o===0){n.y=u;n.x=h(s,l,t)?t:d(s,l,t)}else if(o===Infinity||o===-Infinity){n.x=s;n.y=h(u,c,e)?e:d(u,c,e)}else{var f=u-o*s,p=e-r*t,_=(p-f)/(o-r),v=o*_+f;n.x=h(s,l,_)?_:d(s,l,_);n.y=h(u,c,v)?v:d(u,c,v)}var m=a.lineLength([n.x,n.y],[s,u]);n.d=a.lineLength([t,e],[n.x,n.y]);n.l=m/i;return n}},Arc:function(t){var n=e.Segments.AbstractSegment.apply(this,arguments),i=function(e,n){return a.theta([t.cx,t.cy],[e,n])},o=function(t,e){if(t.anticlockwise){var n=t.startAngle<t.endAngle?t.startAngle+r:t.startAngle,a=Math.abs(n-t.endAngle);return n-a*e}else{var i=t.endAngle<t.startAngle?t.endAngle+r:t.endAngle,o=Math.abs(i-t.startAngle);return t.startAngle+o*e}},r=2*Math.PI;this.radius=t.r;this.anticlockwise=t.ac;this.type="Arc";if(t.startAngle&&t.endAngle){this.startAngle=t.startAngle;this.endAngle=t.endAngle;this.x1=t.cx+this.radius*Math.cos(t.startAngle);this.y1=t.cy+this.radius*Math.sin(t.startAngle);this.x2=t.cx+this.radius*Math.cos(t.endAngle);this.y2=t.cy+this.radius*Math.sin(t.endAngle)}else{this.startAngle=i(t.x1,t.y1);this.endAngle=i(t.x2,t.y2);this.x1=t.x1;this.y1=t.y1;this.x2=t.x2;this.y2=t.y2}if(this.endAngle<0){this.endAngle+=r}if(this.startAngle<0){this.startAngle+=r}var s=this.endAngle<this.startAngle?this.endAngle+r:this.endAngle;this.sweep=Math.abs(s-this.startAngle);if(this.anticlockwise){this.sweep=r-this.sweep}var l=2*Math.PI*this.radius,u=this.sweep/r,c=l*u;this.getLength=function(){return c};this.getBounds=function(){return{minX:t.cx-t.r,maxX:t.cx+t.r,minY:t.cy-t.r,maxY:t.cy+t.r}};var f=1e-10,h=function(t){var e=Math.floor(t),n=Math.ceil(t);if(t-e<f){return e}else if(n-t<f){return n}return t};this.pointOnPath=function(e,n){if(e===0){return{x:this.x1,y:this.y1,theta:this.startAngle}}else if(e===1){return{x:this.x2,y:this.y2,theta:this.endAngle}}if(n){e=e/c}var a=o(this,e),i=t.cx+t.r*Math.cos(a),r=t.cy+t.r*Math.sin(a);return{x:h(i),y:h(r),theta:a}};this.gradientAtPoint=function(e,n){var i=this.pointOnPath(e,n);var o=a.normal([t.cx,t.cy],[i.x,i.y]);if(!this.anticlockwise&&(o===Infinity||o===-Infinity)){o*=-1}return o};this.pointAlongPathFrom=function(e,n,a){var i=this.pointOnPath(e,a),o=n/l*2*Math.PI,r=this.anticlockwise?-1:1,s=i.theta+r*o,u=t.cx+this.radius*Math.cos(s),c=t.cy+this.radius*Math.sin(s);return{x:u,y:c}}},Bezier:function(n){this.curve=[{x:n.x1,y:n.y1},{x:n.cp1x,y:n.cp1y},{x:n.cp2x,y:n.cp2y},{x:n.x2,y:n.y2}];var a=e.Segments.AbstractSegment.apply(this,arguments);this.bounds={minX:Math.min(n.x1,n.x2,n.cp1x,n.cp2x),minY:Math.min(n.y1,n.y2,n.cp1y,n.cp2y),maxX:Math.max(n.x1,n.x2,n.cp1x,n.cp2x),maxY:Math.max(n.y1,n.y2,n.cp1y,n.cp2y)};this.type="Bezier";var i=function(e,n,a){if(a){n=t.jsBezier.locationAlongCurveFrom(e,n>0?0:1,n)}return n};this.pointOnPath=function(e,n){e=i(this.curve,e,n);return t.jsBezier.pointOnCurve(this.curve,e)};this.gradientAtPoint=function(e,n){e=i(this.curve,e,n);return t.jsBezier.gradientAtPoint(this.curve,e)};this.pointAlongPathFrom=function(e,n,a){e=i(this.curve,e,a);return t.jsBezier.pointAlongCurveFrom(this.curve,e,n)};this.getLength=function(){return t.jsBezier.getLength(this.curve)};this.getBounds=function(){return this.bounds}}};e.SegmentRenderer={getPath:function(t){return{Straight:function(){var e=t.getCoordinates();return"M "+e.x1+" "+e.y1+" L "+e.x2+" "+e.y2},Bezier:function(){var e=t.params;return"M "+e.x1+" "+e.y1+" C "+e.cp1x+" "+e.cp1y+" "+e.cp2x+" "+e.cp2y+" "+e.x2+" "+e.y2},Arc:function(){var e=t.params,n=t.sweep>Math.PI?1:0,a=t.anticlockwise?0:1;return"M"+t.x1+" "+t.y1+" A "+t.radius+" "+e.r+" 0 "+n+","+a+" "+t.x2+" "+t.y2}}[t.type]()}};var i=function(){this.resetBounds=function(){this.bounds={minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}};this.resetBounds()};e.Connectors.AbstractConnector=function(t){i.apply(this,arguments);var o=[],r=0,s=[],l=[],u=t.stub||0,c=n.isArray(u)?u[0]:u,f=n.isArray(u)?u[1]:u,h=t.gap||0,d=n.isArray(h)?h[0]:h,p=n.isArray(h)?h[1]:h,_=null,v=false,m=null,g=null,y=t.editable!==false&&e.ConnectorEditors!=null&&e.ConnectorEditors[this.type]!=null;var b=this.setGeometry=function(t,e){v=!e;g=t};var x=this.getGeometry=function(){return g};this.getPathData=function(){var t="";for(var n=0;n<o.length;n++){t+=e.SegmentRenderer.getPath(o[n]);t+=" "}return t};this.hasBeenEdited=function(){return v};this.isEditing=function(){return this.editor!=null&&this.editor.isActive()};this.setEditable=function(t){if(t&&e.ConnectorEditors!=null&&e.ConnectorEditors[this.type]!=null&&(this.overrideSetEditable==null||this.overrideSetEditable())){y=t}else{y=false}return y};this.isEditable=function(){return y};this.findSegmentForPoint=function(t,e){var n={d:Infinity,s:null,x:null,y:null,l:null};for(var a=0;a<o.length;a++){var i=o[a].findClosestPointOnPath(t,e);if(i.d<n.d){n.d=i.d;n.l=i.l;n.x=i.x;n.y=i.y;n.s=o[a];n.x1=i.x1;n.x2=i.x2;n.y1=i.y1;n.y2=i.y2;n.index=a}}return n};var P=function(){var t=0;for(var e=0;e<o.length;e++){var n=o[e].getLength();l[e]=n/r;s[e]=[t,t+=n/r]}},w=function(t,e){if(e){t=t>0?t/r:(r+t)/r}var n=s.length-1,a=1;for(var i=0;i<s.length;i++){if(s[i][1]>=t){n=i;a=t===1?1:t===0?0:(t-s[i][0])/l[i];break}}return{segment:o[n],proportion:a,index:n}},C=function(t,n,a){if(a.x1===a.x2&&a.y1===a.y2){return}var i=new e.Segments[n](a);o.push(i);r+=i.getLength();t.updateBounds(i)},j=function(){r=o.length=s.length=l.length=0};this.setSegments=function(t){_=[];r=0;for(var e=0;e<t.length;e++){_.push(t[e]);r+=t[e].getLength()}};this.getLength=function(){return r};var E=function(t){this.strokeWidth=t.strokeWidth;var e=a.quadrant(t.sourcePos,t.targetPos),n=t.targetPos[0]<t.sourcePos[0],i=t.targetPos[1]<t.sourcePos[1],o=t.strokeWidth||1,r=t.sourceEndpoint.anchor.getOrientation(t.sourceEndpoint),s=t.targetEndpoint.anchor.getOrientation(t.targetEndpoint),l=n?t.targetPos[0]:t.sourcePos[0],u=i?t.targetPos[1]:t.sourcePos[1],h=Math.abs(t.targetPos[0]-t.sourcePos[0]),_=Math.abs(t.targetPos[1]-t.sourcePos[1]);if(r[0]===0&&r[1]===0||s[0]===0&&s[1]===0){var v=h>_?0:1,m=[1,0][v];r=[];s=[];r[v]=t.sourcePos[v]>t.targetPos[v]?-1:1;s[v]=t.sourcePos[v]>t.targetPos[v]?1:-1;r[m]=0;s[m]=0}var g=n?h+d*r[0]:d*r[0],y=i?_+d*r[1]:d*r[1],b=n?p*s[0]:h+p*s[0],x=i?p*s[1]:_+p*s[1],P=r[0]*s[0]+r[1]*s[1];var w={sx:g,sy:y,tx:b,ty:x,lw:o,xSpan:Math.abs(b-g),ySpan:Math.abs(x-y),mx:(g+b)/2,my:(y+x)/2,so:r,to:s,x:l,y:u,w:h,h:_,segment:e,startStubX:g+r[0]*c,startStubY:y+r[1]*c,endStubX:b+s[0]*f,endStubY:x+s[1]*f,isXGreaterThanStubTimes2:Math.abs(g-b)>c+f,isYGreaterThanStubTimes2:Math.abs(y-x)>c+f,opposite:P===-1,perpendicular:P===0,orthogonal:P===1,sourceAxis:r[0]===0?"y":"x",points:[l,u,h,_,g,y,b,x]};w.anchorOrientation=w.opposite?"opposite":w.orthogonal?"orthogonal":"perpendicular";return w};this.getSegments=function(){return o};this.updateBounds=function(t){var e=t.getBounds();this.bounds.minX=Math.min(this.bounds.minX,e.minX);this.bounds.maxX=Math.max(this.bounds.maxX,e.maxX);this.bounds.minY=Math.min(this.bounds.minY,e.minY);this.bounds.maxY=Math.max(this.bounds.maxY,e.maxY)};var I=function(){console.log("SEGMENTS:");for(var t=0;t<o.length;t++){console.log(o[t].type,o[t].getLength(),s[t])}};this.pointOnPath=function(t,e){var n=w(t,e);return n.segment&&n.segment.pointOnPath(n.proportion,false)||[0,0]};this.gradientAtPoint=function(t,e){var n=w(t,e);return n.segment&&n.segment.gradientAtPoint(n.proportion,false)||0};this.pointAlongPathFrom=function(t,e,n){var a=w(t,n);return a.segment&&a.segment.pointAlongPathFrom(a.proportion,e,false)||[0,0]};this.compute=function(t){m=E.call(this,t);j();this._compute(m,t);this.x=m.points[0];this.y=m.points[1];this.w=m.points[2];this.h=m.points[3];this.segment=m.segment;P()};return{addSegment:C,prepareCompute:E,sourceStub:c,targetStub:f,maxStub:Math.max(c,f),sourceGap:d,targetGap:p,maxGap:Math.max(d,p),setGeometry:b,getGeometry:x}};n.extend(e.Connectors.AbstractConnector,i);e.Endpoints.AbstractEndpoint=function(t){i.apply(this,arguments);var e=this.compute=function(t,e,n,a){var i=this._compute.apply(this,arguments);this.x=i[0];this.y=i[1];this.w=i[2];this.h=i[3];this.bounds.minX=this.x;this.bounds.minY=this.y;this.bounds.maxX=this.x+this.w;this.bounds.maxY=this.y+this.h;return i};return{compute:e,cssClass:t.cssClass}};n.extend(e.Endpoints.AbstractEndpoint,i);e.Endpoints.Dot=function(t){this.type="Dot";var n=e.Endpoints.AbstractEndpoint.apply(this,arguments);t=t||{};this.radius=t.radius||10;this.defaultOffset=.5*this.radius;this.defaultInnerRadius=this.radius/3;this._compute=function(t,e,n,a){this.radius=n.radius||this.radius;var i=t[0]-this.radius,o=t[1]-this.radius,r=this.radius*2,s=this.radius*2;if(n.stroke){var l=n.strokeWidth||1;i-=l;o-=l;r+=l*2;s+=l*2}return[i,o,r,s,this.radius]}};n.extend(e.Endpoints.Dot,e.Endpoints.AbstractEndpoint);e.Endpoints.Rectangle=function(t){this.type="Rectangle";var n=e.Endpoints.AbstractEndpoint.apply(this,arguments);t=t||{};this.width=t.width||20;this.height=t.height||20;this._compute=function(t,e,n,a){var i=n.width||this.width,o=n.height||this.height,r=t[0]-i/2,s=t[1]-o/2;return[r,s,i,o]}};n.extend(e.Endpoints.Rectangle,e.Endpoints.AbstractEndpoint);var o=function(t){e.jsPlumbUIComponent.apply(this,arguments);this._jsPlumb.displayElements=[]};n.extend(o,e.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(t){this._jsPlumb.displayElements.push(t)}});e.Endpoints.Image=function(a){this.type="Image";o.apply(this,arguments);e.Endpoints.AbstractEndpoint.apply(this,arguments);var i=a.onload,r=a.src||a.url,s=a.cssClass?" "+a.cssClass:"";this._jsPlumb.img=new Image;this._jsPlumb.ready=false;this._jsPlumb.initialized=false;this._jsPlumb.deleted=false;this._jsPlumb.widthToUse=a.width;this._jsPlumb.heightToUse=a.height;this._jsPlumb.endpoint=a.endpoint;this._jsPlumb.img.onload=function(){if(this._jsPlumb!=null){this._jsPlumb.ready=true;this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width;this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height;if(i){i(this)}}}.bind(this);this._jsPlumb.endpoint.setImage=function(t,e){var n=t.constructor===String?t:t.src;i=e;this._jsPlumb.img.src=n;if(this.canvas!=null){this.canvas.setAttribute("src",this._jsPlumb.img.src)}}.bind(this);this._jsPlumb.endpoint.setImage(r,i);this._compute=function(t,e,n,a){this.anchorPoint=t;if(this._jsPlumb.ready){return[t[0]-this._jsPlumb.widthToUse/2,t[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]}else{return[0,0,0,0]}};this.canvas=e.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+s);if(this._jsPlumb.widthToUse){this.canvas.setAttribute("width",this._jsPlumb.widthToUse)}if(this._jsPlumb.heightToUse){this.canvas.setAttribute("height",this._jsPlumb.heightToUse)}this._jsPlumb.instance.appendElement(this.canvas);this.actuallyPaint=function(t,e,a){if(!this._jsPlumb.deleted){if(!this._jsPlumb.initialized){this.canvas.setAttribute("src",this._jsPlumb.img.src);this.appendDisplayElement(this.canvas);this._jsPlumb.initialized=true}var i=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,o=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;n.sizeElement(this.canvas,i,o,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}};this.paint=function(e,n){if(this._jsPlumb!=null){if(this._jsPlumb.ready){this.actuallyPaint(e,n)}else{t.setTimeout(function(){this.paint(e,n)}.bind(this),200)}}}};n.extend(e.Endpoints.Image,[o,e.Endpoints.AbstractEndpoint],{cleanup:function(t){if(t){this._jsPlumb.deleted=true;if(this.canvas){this.canvas.parentNode.removeChild(this.canvas)}this.canvas=null}}});e.Endpoints.Blank=function(t){var a=e.Endpoints.AbstractEndpoint.apply(this,arguments);this.type="Blank";o.apply(this,arguments);this._compute=function(t,e,n,a){return[t[0],t[1],10,0]};var i=t.cssClass?" "+t.cssClass:"";this.canvas=e.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+i);this._jsPlumb.instance.appendElement(this.canvas);this.paint=function(t,e){n.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}};n.extend(e.Endpoints.Blank,[e.Endpoints.AbstractEndpoint,o],{cleanup:function(){if(this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas)}}});e.Endpoints.Triangle=function(t){this.type="Triangle";e.Endpoints.AbstractEndpoint.apply(this,arguments);var n=this;t=t||{};t.width=t.width||55;t.height=t.height||55;this.width=t.width;this.height=t.height;this._compute=function(t,e,a,i){var o=a.width||n.width,r=a.height||n.height,s=t[0]-o/2,l=t[1]-r/2;return[s,l,o,r]}};var r=e.Overlays.AbstractOverlay=function(t){this.visible=true;this.isAppendedAtTopLevel=true;this.component=t.component;this.loc=t.location==null?.5:t.location;this.endpointLoc=t.endpointLocation==null?[.5,.5]:t.endpointLocation;this.visible=t.visible!==false};r.prototype={cleanup:function(t){if(t){this.component=null;this.canvas=null;this.endpointLoc=null}},reattach:function(t){},setVisible:function(t){this.visible=t;this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(false)},show:function(){this.setVisible(true)},incrementLocation:function(t){this.loc+=t;this.component.repaint()},setLocation:function(t){this.loc=t;this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}};e.Overlays.Arrow=function(t){this.type="Arrow";r.apply(this,arguments);this.isAppendedAtTopLevel=false;t=t||{};var i=this;this.length=t.length||20;this.width=t.width||20;this.id=t.id;var o=(t.direction||1)<0?-1:1,s=t.paintStyle||{"stroke-width":1},l=t.foldback||.623;this.computeMaxSize=function(){return i.width*1.5};this.elementCreated=function(n,a){this.path=n;if(t.events){for(var i in t.events){e.on(n,i,t.events[i])}}};this.draw=function(t,e){var i,r,u,c,f;if(t.pointAlongPathFrom){if(n.isString(this.loc)||this.loc>1||this.loc<0){var h=parseInt(this.loc,10),d=this.loc<0?1:0;i=t.pointAlongPathFrom(d,h,false);r=t.pointAlongPathFrom(d,h-o*this.length/2,false);u=a.pointOnLine(i,r,this.length)}else if(this.loc===1){i=t.pointOnPath(this.loc);r=t.pointAlongPathFrom(this.loc,-this.length);u=a.pointOnLine(i,r,this.length);if(o===-1){var p=u;u=i;i=p}}else if(this.loc===0){u=t.pointOnPath(this.loc);r=t.pointAlongPathFrom(this.loc,this.length);i=a.pointOnLine(u,r,this.length);if(o===-1){var _=u;u=i;i=_}}else{i=t.pointAlongPathFrom(this.loc,o*this.length/2);r=t.pointOnPath(this.loc);u=a.pointOnLine(i,r,this.length)}c=a.perpendicularLineTo(i,u,this.width);f=a.pointOnLine(i,u,l*this.length);var v={hxy:i,tail:c,cxy:f},m=s.stroke||e.stroke,g=s.fill||e.stroke,y=s.strokeWidth||e.strokeWidth;return{component:t,d:v,"stroke-width":y,stroke:m,fill:g,minX:Math.min(i.x,c[0].x,c[1].x),maxX:Math.max(i.x,c[0].x,c[1].x),minY:Math.min(i.y,c[0].y,c[1].y),maxY:Math.max(i.y,c[0].y,c[1].y)}}else{return{component:t,minX:0,maxX:0,minY:0,maxY:0}}}};n.extend(e.Overlays.Arrow,r,{updateFrom:function(t){this.length=t.length||this.length;this.width=t.width||this.width;this.direction=t.direction!=null?t.direction:this.direction;this.foldback=t.foldback||this.foldback}});e.Overlays.PlainArrow=function(t){t=t||{};var n=e.extend(t,{foldback:1});e.Overlays.Arrow.call(this,n);this.type="PlainArrow"};n.extend(e.Overlays.PlainArrow,e.Overlays.Arrow);e.Overlays.Diamond=function(t){t=t||{};var n=t.length||40,a=e.extend(t,{length:n/2,foldback:2});e.Overlays.Arrow.call(this,a);this.type="Diamond"};n.extend(e.Overlays.Diamond,e.Overlays.Arrow);var s=function(t,e){if(t._jsPlumb.cachedDimensions==null||e){t._jsPlumb.cachedDimensions=t.getDimensions()}return t._jsPlumb.cachedDimensions};var l=function(t){e.jsPlumbUIComponent.apply(this,arguments);r.apply(this,arguments);var a=this.fire;this.fire=function(){a.apply(this,arguments);if(this.component){this.component.fire.apply(this.component,arguments)}};this.detached=false;this.id=t.id;this._jsPlumb.div=null;this._jsPlumb.initialised=false;this._jsPlumb.component=t.component;this._jsPlumb.cachedDimensions=null;this._jsPlumb.create=t.create;this._jsPlumb.initiallyInvisible=t.visible===false;this.getElement=function(){if(this._jsPlumb.div==null){var n=this._jsPlumb.div=e.getElement(this._jsPlumb.create(this._jsPlumb.component));n.style.position="absolute";n.className=this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:t.cssClass?t.cssClass:"");this._jsPlumb.instance.appendElement(n);this._jsPlumb.instance.getId(n);this.canvas=n;var a="translate(-50%, -50%)";n.style.webkitTransform=a;n.style.mozTransform=a;n.style.msTransform=a;n.style.oTransform=a;n.style.transform=a;n._jsPlumb=this;if(t.visible===false){n.style.display="none"}}return this._jsPlumb.div};this.draw=function(t,e,a){var i=s(this);if(i!=null&&i.length===2){var o={x:0,y:0};if(a){o={x:a[0],y:a[1]}}else if(t.pointOnPath){var r=this.loc,l=false;if(n.isString(this.loc)||this.loc<0||this.loc>1){r=parseInt(this.loc,10);l=true}o=t.pointOnPath(r,l)}else{var u=this.loc.constructor===Array?this.loc:this.endpointLoc;o={x:u[0]*t.w,y:u[1]*t.h}}var c=o.x-i[0]/2,f=o.y-i[1]/2;return{component:t,d:{minx:c,miny:f,td:i,cxy:o},minX:c,maxX:c+i[0],minY:f,maxY:f+i[1]}}else{return{minX:0,maxX:0,minY:0,maxY:0}}}};n.extend(l,[e.jsPlumbUIComponent,r],{getDimensions:function(){return[1,1]},setVisible:function(t){if(this._jsPlumb.div){this._jsPlumb.div.style.display=t?"block":"none";if(t&&this._jsPlumb.initiallyInvisible){s(this,true);this.component.repaint();this._jsPlumb.initiallyInvisible=false}}},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(t){if(t){if(this._jsPlumb.div!=null){this._jsPlumb.div._jsPlumb=null;this._jsPlumb.instance.removeElement(this._jsPlumb.div)}}else{if(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode){this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)}this.detached=true}},reattach:function(t){if(this._jsPlumb.div!=null){t.getContainer().appendChild(this._jsPlumb.div)}this.detached=false},computeMaxSize:function(){var t=s(this);return Math.max(t[0],t[1])},paint:function(t,e){if(!this._jsPlumb.initialised){this.getElement();t.component.appendDisplayElement(this._jsPlumb.div);this._jsPlumb.initialised=true;if(this.detached){this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)}}this._jsPlumb.div.style.left=t.component.x+t.d.minx+"px";this._jsPlumb.div.style.top=t.component.y+t.d.miny+"px"}});e.Overlays.Custom=function(t){this.type="Custom";l.apply(this,arguments)};n.extend(e.Overlays.Custom,l);e.Overlays.GuideLines=function(){var t=this;t.length=50;t.strokeWidth=5;this.type="GuideLines";r.apply(this,arguments);e.jsPlumbUIComponent.apply(this,arguments);this.draw=function(e,n){var i=e.pointAlongPathFrom(t.loc,t.length/2),o=e.pointOnPath(t.loc),r=a.pointOnLine(i,o,t.length),s=a.perpendicularLineTo(i,r,40),l=a.perpendicularLineTo(r,i,20);return{connector:e,head:i,tail:r,headLine:l,tailLine:s,minX:Math.min(i.x,r.x,l[0].x,l[1].x),minY:Math.min(i.y,r.y,l[0].y,l[1].y),maxX:Math.max(i.x,r.x,l[0].x,l[1].x),maxY:Math.max(i.y,r.y,l[0].y,l[1].y)}}};e.Overlays.Label=function(t){this.labelStyle=t.labelStyle;var n=null,a=null,i=null,o=null;this.cssClass=this.labelStyle!=null?this.labelStyle.cssClass:null;var r=e.extend({create:function(){return e.createElement("div")}},t);e.Overlays.Custom.call(this,r);this.type="Label";this.label=t.label||"";this.labelText=null;if(this.labelStyle){var s=this.getElement();this.labelStyle.font=this.labelStyle.font||"12px sans-serif";s.style.font=this.labelStyle.font;s.style.color=this.labelStyle.color||"black";if(this.labelStyle.fill){s.style.background=this.labelStyle.fill}if(this.labelStyle.borderWidth>0){var l=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";s.style.border=this.labelStyle.borderWidth+"px solid "+l}if(this.labelStyle.padding){s.style.padding=this.labelStyle.padding}}};n.extend(e.Overlays.Label,e.Overlays.Custom,{cleanup:function(t){if(t){this.div=null;this.label=null;this.labelText=null;this.cssClass=null;this.labelStyle=null}},getLabel:function(){return this.label},setLabel:function(t){this.label=t;this.labelText=null;this.clearCachedDimensions();this.update();this.component.repaint()},getDimensions:function(){this.update();return l.prototype.getDimensions.apply(this,arguments)},update:function(){if(typeof this.label==="function"){var t=this.label(this);this.getElement().innerHTML=t.replace(/\r\n/g,"<br/>")}else{if(this.labelText==null){this.labelText=this.label;this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>")}}},updateFrom:function(t){if(t.label!=null){this.setLabel(t.label)}}})}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this,e=t.jsPlumb;var n=function(e){var n=e._mottle;if(!n){n=e._mottle=new t.Mottle}return n};e.extend(t.jsPlumbInstance.prototype,{getEventManager:function(){return n(this)},on:function(t,e,n){this.getEventManager().on.apply(this,arguments);return this},off:function(t,e,n){this.getEventManager().off.apply(this,arguments);return this}})}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this,e=t.jsPlumbUtil,n=t.jsPlumbInstance;var a="jtk-group-collapsed";var i="jtk-group-expanded";var o="[jtk-group-content]";var r="elementDraggable";var s="stop";var l="revert";var u="_groupManager";var c="_jsPlumbGroup";var f="_jsPlumbGroupDrag";var h="group:addMember";var d="group:removeMember";var p="group:add";var _="group:remove";var v="group:expand";var m="group:collapse";var g="groupDragStop";var y="connectionMoved";var b="internal.connectionDetached";var x="removeAll";var P="orphanAll";var w="show";var C="hide";var j=function(t){var n={},o={},r={},s=this;t.bind("connection",function(t){if(t.source[c]!=null&&t.target[c]!=null&&t.source[c]===t.target[c]){o[t.connection.id]=t.source[c];r[t.connection.id]=t.source[c]}else{if(t.source[c]!=null){e.suggest(t.source[c].connections.source,t.connection);o[t.connection.id]=t.source[c]}if(t.target[c]!=null){e.suggest(t.target[c].connections.target,t.connection);r[t.connection.id]=t.target[c]}}});function l(t){delete t.proxies;var n=o[t.id],a;if(n!=null){a=function(e){return e.id===t.id};e.removeWithFunction(n.connections.source,a);e.removeWithFunction(n.connections.target,a);delete o[t.id]}n=r[t.id];if(n!=null){a=function(e){return e.id===t.id};e.removeWithFunction(n.connections.source,a);e.removeWithFunction(n.connections.target,a);delete r[t.id]}}t.bind(b,function(t){l(t.connection)});t.bind(y,function(t){var e=t.index===0?o:r;var n=e[t.connection.id];if(n){var a=n.connections[t.index===0?"source":"target"];var i=a.indexOf(t.connection);if(i!==-1){a.splice(i,1)}}});this.addGroup=function(e){t.addClass(e.getEl(),i);n[e.id]=e;e.manager=this;g(e);t.fire(p,{group:e})};this.addToGroup=function(e,n,a){e=this.getGroup(e);if(e){var i=e.getEl();if(n._isJsPlumbGroup){return}var o=n._jsPlumbGroup;if(o!==e){var r=t.getOffset(n,true);var l=e.collapsed?t.getOffset(i,true):t.getOffset(e.getDragArea(),true);if(o!=null){o.remove(n,a);s.updateConnectionsForGroup(o)}e.add(n,a);var u=function(t,n){var a=n===0?1:0;t.each(function(t){t.setVisible(false);if(t.endpoints[a].element._jsPlumbGroup===e){t.endpoints[a].setVisible(false);s.expandConnection(t,a,e)}else{t.endpoints[n].setVisible(false);s.collapseConnection(t,n,e)}})};if(e.collapsed){u(t.select({source:n}),0);u(t.select({target:n}),1)}var c=t.getId(n);t.dragManager.setParent(n,c,i,t.getId(i),r);var f={left:r.left-l.left,top:r.top-l.top};t.setPosition(n,f);t.dragManager.revalidateParent(n,c,r);s.updateConnectionsForGroup(e);t.revalidate(c);setTimeout(function(){t.fire(h,{group:e,el:n})},0)}}};this.removeFromGroup=function(t,e,n){t=this.getGroup(t);if(t){t.remove(e,null,n)}};this.getGroup=function(t){var a=t;if(e.isString(t)){a=n[t];if(a==null){throw new TypeError("No such group ["+t+"]")}}return a};this.getGroups=function(){var t=[];for(var e in n){t.push(n[e])}return t};this.removeGroup=function(e,a,i,o){e=this.getGroup(e);this.expandGroup(e,true);e[a?x:P](i,o);t.remove(e.getEl());delete n[e.id];delete t._groups[e.id];t.fire(_,{group:e})};this.removeAllGroups=function(t,e,a){for(var i in n){this.removeGroup(n[i],t,e,a)}};function u(e,n){var a=e.getMembers();for(var i=0;i<a.length;i++){t[n?w:C](a[i],true)}}var f=this.collapseConnection=function(e,n,a){var i,o=a.getEl(),r=t.getId(o),s=e.endpoints[n].elementId;var l=e.endpoints[n===0?1:0].element;if(l[c]&&(!l[c].shouldProxy()&&l[c].collapsed)){return}e.proxies=e.proxies||[];if(e.proxies[n]){i=e.proxies[n].ep}else{i=t.addEndpoint(o,{endpoint:a.getEndpoint(e,n),anchor:a.getAnchor(e,n),parameters:{isProxyEndpoint:true}})}i.setDeleteOnEmpty(true);e.proxies[n]={ep:i,originalEp:e.endpoints[n]};if(n===0){t.anchorManager.sourceChanged(s,r,e,o)}else{t.anchorManager.updateOtherEndpoint(e.endpoints[0].elementId,s,r,e);e.target=o;e.targetId=r}e.proxies[n].originalEp.detachFromConnection(e,null,true);i.connections=[e];e.endpoints[n]=i;e.setVisible(true)};this.collapseGroup=function(e){e=this.getGroup(e);if(e==null||e.collapsed){return}var n=e.getEl();u(e,false);if(e.shouldProxy()){var o=function(t,n){for(var a=0;a<t.length;a++){var i=t[a];f(i,n,e)}};o(e.connections.source,0);o(e.connections.target,1)}e.collapsed=true;t.removeClass(n,i);t.addClass(n,a);t.revalidate(n);t.fire(m,{group:e})};var d=this.expandConnection=function(e,n,a){if(e.proxies==null||e.proxies[n]==null){return}var i=t.getId(a.getEl()),o=e.proxies[n].originalEp.element,r=e.proxies[n].originalEp.elementId;e.endpoints[n]=e.proxies[n].originalEp;if(n===0){t.anchorManager.sourceChanged(i,r,e,o)}else{t.anchorManager.updateOtherEndpoint(e.endpoints[0].elementId,i,r,e);e.target=o;e.targetId=r}e.proxies[n].ep.detachFromConnection(e,null);e.proxies[n].originalEp.addConnection(e);delete e.proxies[n]};this.expandGroup=function(e,n){e=this.getGroup(e);if(e==null||!e.collapsed){return}var o=e.getEl();u(e,true);if(e.shouldProxy()){var r=function(t,n){for(var a=0;a<t.length;a++){var i=t[a];d(i,n,e)}};r(e.connections.source,0);r(e.connections.target,1)}e.collapsed=false;t.addClass(o,i);t.removeClass(o,a);t.revalidate(o);this.repaintGroup(e);if(!n){t.fire(v,{group:e})}};this.repaintGroup=function(e){e=this.getGroup(e);var n=e.getMembers();for(var a=0;a<n.length;a++){t.revalidate(n[a])}};function g(e){var n=e.getMembers();var a=t.getConnections({source:n},true);var i=t.getConnections({target:n},true);var s={};e.connections.source.length=0;e.connections.target.length=0;var l=function(t){for(var n=0;n<t.length;n++){if(s[t[n].id]){continue}s[t[n].id]=true;if(t[n].source._jsPlumbGroup===e){if(t[n].target._jsPlumbGroup!==e){e.connections.source.push(t[n])}o[t[n].id]=e}else if(t[n].target._jsPlumbGroup===e){e.connections.target.push(t[n]);r[t[n].id]=e}}};l(a);l(i)}this.updateConnectionsForGroup=g;this.refreshAllGroups=function(){for(var e in n){g(n[e]);t.dragManager.updateOffsets(t.getId(n[e].getEl()))}}};var E=function(n,a){var i=this;var u=a.el;this.getEl=function(){return u};this.id=a.id||e.uuid();u._isJsPlumbGroup=true;var p=this.getDragArea=function(){var t=n.getSelector(u,o);return t&&t.length>0?t[0]:u};var _=a.ghost===true;var v=_||a.constrain===true;var m=a.revert!==false;var y=a.orphan===true;var b=a.prune===true;var x=a.dropOverride===true;var P=a.proxied!==false;var w=[];this.connections={source:[],target:[],internal:[]};this.getAnchor=function(t,e){return a.anchor||"Continuous"};this.getEndpoint=function(t,e){return a.endpoint||["Dot",{radius:10}]};this.collapsed=false;if(a.draggable!==false){var C={stop:function(t){n.fire(g,jsPlumb.extend(t,{group:i}))},scope:f};if(a.dragOptions){t.jsPlumb.extend(C,a.dragOptions)}n.draggable(a.el,C)}if(a.droppable!==false){n.droppable(a.el,{drop:function(t){var e=t.drag.el;if(e._isJsPlumbGroup){return}var a=e._jsPlumbGroup;if(a!==i){if(a!=null){if(a.overrideDrop(e,i)){return}}n.getGroupManager().addToGroup(i,e,false)}}})}var j=function(t,e){var n=t.nodeType==null?t:[t];for(var a=0;a<n.length;a++){e(n[a])}};this.overrideDrop=function(t,e){return x&&(m||b||y)};this.add=function(t,e){var a=p();j(t,function(t){if(t._jsPlumbGroup!=null){if(t._jsPlumbGroup===i){return
}else{t._jsPlumbGroup.remove(t,true,e,false)}}t._jsPlumbGroup=i;w.push(t);if(n.isAlreadyDraggable(t)){M(t)}if(t.parentNode!==a){a.appendChild(t)}if(!e){n.fire(h,{group:i,el:t})}});n.getGroupManager().updateConnectionsForGroup(i)};this.remove=function(t,a,o,r){j(t,function(t){delete t._jsPlumbGroup;e.removeWithFunction(w,function(e){return e===t});if(a){try{i.getDragArea().removeChild(t)}catch(r){jsPlumbUtil.log("Could not remove element from Group "+r)}}D(t);if(!o){n.fire(d,{group:i,el:t})}});if(!r){n.getGroupManager().updateConnectionsForGroup(i)}};this.removeAll=function(t,e){for(var a=0,o=w.length;a<o;a++){i.remove(w[0],t,e,true)}w.length=0;n.getGroupManager().updateConnectionsForGroup(i)};this.orphanAll=function(){for(var t=0;t<w.length;t++){S(w[t])}w.length=0};this.getMembers=function(){return w};u[c]=this;n.bind(r,function(t){if(t.el._jsPlumbGroup===this){M(t.el)}}.bind(this));function E(t){return t.offsetParent}function I(t,e){var a=E(t),i=n.getSize(a),o=n.getSize(t),r=e[0],s=r+o[0],l=e[1],u=l+o[1];return s>0&&r<i[0]&&u>0&&l<i[1]}function S(t){var e=n.getId(t);var a=n.getOffset(t);t.parentNode.removeChild(t);n.getContainer().appendChild(t);n.setPosition(t,a);delete t._jsPlumbGroup;D(t);n.dragManager.clearParent(t,e)}function T(t){if(!I(t.el,t.pos)){var e=t.el._jsPlumbGroup;if(b){n.remove(t.el)}else{S(t.el)}e.remove(t.el)}}function Q(t){var e=n.getId(t);n.revalidate(t);n.dragManager.revalidateParent(t,e)}function D(t){if(!t._katavorioDrag){return}if(b||y){t._katavorioDrag.off(s,T)}if(!b&&!y&&m){t._katavorioDrag.off(l,Q);t._katavorioDrag.setRevert(null)}}function M(t){if(!t._katavorioDrag){return}if(b||y){t._katavorioDrag.on(s,T)}if(v){t._katavorioDrag.setConstrain(true)}if(_){t._katavorioDrag.setUseGhostProxy(true)}if(!b&&!y&&m){t._katavorioDrag.on(l,Q);t._katavorioDrag.setRevert(function(t,e){return!I(t,e)})}}this.shouldProxy=function(){return P};n.getGroupManager().addGroup(this)};n.prototype.addGroup=function(t){var e=this;e._groups=e._groups||{};if(e._groups[t.id]!=null){throw new TypeError("cannot create Group ["+t.id+"]; a Group with that ID exists")}if(t.el[c]!=null){throw new TypeError("cannot create Group ["+t.id+"]; the given element is already a Group")}var n=new E(e,t);e._groups[n.id]=n;if(t.collapsed){this.collapseGroup(n)}return n};n.prototype.addToGroup=function(t,e,n){var a=function(e){var a=this.getId(e);this.manage(a,e);this.getGroupManager().addToGroup(t,e,n)}.bind(this);if(Array.isArray(e)){for(var i=0;i<e.length;i++){a(e[i])}}else{a(e)}};n.prototype.removeFromGroup=function(t,e,n){this.getGroupManager().removeFromGroup(t,e,n)};n.prototype.removeGroup=function(t,e,n,a){this.getGroupManager().removeGroup(t,e,n,a)};n.prototype.removeAllGroups=function(t,e,n){this.getGroupManager().removeAllGroups(t,e,n)};n.prototype.getGroup=function(t){return this.getGroupManager().getGroup(t)};n.prototype.getGroups=function(){return this.getGroupManager().getGroups()};n.prototype.expandGroup=function(t){this.getGroupManager().expandGroup(t)};n.prototype.collapseGroup=function(t){this.getGroupManager().collapseGroup(t)};n.prototype.repaintGroup=function(t){this.getGroupManager().repaintGroup(t)};n.prototype.toggleGroup=function(t){t=this.getGroupManager().getGroup(t);if(t!=null){this.getGroupManager()[t.collapsed?"expandGroup":"collapseGroup"](t)}};n.prototype.getGroupManager=function(){var t=this[u];if(t==null){t=this[u]=new j(this)}return t};n.prototype.removeGroupManager=function(){delete this[u]};n.prototype.getGroupFor=function(t){t=this.getElement(t);if(t){return t[c]}}}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil;var a=function(t){this.type="Flowchart";t=t||{};t.stub=t.stub==null?30:t.stub;var n,a=e.Connectors.AbstractConnector.apply(this,arguments),i=t.midpoint==null?.5:t.midpoint,o=t.alwaysRespectStubs===true,r=null,s=null,l,u=t.cornerRadius!=null?t.cornerRadius:0,c=t.loopbackRadius||25,f=false,h=function(t){return t<0?-1:t===0?0:1},d=function(t,e,n,a){if(r===e&&s===n){return}var i=r==null?a.sx:r,o=s==null?a.sy:s,l=i===e?"v":"h",u=h(e-i),c=h(n-o);r=e;s=n;t.push([i,o,e,n,l,u,c])},p=function(t){return Math.sqrt(Math.pow(t[0]-t[2],2)+Math.pow(t[1]-t[3],2))},_=function(t){var e=[];e.push.apply(e,t);return e},v=function(t,e,n){var i=null,o;for(var r=0;r<e.length-1;r++){i=i||_(e[r]);o=_(e[r+1]);if(u>0&&i[4]!==o[4]){var s=Math.min(u,p(i),p(o));i[2]-=i[5]*s;i[3]-=i[6]*s;o[0]+=o[5]*s;o[1]+=o[6]*s;var l=i[6]===o[5]&&o[5]===1||i[6]===o[5]&&o[5]===0&&i[5]!==o[6]||i[6]===o[5]&&o[5]===-1,c=o[1]>i[3]?1:-1,f=o[0]>i[2]?1:-1,h=c===f,d=h&&l||!h&&!l?o[0]:i[2],v=h&&l||!h&&!l?i[3]:o[1];a.addSegment(t,"Straight",{x1:i[0],y1:i[1],x2:i[2],y2:i[3]});a.addSegment(t,"Arc",{r:s,x1:i[2],y1:i[3],x2:o[0],y2:o[1],cx:d,cy:v,ac:l})}else{var m=i[2]===i[0]?0:i[2]>i[0]?n.lw/2:-(n.lw/2),g=i[3]===i[1]?0:i[3]>i[1]?n.lw/2:-(n.lw/2);a.addSegment(t,"Straight",{x1:i[0]-m,y1:i[1]-g,x2:i[2]+m,y2:i[3]+g})}i=o}if(o!=null){a.addSegment(t,"Straight",{x1:o[0],y1:o[1],x2:o[2],y2:o[3]})}};this._compute=function(t,e){n=[];r=null;s=null;l=null;var u=function(){return[t.startStubX,t.startStubY,t.endStubX,t.endStubY]},f={perpendicular:u,orthogonal:u,opposite:function(e){var n=t,a=e==="x"?0:1,i={x:function(){return n.so[a]===1&&(n.startStubX>n.endStubX&&n.tx>n.startStubX||n.sx>n.endStubX&&n.tx>n.sx)||n.so[a]===-1&&(n.startStubX<n.endStubX&&n.tx<n.startStubX||n.sx<n.endStubX&&n.tx<n.sx)},y:function(){return n.so[a]===1&&(n.startStubY>n.endStubY&&n.ty>n.startStubY||n.sy>n.endStubY&&n.ty>n.sy)||n.so[a]===-1&&(n.startStubY<n.endStubY&&n.ty<n.startStubY||n.sy<n.endStubY&&n.ty<n.sy)}};if(!o&&i[e]()){return{x:[(t.sx+t.tx)/2,t.startStubY,(t.sx+t.tx)/2,t.endStubY],y:[t.startStubX,(t.sy+t.ty)/2,t.endStubX,(t.sy+t.ty)/2]}[e]}else{return[t.startStubX,t.startStubY,t.endStubX,t.endStubY]}}};var h=f[t.anchorOrientation](t.sourceAxis),p=t.sourceAxis==="x"?0:1,_=t.sourceAxis==="x"?1:0,m=h[p],g=h[_],y=h[p+2],b=h[_+2];d(n,h[0],h[1],t);if(false&&e.sourcePos[0]===e.targetPos[0]&&e.sourcePos[1]===e.targetPos[1]){d(n,h[0]-c,h[1],t);d(n,h[0]-c,h[1]-2*c,t);d(n,h[0]+c,h[1]-2*c,t);d(n,h[0]+c,h[1],t);d(n,h[0],h[1],t)}else{var x=t.startStubX+(t.endStubX-t.startStubX)*i,P=t.startStubY+(t.endStubY-t.startStubY)*i;var w={x:[0,1],y:[1,0]},C={perpendicular:function(e){var n=t,a={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},i={x:[[n.startStubX,n.endStubX],null,[n.endStubX,n.startStubX]],y:[[n.startStubY,n.endStubY],null,[n.endStubY,n.startStubY]]},o={x:[[x,n.startStubY],[x,n.endStubY]],y:[[n.startStubX,P],[n.endStubX,P]]},r={x:[[n.endStubX,n.startStubY]],y:[[n.startStubX,n.endStubY]]},s={x:[[n.startStubX,n.endStubY],[n.endStubX,n.endStubY]],y:[[n.endStubX,n.startStubY],[n.endStubX,n.endStubY]]},l={x:[[n.startStubX,P],[n.endStubX,P],[n.endStubX,n.endStubY]],y:[[x,n.startStubY],[x,n.endStubY],[n.endStubX,n.endStubY]]},u={x:[n.startStubY,n.endStubY],y:[n.startStubX,n.endStubX]},c=w[e][0],f=w[e][1],h=n.so[c]+1,d=n.to[f]+1,p=n.to[f]===-1&&u[e][1]<u[e][0]||n.to[f]===1&&u[e][1]>u[e][0],_=i[e][h][0],v=i[e][h][1],m=a[e][h][d];if(n.segment===m[3]||n.segment===m[2]&&p){return o[e]}else if(n.segment===m[2]&&v<_){return r[e]}else if(n.segment===m[2]&&v>=_||n.segment===m[1]&&!p){return l[e]}else if(n.segment===m[0]||n.segment===m[1]&&p){return s[e]}},orthogonal:function(e,n,a,i,o){var r=t,s={x:r.so[0]===-1?Math.min(n,i):Math.max(n,i),y:r.so[1]===-1?Math.min(n,i):Math.max(n,i)}[e];return{x:[[s,a],[s,o],[i,o]],y:[[a,s],[o,s],[o,i]]}[e]},opposite:function(n,i,o,r){var s=t,l={x:"y",y:"x"}[n],u={x:"height",y:"width"}[n],c=s["is"+n.toUpperCase()+"GreaterThanStubTimes2"];if(e.sourceEndpoint.elementId===e.targetEndpoint.elementId){var f=o+(1-e.sourceEndpoint.anchor[l])*e.sourceInfo[u]+a.maxStub;return{x:[[i,f],[r,f]],y:[[f,i],[f,r]]}[n]}else if(!c||s.so[p]===1&&i>r||s.so[p]===-1&&i<r){return{x:[[i,P],[r,P]],y:[[x,i],[x,r]]}[n]}else if(s.so[p]===1&&i<r||s.so[p]===-1&&i>r){return{x:[[x,s.sy],[x,s.ty]],y:[[s.sx,P],[s.tx,P]]}[n]}}};var j=C[t.anchorOrientation](t.sourceAxis,m,g,y,b);if(j){for(var E=0;E<j.length;E++){d(n,j[E][0],j[E][1],t)}}d(n,h[2],h[3],t)}d(n,t.tx,t.ty,t);v(this,n,t)}};n.extend(a,e.Connectors.AbstractConnector);e.registerConnectorType(a,"Flowchart")}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil;e.Connectors.AbstractBezierConnector=function(t){t=t||{};var n=t.showLoopback!==false,a=t.curviness||10,i=t.margin||5,o=t.proximityLimit||80,r=t.orientation&&t.orientation==="clockwise",s=t.loopbackRadius||25,l=false,u;this.overrideSetEditable=function(){return!l};this._compute=function(t,e){var a=e.sourcePos,o=e.targetPos,c=Math.abs(a[0]-o[0]),f=Math.abs(a[1]-o[1]);if(!n||e.sourceEndpoint.elementId!==e.targetEndpoint.elementId){l=false;this._computeBezier(t,e,a,o,c,f)}else{l=true;var h=e.sourcePos[0],d=e.sourcePos[1]-i,p=h,_=d-s,v=p-s,m=_-s;c=2*s;f=2*s;t.points[0]=v;t.points[1]=m;t.points[2]=c;t.points[3]=f;u.addSegment(this,"Arc",{loopback:true,x1:h-v+4,y1:d-m,startAngle:0,endAngle:2*Math.PI,r:s,ac:!r,x2:h-v-4,y2:d-m,cx:p-v,cy:_-m})}};u=e.Connectors.AbstractConnector.apply(this,arguments);return u};n.extend(e.Connectors.AbstractBezierConnector,e.Connectors.AbstractConnector);var a=function(t){t=t||{};this.type="Bezier";var n=e.Connectors.AbstractBezierConnector.apply(this,arguments),a=t.curviness||150,i=10;this.getCurviness=function(){return a};this._findControlPoint=function(t,e,n,o,r,s,l){var u=s[0]!==l[0]||s[1]===l[1],c=[];if(!u){if(s[0]===0){c.push(e[0]<n[0]?t[0]+i:t[0]-i)}else{c.push(t[0]-a*s[0])}if(s[1]===0){c.push(e[1]<n[1]?t[1]+i:t[1]-i)}else{c.push(t[1]+a*l[1])}}else{if(l[0]===0){c.push(n[0]<e[0]?t[0]+i:t[0]-i)}else{c.push(t[0]+a*l[0])}if(l[1]===0){c.push(n[1]<e[1]?t[1]+i:t[1]-i)}else{c.push(t[1]+a*s[1])}}return c};this._computeBezier=function(t,e,a,i,o,r){var s=this.getGeometry(),l,u,c=a[0]<i[0]?o:0,f=a[1]<i[1]?r:0,h=a[0]<i[0]?0:o,d=a[1]<i[1]?0:r;if((this.hasBeenEdited()||this.isEditing())&&s!=null&&s.controlPoints!=null&&s.controlPoints[0]!=null&&s.controlPoints[1]!=null){l=s.controlPoints[0];u=s.controlPoints[1]}else{l=this._findControlPoint([c,f],a,i,e.sourceEndpoint,e.targetEndpoint,t.so,t.to);u=this._findControlPoint([h,d],i,a,e.targetEndpoint,e.sourceEndpoint,t.to,t.so)}n.setGeometry({controlPoints:[l,u]},true);n.addSegment(this,"Bezier",{x1:c,y1:f,x2:h,y2:d,cp1x:l[0],cp1y:l[1],cp2x:u[0],cp2y:u[1]})}};n.extend(a,e.Connectors.AbstractBezierConnector);e.registerConnectorType(a,"Bezier")}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil;var a=function(t,e,n,a){if(t<=n&&a<=e){return 1}else if(t<=n&&e<=a){return 2}else if(n<=t&&a>=e){return 3}return 4},i=function(t,e,n,a,i,o,r,s,l){if(s<=l){return[t,e]}if(n===1){if(a[3]<=0&&i[3]>=1){return[t+(a[2]<.5?-1*o:o),e]}else if(a[2]>=1&&i[2]<=0){return[t,e+(a[3]<.5?-1*r:r)]}else{return[t+-1*o,e+-1*r]}}else if(n===2){if(a[3]>=1&&i[3]<=0){return[t+(a[2]<.5?-1*o:o),e]}else if(a[2]>=1&&i[2]<=0){return[t,e+(a[3]<.5?-1*r:r)]}else{return[t+o,e+-1*r]}}else if(n===3){if(a[3]>=1&&i[3]<=0){return[t+(a[2]<.5?-1*o:o),e]}else if(a[2]<=0&&i[2]>=1){return[t,e+(a[3]<.5?-1*r:r)]}else{return[t+-1*o,e+-1*r]}}else if(n===4){if(a[3]<=0&&i[3]>=1){return[t+(a[2]<.5?-1*o:o),e]}else if(a[2]<=0&&i[2]>=1){return[t,e+(a[3]<.5?-1*r:r)]}else{return[t+o,e+-1*r]}}};var o=function(t){t=t||{};this.type="StateMachine";var n=e.Connectors.AbstractBezierConnector.apply(this,arguments),o=t.curviness||10,r=t.margin||5,s=t.proximityLimit||80,l=t.orientation&&t.orientation==="clockwise",u;this._computeBezier=function(t,e,l,c,f,h){var d=e.sourcePos[0]<e.targetPos[0]?0:f,p=e.sourcePos[1]<e.targetPos[1]?0:h,_=e.sourcePos[0]<e.targetPos[0]?f:0,v=e.sourcePos[1]<e.targetPos[1]?h:0;if(e.sourcePos[2]===0){d-=r}if(e.sourcePos[2]===1){d+=r}if(e.sourcePos[3]===0){p-=r}if(e.sourcePos[3]===1){p+=r}if(e.targetPos[2]===0){_-=r}if(e.targetPos[2]===1){_+=r}if(e.targetPos[3]===0){v-=r}if(e.targetPos[3]===1){v+=r}var m=(d+_)/2,g=(p+v)/2,y=a(d,p,_,v),b=Math.sqrt(Math.pow(_-d,2)+Math.pow(v-p,2)),x,P,w,C,j=n.getGeometry();if((this.hasBeenEdited()||this.isEditing())&&j!=null){x=j.controlPoints[0][0];w=j.controlPoints[0][1];P=j.controlPoints[1][0];C=j.controlPoints[1][1]}else{u=i(m,g,y,e.sourcePos,e.targetPos,o,o,b,s);x=u[0];P=u[0];w=u[1];C=u[1];n.setGeometry({controlPoints:[u,u]},true)}n.addSegment(this,"Bezier",{x1:_,y1:v,x2:d,y2:p,cp1x:x,cp1y:w,cp2x:P,cp2y:C})}};n.extend(o,e.Connectors.AbstractBezierConnector);e.registerConnectorType(o,"StateMachine")}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil;var a="Straight";var i=function(t){this.type=a;var n=e.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(t,e){n.addSegment(this,a,{x1:t.sx,y1:t.sy,x2:t.startStubX,y2:t.startStubY});n.addSegment(this,a,{x1:t.startStubX,y1:t.startStubY,x2:t.endStubX,y2:t.endStubY});n.addSegment(this,a,{x1:t.endStubX,y1:t.endStubY,x2:t.tx,y2:t.ty})}};n.extend(i,e.Connectors.AbstractConnector);e.registerConnectorType(i,a)}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil;var a={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},i="stroke-dasharray",o="dashstyle",r="linearGradient",s="radialGradient",l="defs",u="fill",c="stop",f="stroke",h="stroke-width",d="style",p="none",_="jsplumb_gradient_",v="strokeWidth",m={svg:"http://www.w3.org/2000/svg"},g=function(t,e){for(var n in e){t.setAttribute(n,""+e[n])}},y=function(t,n){n=n||{};n.version="1.1";n.xmlns=m.svg;return e.createElementNS(m.svg,t,null,null,n)},b=function(t){return"position:absolute;left:"+t[0]+"px;top:"+t[1]+"px"},x=function(t){var e=t.querySelectorAll(" defs,linearGradient,radialGradient");for(var n=0;n<e.length;n++){e[n].parentNode.removeChild(e[n])}},P=function(t,e,n,a,i){var o=_+i._jsPlumb.instance.idstamp();x(t);var h;if(!n.gradient.offset){h=y(r,{id:o,gradientUnits:"userSpaceOnUse"})}else{h=y(s,{id:o})}var d=y(l);t.appendChild(d);d.appendChild(h);for(var p=0;p<n.gradient.stops.length;p++){var v=i.segment===1||i.segment===2?p:n.gradient.stops.length-1-p,m=n.gradient.stops[v][1],g=y(c,{offset:Math.floor(n.gradient.stops[p][0]*100)+"%","stop-color":m});h.appendChild(g)}var b=n.stroke?f:u;e.setAttribute(b,"url(#"+o+")")},w=function(t,e,n,r,s){e.setAttribute(u,n.fill?n.fill:p);e.setAttribute(f,n.stroke?n.stroke:p);if(n.gradient){P(t,e,n,r,s)}else{x(t);e.setAttribute(d,"")}if(n.strokeWidth){e.setAttribute(h,n.strokeWidth)}if(n[o]&&n[v]&&!n[i]){var l=n[o].indexOf(",")===-1?" ":",",c=n[o].split(l),_="";c.forEach(function(t){_+=Math.floor(t*n.strokeWidth)+l});e.setAttribute(i,_)}else if(n[i]){e.setAttribute(i,n[i])}for(var m in a){if(n[m]){e.setAttribute(a[m],n[m])}}},C=function(t,e,n){if(t.childNodes.length>n){t.insertBefore(e,t.childNodes[n])}else{t.appendChild(e)}};n.svg={node:y,attr:g,pos:b};var j=function(t){var a=t.pointerEventsSpec||"all",i={};e.jsPlumbUIComponent.apply(this,t.originalArgs);this.canvas=null;this.path=null;this.svg=null;this.bgCanvas=null;var o=t.cssClass+" "+(t.originalArgs[0].cssClass||""),r={style:"",width:0,height:0,"pointer-events":a,position:"absolute"};this.svg=y("svg",r);if(t.useDivWrapper){this.canvas=e.createElement("div",{position:"absolute"});n.sizeElement(this.canvas,0,0,1,1);this.canvas.className=o}else{g(this.svg,{"class":o});this.canvas=this.svg}t._jsPlumb.appendElement(this.canvas,t.originalArgs[0].parent);if(t.useDivWrapper){this.canvas.appendChild(this.svg)}var s=[this.canvas];this.getDisplayElements=function(){return s};this.appendDisplayElement=function(t){s.push(t)};this.paint=function(e,a,o){if(e!=null){var r=[this.x,this.y],s=[this.w,this.h],l;if(o!=null){if(o.xmin<0){r[0]+=o.xmin}if(o.ymin<0){r[1]+=o.ymin}s[0]=o.xmax+(o.xmin<0?-o.xmin:0);s[1]=o.ymax+(o.ymin<0?-o.ymin:0)}if(t.useDivWrapper){n.sizeElement(this.canvas,r[0],r[1],s[0],s[1]);r[0]=0;r[1]=0;l=b([0,0])}else{l=b([r[0],r[1]])}i.paint.apply(this,arguments);g(this.svg,{style:l,width:s[0]||0,height:s[1]||0})}};return{renderer:i}};n.extend(j,e.jsPlumbUIComponent,{cleanup:function(t){if(t||this.typeId==null){if(this.canvas){this.canvas._jsPlumb=null}if(this.svg){this.svg._jsPlumb=null}if(this.bgCanvas){this.bgCanvas._jsPlumb=null}if(this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas)}if(this.bgCanvas&&this.bgCanvas.parentNode){this.canvas.parentNode.removeChild(this.canvas)}this.svg=null;this.canvas=null;this.path=null;this.group=null}else{if(this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas)}if(this.bgCanvas&&this.bgCanvas.parentNode){this.bgCanvas.parentNode.removeChild(this.bgCanvas)}}},reattach:function(t){var e=t.getContainer();if(this.canvas&&this.canvas.parentNode==null){e.appendChild(this.canvas)}if(this.bgCanvas&&this.bgCanvas.parentNode==null){e.appendChild(this.bgCanvas)}},setVisible:function(t){if(this.canvas){this.canvas.style.display=t?"block":"none"}}});e.ConnectorRenderers.svg=function(t){var n=this,a=j.apply(this,[{cssClass:t._jsPlumb.connectorClass+(this.isEditable()?" "+t._jsPlumb.editableConnectorClass:""),originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:t._jsPlumb}]);var i=this.setEditable;this.setEditable=function(t){var n=i.apply(this,[t]);e[n?"addClass":"removeClass"](this.canvas,this._jsPlumb.instance.editableConnectorClass)};a.renderer.paint=function(a,i,o){var r=n.getSegments(),s="",l=[0,0];if(o.xmin<0){l[0]=-o.xmin}if(o.ymin<0){l[1]=-o.ymin}if(r.length>0){s=n.getPathData();var u={d:s,transform:"translate("+l[0]+","+l[1]+")","pointer-events":t["pointer-events"]||"visibleStroke"},c=null,f=[n.x,n.y,n.w,n.h];if(a.outlineStroke){var h=a.outlineWidth||1,d=a.strokeWidth+2*h;c=e.extend({},a);delete c.gradient;c.stroke=a.outlineStroke;c.strokeWidth=d;if(n.bgPath==null){n.bgPath=y("path",u);e.addClass(n.bgPath,e.connectorOutlineClass);C(n.svg,n.bgPath,0)}else{g(n.bgPath,u)}w(n.svg,n.bgPath,c,f,n)}if(n.path==null){n.path=y("path",u);C(n.svg,n.path,a.outlineStroke?1:0)}else{g(n.path,u)}w(n.svg,n.path,a,f,n)}}};n.extend(e.ConnectorRenderers.svg,j);var E=e.SvgEndpoint=function(t){var n=j.apply(this,[{cssClass:t._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:true,_jsPlumb:t._jsPlumb}]);n.renderer.paint=function(t){var n=e.extend({},t);if(n.outlineStroke){n.stroke=n.outlineStroke}if(this.node==null){this.node=this.makeNode(n);this.svg.appendChild(this.node)}else if(this.updateNode!=null){this.updateNode(this.node)}w(this.svg,this.node,n,[this.x,this.y,this.w,this.h],this);b(this.node,[this.x,this.y])}.bind(this)};n.extend(E,j);e.Endpoints.svg.Dot=function(){e.Endpoints.Dot.apply(this,arguments);E.apply(this,arguments);this.makeNode=function(t){return y("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})};this.updateNode=function(t){g(t,{cx:this.w/2,cy:this.h/2,r:this.radius})}};n.extend(e.Endpoints.svg.Dot,[e.Endpoints.Dot,E]);e.Endpoints.svg.Rectangle=function(){e.Endpoints.Rectangle.apply(this,arguments);E.apply(this,arguments);this.makeNode=function(t){return y("rect",{width:this.w,height:this.h})};this.updateNode=function(t){g(t,{width:this.w,height:this.h})}};n.extend(e.Endpoints.svg.Rectangle,[e.Endpoints.Rectangle,E]);e.Endpoints.svg.Image=e.Endpoints.Image;e.Endpoints.svg.Blank=e.Endpoints.Blank;e.Overlays.svg.Label=e.Overlays.Label;e.Overlays.svg.Custom=e.Overlays.Custom;var I=function(t,n){t.apply(this,n);e.jsPlumbUIComponent.apply(this,n);this.isAppendedAtTopLevel=false;var a=this;this.path=null;this.paint=function(t,e){if(t.component.svg&&e){if(this.path==null){this.path=y("path",{"pointer-events":"all"});t.component.svg.appendChild(this.path);if(this.elementCreated){this.elementCreated(this.path,t.component)}this.canvas=t.component.svg}var a=n&&n.length===1?n[0].cssClass||"":"",o=[0,0];if(e.xmin<0){o[0]=-e.xmin}if(e.ymin<0){o[1]=-e.ymin}g(this.path,{d:i(t.d),"class":a,stroke:t.stroke?t.stroke:null,fill:t.fill?t.fill:null,transform:"translate("+o[0]+","+o[1]+")"})}};var i=function(t){return isNaN(t.cxy.x)||isNaN(t.cxy.y)?"":"M"+t.hxy.x+","+t.hxy.y+" L"+t.tail[0].x+","+t.tail[0].y+" L"+t.cxy.x+","+t.cxy.y+" L"+t.tail[1].x+","+t.tail[1].y+" L"+t.hxy.x+","+t.hxy.y};this.transfer=function(t){if(t.canvas&&this.path&&this.path.parentNode){this.path.parentNode.removeChild(this.path);t.canvas.appendChild(this.path)}}};n.extend(I,[e.jsPlumbUIComponent,e.Overlays.AbstractOverlay],{cleanup:function(t){if(this.path!=null){if(t){this._jsPlumb.instance.removeElement(this.path)}else{if(this.path.parentNode){this.path.parentNode.removeChild(this.path)}}}},reattach:function(t){if(this.path&&this.canvas&&this.path.parentNode==null){this.canvas.appendChild(this.path)}},setVisible:function(t){if(this.path!=null){this.path.style.display=t?"block":"none"}}});e.Overlays.svg.Arrow=function(){I.apply(this,[e.Overlays.Arrow,arguments])};n.extend(e.Overlays.svg.Arrow,[e.Overlays.Arrow,I]);e.Overlays.svg.PlainArrow=function(){I.apply(this,[e.Overlays.PlainArrow,arguments])};n.extend(e.Overlays.svg.PlainArrow,[e.Overlays.PlainArrow,I]);e.Overlays.svg.Diamond=function(){I.apply(this,[e.Overlays.Diamond,arguments])};n.extend(e.Overlays.svg.Diamond,[e.Overlays.Diamond,I]);e.Overlays.svg.GuideLines=function(){var t=null,n=this,a,i;e.Overlays.GuideLines.apply(this,arguments);this.paint=function(e,r){if(t==null){t=y("path");e.connector.svg.appendChild(t);n.attachListeners(t,e.connector);n.attachListeners(t,n);a=y("path");e.connector.svg.appendChild(a);n.attachListeners(a,e.connector);n.attachListeners(a,n);i=y("path");e.connector.svg.appendChild(i);n.attachListeners(i,e.connector);n.attachListeners(i,n)}var s=[0,0];if(r.xmin<0){s[0]=-r.xmin}if(r.ymin<0){s[1]=-r.ymin}g(t,{d:o(e.head,e.tail),stroke:"red",fill:null,transform:"translate("+s[0]+","+s[1]+")"});g(a,{d:o(e.tailLine[0],e.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+s[0]+","+s[1]+")"});g(i,{d:o(e.headLine[0],e.headLine[1]),stroke:"green",fill:null,transform:"translate("+s[0]+","+s[1]+")"})};var o=function(t,e){return"M "+t.x+","+t.y+" L"+e.x+","+e.y}};n.extend(e.Overlays.svg.GuideLines,e.Overlays.GuideLines)}).call(typeof window!=="undefined"?window:this);(function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,a=t.Katavorio,i=t.Biltong;var o=function(t,n){n=n||"main";var o="_katavorio_"+n;var r=t[o],s=t.getEventManager();if(!r){r=new a({bind:s.on,unbind:s.off,getSize:e.getSize,getPosition:function(e,n){var a=t.getOffset(e,n,e._katavorioDrag?e.offsetParent:null);return[a.left,a.top]},setPosition:function(t,e){t.style.left=e[0]+"px";t.style.top=e[1]+"px"},addClass:e.addClass,removeClass:e.removeClass,intersects:i.intersects,indexOf:function(t,e){return t.indexOf(e)},scope:t.getDefaultScope(),css:{noSelect:t.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}});r.setZoom(t.getZoom());t[o]=r;t.bind("zoom",r.setZoom)}return r};var r=function(t,e){var a=function(a){if(e[a]!=null){if(n.isString(e[a])){var i=e[a].match(/-=/)?-1:1,o=e[a].substring(2);return t[a]+i*o}else{return e[a]}}else{return t[a]}};return[a("left"),a("top")]};e.extend(t.jsPlumbInstance.prototype,{animationSupported:true,getElement:function(t){if(t==null){return null}t=typeof t==="string"?t:t.length!=null&&t.enctype==null?t[0]:t;return typeof t==="string"?document.getElementById(t):t},removeElement:function(t){o(this).elementRemoved(t);this.getEventManager().remove(t)},doAnimate:function(t,n,a){a=a||{};var i=this.getOffset(t),o=r(i,n),s=o[0]-i.left,l=o[1]-i.top,u=a.duration||250,c=15,f=u/c,h=c/u*s,d=c/u*l,p=0,_=setInterval(function(){e.setPosition(t,{left:i.left+h*(p+1),top:i.top+d*(p+1)});if(a.step!=null){a.step(p,Math.ceil(f))}p++;if(p>=f){window.clearInterval(_);if(a.complete!=null){a.complete()}}},c)},destroyDraggable:function(t,e){o(this,e).destroyDraggable(t)},destroyDroppable:function(t,e){o(this,e).destroyDroppable(t)},initDraggable:function(t,e,n){o(this,n).draggable(t,e)},initDroppable:function(t,e,n){o(this,n).droppable(t,e)},isAlreadyDraggable:function(t){return t._katavorioDrag!=null},isDragSupported:function(t,e){return true},isDropSupported:function(t,e){return true},isElementDraggable:function(t){t=e.getElement(t);return t._katavorioDrag&&t._katavorioDrag.isEnabled()},getDragObject:function(t){return t[0].drag.getDragElement()},getDragScope:function(t){return t._katavorioDrag&&t._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(t){return t[0].e},getUIPosition:function(t,e){var n=t[0].el;if(n.offsetParent==null){return null}var a=t[0].finalPos||t[0].pos;var i={left:a[0],top:a[1]};if(n._katavorioDrag&&n.offsetParent!==this.getContainer()){var o=this.getOffset(n.offsetParent);i.left+=o.left;i.top+=o.top}return i},setDragFilter:function(t,e,n){if(t._katavorioDrag){t._katavorioDrag.setFilter(e,n)}},setElementDraggable:function(t,n){t=e.getElement(t);if(t._katavorioDrag){t._katavorioDrag.setEnabled(n)}},setDragScope:function(t,e){if(t._katavorioDrag){t._katavorioDrag.k.setDragScope(t,e)}},setDropScope:function(t,e){if(t._katavorioDrop&&t._katavorioDrop.length>0){t._katavorioDrop[0].k.setDropScope(t,e)}},addToPosse:function(t,n){var a=Array.prototype.slice.call(arguments,1);var i=o(this);e.each(t,function(t){t=[e.getElement(t)];t.push.apply(t,a);i.addToPosse.apply(i,t)})},setPosse:function(t,n){var a=Array.prototype.slice.call(arguments,1);var i=o(this);e.each(t,function(t){t=[e.getElement(t)];t.push.apply(t,a);i.setPosse.apply(i,t)})},removeFromPosse:function(t,n){var a=Array.prototype.slice.call(arguments,1);var i=o(this);e.each(t,function(t){t=[e.getElement(t)];t.push.apply(t,a);i.removeFromPosse.apply(i,t)})},removeFromAllPosses:function(t){var n=o(this);e.each(t,function(t){n.removeFromAllPosses(e.getElement(t))})},setPosseState:function(t,n,a){var i=o(this);e.each(t,function(t){i.setPosseState(e.getElement(t),n,a)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(t){if(t._katavorioDrag){t._katavorioDrag.abort()}},addToDragSelection:function(t){o(this).select(t)},removeFromDragSelection:function(t){o(this).deselect(t)},clearDragSelection:function(){o(this).deselectAll()},trigger:function(t,e,n,a){this.getEventManager().trigger(t,e,n,a)},doReset:function(){for(var t in this){if(t.indexOf("_katavorio_")===0){this[t].reset()}}}});var s=function(t){var e=function(){if(/complete|loaded|interactive/.test(document.readyState)&&typeof document.body!=="undefined"&&document.body!=null){t()}else{setTimeout(e,9)}};e()};s(e.init)}).call(typeof window!=="undefined"?window:this);(function(t){"use strict";if(typeof t.snOoPy=="undefined")t.snOoPy={};if(typeof t.snOoPy.SNooPY=="undefined")t.snOoPy.SNooPY={}})(window);(function(t,e){"use strict";if(typeof t.a_TI=="undefined"){t.a_TI=function(){this.a_xQ=[{a_Qo:this,a_B4:t.a_TI.a_xQ.a_B3,a_BB:-1}]};t.a_TI.prototype.a_xf=function(){return this.a_xQ[0]};t.a_TI.prototype.a_To=function(){var e=this.a_xf();if(e.a_BB+1>t.a_TI.a_Bu){e.a_BB=0;e.a_B4+=t.a_TI.a_BM}else{++e.a_BB}return e.a_B4+e.a_BB};t.a_TI.a_xQ={a_B3:"u",a_BM:"x",a_Bu:999999999,a_Bw:null};t.a_TI.a_TT=function(){if(t.a_TI.a_xQ.a_Bw==null){t.a_TI.a_xQ.a_Bw=new t.a_TI}return t.a_TI.a_xQ.a_Bw}}})(window.snOoPy.SNooPY,window);(function(t,e){"use strict";if(typeof t.a_T2=="undefined"){t.a_T2=function(t){this.a_xQ=[{a_Qo:this,a_B6:t}]};t.a_T2.prototype.a_xf=function(){return this.a_xQ[0]};t.a_T2.prototype.a_TR=function(t){var e=this.a_xf();var n="";for(var a=0;a<e.a_B6.length;++a){var i=e.a_B6[a];if(a%2==0){n+=i}else{if(typeof t[i]!="undefined"){n+=t[i]}}}return n}}})(window.snOoPy.SNooPY,window);(function(t,e){"use strict";if(typeof t.a_3c=="undefined"){t.a_3c=function(t,e,n){this.a_xQ=[{a_Qo:this,a_Bx:t,a_35:e,a_30:n,a_3U:(e?1:-1)*t,a_3V:e?1:-1,a_32:function(t,e,n){return t>e||n&&t==e}}]};t.a_3c.prototype.a_xf=function(){return this.a_xQ[0]};t.a_3c.prototype.a_3t=function(){return this.a_xf().a_Bx};t.a_3c.prototype.a_Bi=function(){return this.a_xf().a_35};t.a_3c.prototype.a_3O=function(){return this.a_xf().a_30};t.a_3c.prototype.a_3m=function(t){var e=this.a_xf();return e.a_32(e.a_3V*t,e.a_3U,e.a_30)}}})(window.snOoPy.SNooPY,window);(function(t,e){"use strict";if(typeof t.a_3W=="undefined"){t.a_3W=function(e,n,a){this.a_xQ=[{a_Qo:this,a_3P:e,a_3L:n,a_38:a,a_3R:null,a_3d:null,a_3s:null,a_3G:null,a_3S:function(e){return e?t.a_3W.a_xQ.a_3N:t.a_3W.a_xQ.a_3n},a_3y:function(e){var n=this;if(n.a_3R==null){n.a_3R=new t.a_T2(t.a_3W.a_xQ.a_3a.slice())}var a={};a[t.a_3W.a_xQ.a_3K]=e;return n.a_3R.a_TR(a)},a_3X:function(e){var n=this;if(n.a_3d==null){n.a_3d=new t.a_T2(t.a_3W.a_xQ.a_3v.slice())}var a={};a[t.a_3W.a_xQ.a_3j]=e;a[t.a_3W.a_xQ.a_3z]=n.a_3P;return n.a_3d.a_TR(a)},a_37:function(e,n,a){var i=this;var o={};o[t.a_3W.a_xQ.a_3K]=n;o[t.a_3W.a_xQ.a_3g]=a.a_3t();o[t.a_3W.a_xQ.a_39]=i.a_3S(a.a_3O());return e.a_TR(o)},a_3b:function(e){var n=this;if(n.a_3s==null){n.a_3s=new t.a_T2(t.a_3W.a_xQ.a_3r.slice())}return n.a_37(n.a_3s,e,n.a_3L)},a_3C:function(e){var n=this;if(n.a_3G==null){n.a_3G=new t.a_T2(t.a_3W.a_xQ.a_3Z.slice())}return n.a_37(n.a_3G,e,n.a_38)}}]};t.a_3W.prototype.a_xf=function(){return this.a_xQ[0]};t.a_3W.prototype.a_oj=function(t){var e=this.a_xf();var n=new RegExp("^-?(0|[1-9][0-9]*)(\\.[0-9]+)?$").exec(t);var a=2;if(n){var i=0;if(n[a]){i=n[a].length-1}if(e.a_3P>=0&&i>e.a_3P){return e.a_3X(i)}var o=Number.parseFloat(t);if(e.a_3L!=null&&!e.a_3L.a_3m(o)){return e.a_3b(t)}if(e.a_38!=null&&!e.a_38.a_3m(o)){return e.a_3C(t)}}else{return e.a_3y(t)}};t.a_3W.a_xQ={a_3a:['The value "',"foundValue",'" is not a correctly formatted number.'],a_3v:["This value has too many decimals. The maximum allowed is ","maxDecimals",". ","foundDecimals"," was/were found."],a_3r:["The value ","foundValue"," is too small. The minimum value is ","referenceValue"," (inclusive: ","inclusiveYesOrNo",")."],a_3Z:["The value ","foundValue"," is too large. The maximum value is ","referenceValue"," (inclusive: ","inclusiveYesOrNo",")."],a_3z:"maxDecimals",a_3j:"foundDecimals",a_3g:"referenceValue",a_3K:"foundValue",a_39:"inclusiveYesOrNo",a_3N:"yes",a_3n:"no"};t.a_3W.a_3p=function(e){var n=null;if(typeof e["min"]!="undefined"&&e.min!=null){n=new t.a_3c(e.min.value,true,e.min.inclusive)}var a=null;if(typeof e["max"]!="undefined"&&e.max!=null){a=new t.a_3c(e.max.value,false,e.max.inclusive)}return new t.a_3W(e.decimals,n,a)}}})(window.snOoPy.SNooPY,window);(function(t,e){"use strict";if(typeof t.a_k=="undefined"){t.a_k=function(){this.a_xQ=[{a_Qo:this,a_3H:{}}]};t.a_k.prototype.a_xf=function(){return this.a_xQ[0]};t.a_k.prototype.a_u=function(t,e){this.a_xf().a_3H[t]=e};t.a_k.prototype.a_3E=function(t,e,n,a,i,o){var r=this.a_xf();if(typeof r.a_3H[t]=="undefined"){throw'Unknown field type "'+t+'" in a_k.a_3E(...)'}return r.a_3H[t].a_3E(t,e,n,a,i,o)};t.a_k.prototype.a_lC=function(t){return this.a_3E(t.fieldType,t.fieldArgs,t.propName,t.label,t.valueData,t.dirty)}}})(window.snOoPy.SNooPY,window);(function(t,e){"use strict";if(typeof t.a_J=="undefined"){t.a_J=function(){this.a_xQ=[{a_Qo:this}]};t.a_J.prototype.a_xf=function(){return this.a_xQ[0]};t.a_J.prototype.a_3E=function(e,n,a,i,o,r){return new t.a_h(e,n,a,i,o,r)};t.a_J.prototype.a_lC=function(t){return this.a_3E(t.fieldType,t.fieldArgs,t.propName,t.label,t.valueData,t.dirty)}}})(window.snOoPy.SNooPY,window);(function(t,e){"use strict";if(typeof t.a_4=="undefined"){t.a_4=function(){this.a_xQ=[{a_Qo:this}]};t.a_4.prototype.a_xf=function(){return this.a_xQ[0]};t.a_4.prototype.a_3E=function(e,n,a,i,o,r){return new t.a_B(e,n,a,i,o,r)};t.a_4.prototype.a_lC=function(t){return this.a_3E(t.fieldType,t.fieldArgs,t.propName,t.label,t.valueData,t.dirty)}}})(window.snOoPy.SNooPY,window);(function(t,e){"use strict";if(typeof t.a_M=="undefined"){t.a_M=function(t){this.a_xQ=[{a_Qo:this,a_xM:t}]
};t.a_M.prototype.a_xf=function(){return this.a_xQ[0]};t.a_M.prototype.a_3E=function(e,n,a,i,o,r){var s=this.a_xf();return new t.a_w(s.a_xM,e,n,a,i,o,r)};t.a_M.prototype.a_lC=function(t){return this.a_3E(t.fieldType,t.fieldArgs,t.propName,t.label,t.valueData,t.dirty)}}})(window.snOoPy.SNooPY,window);(function(t,e){"use strict";if(typeof t.a_h=="undefined"){t.a_h=function(e,n,a,i,o,r){this.a_xQ=[{a_Qo:this,a_uE:e,a_u3:n,a_lj:a,a_uW:i,a_MG:o,a_up:o,a_u4:r,a_3I:null,a_M7:null,a_uO:null,a_3J:null,a_3k:function(){var e=this;if(e.a_u3.numberConfig==null)return null;if(e.a_3J==null){e.a_3J=t.a_3W.a_3p(e.a_u3.numberConfig)}return e.a_3J},a_3o:function(t){var e=this;var n=e.a_3k();return n==null?null:n.a_oj(t)},a_33:function(e){return t.a_h.a_xQ.a_MR+e+t.a_h.a_xQ.a_MF},a_36:function(e){var n=this;e.removeClass(n.a_33(t.a_h.a_xQ.a_3Y)).removeClass(n.a_33(t.a_h.a_xQ.a_34)).removeClass(n.a_33(t.a_h.a_xQ.a_3B))},a_3w:function(t,e){var n=this;if(n.a_3I!=null){n.a_36(n.a_3I);n.a_3I.addClass(n.a_33(e));if(n.a_uO==null){n.a_uO=jQuery('<span class="help-block"></span>');n.a_3I.append(n.a_uO)}n.a_uO.text(t)}},a_3Q:function(e){this.a_3w(e,t.a_h.a_xQ.a_MV)},a_3M:function(e){this.a_3w(e,t.a_h.a_xQ.a_MU)},a_3u:function(e){this.a_3w(e,t.a_h.a_xQ.a_M0)},a_3T:function(){var t=this;if(t.a_3I!=null){t.a_36(t.a_3I);if(t.a_uO!=null){t.a_uO.remove();t.a_uO=null}}}}]};t.a_h.prototype.a_xf=function(){return this.a_xQ[0]};t.a_h.prototype.a_lH=function(e){var n=this.a_xf();var a=t.a_TI.a_TT().a_To();var i=jQuery('<div class="form-group"></div>');var o=jQuery('<label class="control-label"></label>').attr("for",a).text(n.a_uW);var r=n.a_u3.displayAsTextArea?r=jQuery('<textarea class="form-control"></textarea>'):r=jQuery('<input type="text" class="form-control" />');r.attr("id",a).val(n.a_up);i.append(o);i.append(r);e.append(i);n.a_3I=i;n.a_M7=r};t.a_h.prototype.a_lL=function(){var t=this.a_xf();t.a_3I=null;t.a_M7=null;t.a_uO=null};t.a_h.prototype.a_oz=function(){var t=this.a_xf();t.a_up=t.a_M7.val()};t.a_h.prototype.a_oL=function(){var t=this.a_xf();var e=this;var n={fieldType:t.a_uE,fieldArgs:t.a_u3,propName:t.a_lj,label:t.a_uW,valueData:t.a_up,dirty:e.a_lI()};return n};t.a_h.prototype.a_lI=function(){var t=this.a_xf();return t.a_u4||t.a_up!=t.a_MG};t.a_h.prototype.a_oy=function(t){var e=this.a_xf();e.a_u4=false;e.a_MG=e.a_up};t.a_h.prototype.a_oj=function(){var e=this.a_xf();e.a_3T();if(e.a_u3.notEmpty&&e.a_up.length==0){var n=t.a_h.a_xQ.a_3i;e.a_3Q(n);return n}if(e.a_u3.maxLength!=-1&&e.a_up.length>e.a_u3.maxLength){var n=t.a_h.a_xQ.a_M5+e.a_u3.maxLength+t.a_h.a_xQ.a_M2;e.a_3Q(n);return n}var a=e.a_3o(e.a_up);if(a!=null){e.a_3Q(a);return a}return null};t.a_h.a_xQ={a_3i:"This field can not be empty",a_M5:"This field can contain no more than ",a_M2:" characters.",a_MV:"error",a_MU:"warning",a_M0:"success",a_MR:"has-",a_MF:""};t.a_h.a_6="TEXT"}})(window.snOoPy.SNooPY,window);(function(t,e){"use strict";if(typeof t.a_B=="undefined"){t.a_B=function(t,e,n,a,i,o){this.a_xQ=[{a_Qo:this,a_uE:t,a_u3:e,a_lj:n,a_uW:a,a_MG:i,a_up:i,a_u4:o,a_M7:null,a_Ms:function(t,e){t.prop("checked",e)},a_Mt:function(t){return t.is(":checked")}}]};t.a_B.prototype.a_xf=function(){return this.a_xQ[0]};t.a_B.prototype.a_lH=function(t){var e=this.a_xf();var n=jQuery('<div class="form-group"></div>');t.append(n);var a=jQuery("<label></label>").text(e.a_uW);n.append(a);e.a_M7=jQuery('<input type="checkbox" />');n.prepend(e.a_M7);e.a_Ms(e.a_M7,e.a_up)};t.a_B.prototype.a_lL=function(){var t=this.a_xf();t.a_M7=null};t.a_B.prototype.a_oz=function(){var t=this.a_xf();t.a_up=t.a_M7.is(":checked")};t.a_B.prototype.a_oL=function(){var t=this.a_xf();var e=this;var n={fieldType:t.a_uE,fieldArgs:t.a_u3,propName:t.a_lj,label:t.a_uW,valueData:t.a_up,dirty:e.a_lI()};return n};t.a_B.prototype.a_lI=function(){var t=this.a_xf();return t.a_u4||t.a_up!=t.a_MG};t.a_B.prototype.a_oy=function(t){var e=this.a_xf();e.a_u4=false;e.a_MG=e.a_up};t.a_B.prototype.a_oj=function(){return null};t.a_B.a_6="CHECK"}})(window.snOoPy.SNooPY,window);(function(t,e){"use strict";if(typeof t.a_ws=="undefined"){t.a_ws=function(e,n,a,i,o,r,s,l,u){this.a_xQ=[{a_Qo:this,a_6R:e,a_oq:n,a_uW:a,a_Mu:i,a_lT:o,a_uJ:r,a_Mw:s,a_M9:l,a_u4:u,a_Mf:null,a_ub:null,a_MB:null,a_xI:null,a_6y:null,a_M3:null,a_MM:null,a_MP:function(e,n){var a=this;if(a.a_Mf==null){a.a_Mf=new t.a_T2(a.a_Mw)}var i={};i[t.a_ws.a_xQ.a_uV]=e;i[t.a_ws.a_xQ.a_uU]=e+1;i[t.a_ws.a_xQ.a_u0]=n;return a.a_Mf.a_TR(i)},a_ME:function(){var t=this;return t.a_MP(t.a_uJ,t.a_uW)},a_MJ:function(){return jQuery('<div class="panel panel-default"></div>').addClass(t.a_ws.a_xQ.a_6B)},a_MY:function(){var e=this;var n=this.a_Qo;e.a_6y=jQuery('<div class="panel-heading"></div>').addClass(t.a_ws.a_xQ.a_6M);e.a_xI.append(e.a_6y);var a=jQuery('<div class="panel-body"></div>').addClass(t.a_ws.a_xQ.a_w5);e.a_xI.append(a);var i=jQuery('<div class="btn-group"></div>').addClass(t.a_ws.a_xQ.a_M6);a.append(i);var o=jQuery('<button class="btn btn-default"></button>').addClass(t.a_ws.a_xQ.a_MI).text(t.a_ws.a_xQ.a_Mx);i.append(o);e.a_M3=o;o.click(function(){e.a_Mz()});var r=jQuery('<button class="btn btn-default"></button>').addClass(t.a_ws.a_xQ.a_MT).text(t.a_ws.a_xQ.a_Mi);i.append(r);e.a_MM=r;r.click(function(){e.a_Mj()});var s=jQuery('<button class="btn btn-default"></button>').addClass(t.a_ws.a_xQ.a_Mo).text(t.a_ws.a_xQ.a_u5);s.click(function(t){e.a_MK(t)});i.append(s);n.a_uX();var l=jQuery("<div></div>").addClass(t.a_ws.a_xQ.a_MQ);a.append(l);for(var u=0;u<e.a_lT.length;++u){e.a_lT[u].a_lH(l)}n.a_lM()},a_Mg:function(t){var e=this;var n=this.a_Qo;if(t){if(e.a_ub!=null){var a=e.a_ub;var i=a.a_MA();var o=e.a_MB;var r=a.a_Mc();var s=e.a_uJ;e.a_xI.insertBefore(a.a_Tn());n.a_uq(i);n.a_uP(a);n.a_Mn(r);n.a_lM();a.a_uq(n);a.a_uP(o);a.a_Mn(s);a.a_lM();n.a_uX();a.a_uX();if(i!=null){i.a_uP(n);i.a_uX()}if(o!=null){o.a_uq(a);o.a_uX()}e.a_M9.a_uy(r,s)}}else{if(e.a_MB!=null){var a=e.a_MB;var i=e.a_ub;var o=a.a_MH();var r=e.a_uJ;var s=a.a_Mc();e.a_xI.insertAfter(a.a_Tn());n.a_uq(a);n.a_uP(o);n.a_Mn(s);n.a_lM();a.a_uq(i);a.a_uP(n);a.a_Mn(r);a.a_lM();n.a_uX();a.a_uX();if(i!=null){i.a_uP(a);i.a_uX()}if(o!=null){o.a_uq(n);o.a_uX()}e.a_M9.a_uy(r,s)}}},a_M4:function(t,e){if(e){t.removeClass("disabled")}else{t.addClass("disabled")}},a_Mz:function(){this.a_Mg(true)},a_Mj:function(){this.a_Mg(false)},a_MK:function(t){var e=this;if(e.a_ub!=null){e.a_ub.a_uP(e.a_MB);e.a_ub.a_uX()}if(e.a_MB!=null){e.a_MB.a_uq(e.a_ub);e.a_MB.a_M1(-1,true,true)}e.a_xI.remove();e.a_M9.a_uz(e.a_uJ)}}]};t.a_ws.prototype.a_xf=function(){return this.a_xQ[0]};t.a_ws.prototype.a_ww=function(t){this.a_xf().a_6R=t};t.a_ws.prototype.a_xU=function(){return this.a_xf().a_6R};t.a_ws.prototype.a_w6=function(t){this.a_xf().a_oq=t};t.a_ws.prototype.a_xd=function(){return this.a_xf().a_oq};t.a_ws.prototype.a_MN=function(){return this.a_xf().a_uW};t.a_ws.prototype.a_Mn=function(t){this.a_xf().a_uJ=t};t.a_ws.prototype.a_Mc=function(){return this.a_xf().a_uJ};t.a_ws.prototype.a_M1=function(t,e,n){var a=this.a_xf();var i=this;a.a_uJ+=t;if(e){i.a_lM()}if(n){i.a_uX()}if(a.a_MB!=null){a.a_MB.a_M1(t,e,n)}};t.a_ws.prototype.a_M8=function(){return this.a_xf().a_lT};t.a_ws.prototype.a_uq=function(t){this.a_xf().a_ub=t};t.a_ws.prototype.a_MA=function(){return this.a_xf().a_ub};t.a_ws.prototype.a_uP=function(t){this.a_xf().a_MB=t};t.a_ws.prototype.a_MH=function(){return this.a_xf().a_MB};t.a_ws.prototype.a_lM=function(){var t=this.a_xf();t.a_6y.text(t.a_ME())};t.a_ws.prototype.a_Tn=function(){return this.a_xf().a_xI};t.a_ws.prototype.a_uc=function(t){var e=this.a_xf();e.a_xI=e.a_MJ();t.append(e.a_xI);e.a_MY()};t.a_ws.prototype.a_MW=function(t){var e=this.a_xf();e.a_xI=e.a_MJ();e.a_xI.insertBefore(t);e.a_MY()};t.a_ws.prototype.a_Mk=function(t){var e=this.a_xf();e.a_xI=e.a_MJ();e.a_xI.insertAfter(t);e.a_MY()};t.a_ws.prototype.a_uX=function(){var t=this.a_xf();t.a_M4(t.a_M3,t.a_ub!=null);t.a_M4(t.a_MM,t.a_MB!=null)};t.a_ws.prototype.a_lL=function(){var t=this.a_xf();t.a_xI=null;t.a_6y=null;t.a_M3=null;t.a_MM=null};t.a_ws.prototype.a_oz=function(){var t=this.a_xf();for(var e=0;e<t.a_lT.length;++e){var n=t.a_lT[e];n.a_oz()}};t.a_ws.prototype.a_oj=function(){var e=this.a_xf();for(var n=0;n<e.a_lT.length;++n){var a=e.a_lT[n];if(a.a_oj()!=null){return t.a_ws.a_xQ.a_u2}}return null};t.a_ws.prototype.a_lI=function(){var t=this.a_xf();if(t.a_u4)return true;for(var e=0;e<t.a_lT.length;++e){var n=t.a_lT[e];if(n.a_lI()){return true}}return false};t.a_ws.prototype.a_oy=function(t){var e=this.a_xf();for(var n=0;n<e.a_lT.length;++n){var a=e.a_lT[n];a.a_oy(t)}if(e.a_6R==null&&e.a_oq!=null&&typeof t[e.a_oq]!="undefined"){e.a_6R=t[e.a_oq];e.a_oq=null}e.a_u4=false};t.a_ws.prototype.a_oL=function(){var t=this.a_xf();var e=this;var n={id:t.a_6R,tempId:t.a_oq,label:t.a_uW,type:t.a_Mu,titleTemplate:t.a_Mw.slice(),dirty:e.a_lI(),fields:[]};for(var a=0;a<t.a_lT.length;++a){var i=t.a_lT[a];n.fields.push(i.a_oL())}return n};t.a_ws.a_xQ={a_6B:"rgm-modes-subform-container",a_6M:"rgm-modes-subform-title",a_w5:"rgm-modes-subform-content",a_M6:"rgm-modes-subform-btns",a_Ml:"rgm-modes-subform-move-btn",a_MI:"rgm-modes-subform-up-btn",a_MT:"rgm-modes-subform-down-btn",a_Mo:"rgm-modes-subform-remove-btn",a_MQ:"rgm-modes-subform-fields",a_Mx:"",a_Mi:"",a_u5:"",a_u2:"There are invalid fields.",a_IS:"temp_subform",a_IO:"_",a_uV:"position",a_uU:"positionOneBased",a_u0:"label"};t.a_ws.a_oO=function(){return[t.a_ws.a_xQ.a_IS,(new Date).getTime(),t.a_TI.a_TT().a_To()].join(t.a_ws.a_xQ.a_IO)}}})(window.snOoPy.SNooPY,window);(function(t,e){"use strict";if(typeof t.a_w=="undefined"){t.a_w=function(e,n,a,i,o,r,s){this.a_xQ=[{a_Qo:this,a_xM:e,a_uE:n,a_u3:a,a_lj:i,a_uW:o,a_ud:r,a_u4:s,a_uL:null,a_u8:[],a_uA:null,a_uH:[],a_uT:[],a_um:{},a_uY:[],a_uh:-1,a_us:null,a_uf:null,a_lY:function(){var e=this;var n=this.a_Qo;var a=null;for(var i=0;i<e.a_ud.length;++i){var o=e.a_ud[i];var r=[];for(var s=0;s<o.fields.length;++s){var l=o.fields[s];var u=e.a_xM.a_lC(l);r.push(u)}var c=new t.a_ws(o.id,o.tempId,o.label,o.type,r,i,o.titleTemplate,n,o.dirty);if(i>0){c.a_uq(a);a.a_uP(c)}e.a_uY.push(i);e.a_uT.push(c);a=c}e.a_uh=e.a_uT.length},a_uS:function(t,e){var n=this;var a=jQuery('<div class="alert"></div>').addClass("alert-"+e).text(t);n.a_uL.append(a);n.a_u8.push(a)},a_ul:function(e){var n=this;n.a_uS(e,t.a_w.a_xQ.a_w0)},a_uB:function(){var t=this;for(var e=0;e<t.a_u8.length;++e){var n=t.a_u8[e];n.remove()}},a_uu:function(e,n){var a=this;if(a.a_us==null){a.a_us=new t.a_T2(t.a_w.a_xQ.a_wR)}var i={};i[t.a_w.a_xQ.a_lG]=e;i[t.a_w.a_xQ.a_wd]=n;return a.a_us.a_TR(i)},a_u7:function(e,n){var a=this;if(a.a_uf==null){a.a_uf=new t.a_T2(t.a_w.a_xQ.a_wF)}var i={};i[t.a_w.a_xQ.a_lG]=e;i[t.a_w.a_xQ.a_wd]=n;return a.a_uf.a_TR(i)},a_ug:function(e){var n=this;var a=this.a_Qo;if(n.a_u3.maxForms==-1||n.a_uT.length<n.a_u3.maxForms){var i=t.a_ws.a_oO();var o=[];for(var r=0;r<e.fields.length;++r){var s=e.fields[r];var l=n.a_xM.a_lC(s);o.push(l)}var u=new t.a_ws(e.id,i,e.label,e.type,o,n.a_uT.length,e.titleTemplate,a,e.dirty);if(n.a_uT.length>0){var c=n.a_uT[n.a_uT.length-1];c.a_uP(u);c.a_uX();u.a_uq(c)}u.a_uc(n.a_uA);n.a_uY.push(-1);n.a_uT.push(u);n.a_um[i]=u;n.a_u1()}},a_u1:function(){var t=this;var e=t.a_u3.maxForms!=-1&&t.a_uT.length>=t.a_u3.maxForms;for(var n=0;n<t.a_uH.length;++n){var a=t.a_uH[n];if(e){a.addClass("disabled")}else{a.removeClass("disabled")}}}}];this.a_xQ[0].a_lY()};t.a_w.prototype.a_xf=function(){return this.a_xQ[0]};t.a_w.prototype.a_uy=function(t,e){var n=this.a_xf();var a=n.a_uT[t];n.a_uT[t]=n.a_uT[e];n.a_uT[e]=a;var i=n.a_uY[t];n.a_uY[t]=n.a_uY[e];n.a_uY[e]=i};t.a_w.prototype.a_uz=function(t){var e=this.a_xf();e.a_uT.splice(t,1);e.a_uY.splice(t,1);e.a_u1()};t.a_w.prototype.a_lH=function(e){var n=this.a_xf();var a=0;var i=jQuery('<div class="panel panel-default"></div>').addClass(t.a_w.a_xQ.a_6B);e.append(i);var o=jQuery('<div class="panel-heading"></div>').addClass(t.a_w.a_xQ.a_6M);o.text(n.a_uW);i.append(o);var r=jQuery('<div class="panel-body"></div>').addClass(t.a_w.a_xQ.a_w5);i.append(r);n.a_uL=jQuery("<div></div>").addClass(t.a_w.a_xQ.a_ui);r.append(n.a_uL);var s=jQuery('<div class="btn-group-vertical"></div>').addClass(t.a_w.a_xQ.a_w2);r.append(s);for(a=0;a<n.a_u3.forms.length;++a){(function(e){var a=n.a_u3.forms[e];var i=jQuery('<button class="btn btn-default"></button>').addClass(t.a_w.a_xQ.a_wV).text(t.a_w.a_xQ.a_wt+a.label+t.a_w.a_xQ.a_wS);i.click(function(){n.a_ug(a)});s.append(i);n.a_uH.push(i)})(a)}var l=jQuery("<div></div>").addClass(t.a_w.a_xQ.a_wU);r.append(l);for(a=0;a<n.a_uT.length;++a){var u=n.a_uT[a];u.a_uc(l)}n.a_uA=l;n.a_u1()};t.a_w.prototype.a_lL=function(){var t=this.a_xf();t.a_uL=null;t.a_u8=[];t.a_uA=null;t.a_uH=[];for(var e=0;e<t.a_uT.length;++e){var n=t.a_uT[e];n.a_lL()}};t.a_w.prototype.a_oz=function(){var t=this.a_xf();for(var e=0;e<t.a_uT.length;++e){var n=t.a_uT[e];n.a_oz()}};t.a_w.prototype.a_oL=function(){var t=this.a_xf();var e=this;var n={fieldType:t.a_uE,fieldArgs:t.a_u3,propName:t.a_lj,label:t.a_uW,valueData:t.a_up,dirty:e.a_lI(),valueData:[]};for(var a=0;a<t.a_uT.length;++a){var i=t.a_uT[a];n.valueData.push(i.a_oL())}return n};t.a_w.prototype.a_lI=function(){var t=this.a_xf();var e=0;if(t.a_u4||t.a_uT.length!=t.a_uh){return true}var n=-1;for(e=0;e<t.a_uY.length;++e){var a=t.a_uY[e];if(a!=n+1){return true}n=a}for(e=0;e<t.a_uT.length;++e){var i=t.a_uT[e];if(i.a_lI()){return true}}return false};t.a_w.prototype.a_oy=function(t){var e=this.a_xf();var n=0;e.a_uh=e.a_uT.length;e.a_uY=[];for(n=0;n<e.a_uT.length;++n){e.a_uY.push(n)}e.a_u4=false;for(n=0;n<e.a_uT.length;++n){var a=e.a_uT[n];a.a_oy(t)}};t.a_w.prototype.a_oj=function(){var e=this.a_xf();e.a_uB();var n=e.a_u3.minForms;var a=e.a_u3.maxForms;var i=e.a_uT.length;if(n!=-1&&i<n){var o=e.a_uu(n,i);e.a_ul(o);return o}if(a!=-1&&i>a){var o=e.a_uu(a,i);e.a_ul(o);return o}for(var r=0;r<e.a_uT.length;++r){var s=e.a_uT[r];var l=s.a_oj();if(l!=null){return t.a_w.a_xQ.a_wO}}return null};t.a_w.a_xQ={a_6B:"rgm-modes-forms-field-container",a_ux:"rgm-modes-forms-field-title",a_ui:"rgm-modes-forms-field-feedback-container",a_w5:"rgm-modes-forms-field-content",a_w2:"rgm-modes-forms-field-add-buttons",a_wV:"rgm-modes-forms-field-add-button",a_wU:"rgm-modes-forms-field-forms",a_w0:"danger",a_wR:["There are not enough forms (","actual","): this field expects at least ","bound"," form(s)."],a_wF:["There are too many forms (","actual","): this field allows no more than ","bound"," form(s)."],a_lG:"bound",a_wd:"actual",a_wt:"Add ",a_wS:"",a_wO:"There are invalid forms."};t.a_w.a_6="FORMS"}})(window.snOoPy.SNooPY,window);(function(t,e){"use strict";if(typeof t.a_on=="undefined"){t.a_on=function(e,n,a,i,o){this.a_xQ=[{a_Qo:this,a_oA:e,a_xG:n,a_xM:a,a_xl:i,a_wf:o,a_wD:null,a_6V:[],a_60:{},a_6F:[],a_6Y:-1,a_64:-1,a_6h:null,a_xI:null,a_6y:null,a_lT:[],a_lg:{},a_QK:null,a_la:null,a_wC:null,a_wk:null,a_wP:null,a_wX:null,a_wq:null,a_wb:null,a_w4:null,a_wy:null,a_w7:null,a_wv:null,a_wG:null,a_TB:0,a_6a:function(t){var e=this;if(e.a_wD==null){e.a_wD={};for(var n=0;n<e.a_wf.length;++n){var a=e.a_wf[n];e.a_wD[a.typeName]=a}}return e.a_wD[t]},a_l8:function(e,n){var a=this;if(a.a_la==null){a.a_la=new t.a_T2(t.a_on.a_xQ.a_lQ)}var i={};i[t.a_on.a_xQ.a_li]=e;i[t.a_on.a_xQ.a_m]=n;return a.a_la.a_TR(i)},a_wp:function(e,n){var a=this;if(a.a_wP==null){a.a_wP=new t.a_T2(t.a_on.a_xQ.a_6x)}var i={};i[t.a_on.a_xQ.a_li]=e;i[t.a_on.a_xQ.a_m]=n;return a.a_wP.a_TR(i)},a_wJ:function(e,n,a){var i=this;if(i.a_wX==null){i.a_wX=new t.a_T2(t.a_on.a_xQ.a_l5)}var o={};o[t.a_on.a_xQ.a_li]=e;o[t.a_on.a_xQ.a_m]=n;o[t.a_on.a_xQ.a_e]=a;return i.a_wX.a_TR(o)},a_wM:function(e,n,a){var i=this;if(i.a_wq==null){i.a_wq=new t.a_T2(t.a_on.a_xQ.a_l2)}var o={};o[t.a_on.a_xQ.a_li]=e;o[t.a_on.a_xQ.a_m]=n;o[t.a_on.a_xQ.a_e]=a;return i.a_wq.a_TR(o)},a_wu:function(e,n,a){var i=this;if(i.a_wb==null){i.a_wb=new t.a_T2(t.a_on.a_xQ.a_lV)}var o={};o[t.a_on.a_xQ.a_li]=e;o[t.a_on.a_xQ.a_m]=n;o[t.a_on.a_xQ.a_e]=a;return i.a_wb.a_TR(o)},a_wl:function(e,n,a,i,o){var r=this;if(r.a_wC==null){r.a_wC=new t.a_T2(t.a_on.a_xQ.a_6o)}var s={};s[t.a_on.a_xQ.a_li]=e;s[t.a_on.a_xQ.a_ld]=n;s[t.a_on.a_xQ.a_lt]=a;s[t.a_on.a_xQ.a_lS]=i;s[t.a_on.a_xQ.a_lO]=o;return r.a_wC.a_TR(s)},a_wZ:function(e,n){var a=this;if(e){if(n){if(a.a_wy==null){a.a_wy=new t.a_T2(t.a_on.a_xQ.a_lU)}return a.a_wy}else{if(a.a_wa==null){a.a_wa=new t.a_T2(t.a_on.a_xQ.a_l0)}return a.a_wa}}else{if(n){if(a.a_wv==null){a.a_wv=new t.a_T2(t.a_on.a_xQ.a_lR)}return a.a_wv}else{if(a.a_wr==null){a.a_wr=new t.a_T2(t.a_on.a_xQ.a_lF)}return a.a_wr}}},a_6W:function(e,n,a,i){var o=this;var r=o.a_wZ(e,n);var s={};s[t.a_on.a_xQ.a_lG]=a;s[t.a_on.a_xQ.a_m]=i;return r.a_TR(s)},a_wn:function(t,e){var n=e.a_Qy();var a=t?e.a_QY().a_x2():e.a_QB().a_x2();return[t?"1":"0",n.length,a.length,n,a].join("_")},a_6k:function(){var t=this;var e=0;var n=[];for(e=0;e<t.a_6F.length;++e){var a=t.a_6F[e];n.push(t.a_wn(true,a))}for(e=0;e<t.a_6V.length;++e){var a=t.a_6V[e];n.push(t.a_wn(false,a))}n.sort();var i=[];for(e=0;e<n.length;++e){var o=n[e];i.push(o.length);i.push(o)}return i.join("_")},a_wI:function(){var e=this;return e.a_oA.id!=null?t.a_on.a_xQ.a_lf:t.a_on.a_xQ.a_lD},a_wT:function(){var t=this;return t.a_oA.id!=null?t.a_oA.id:t.a_oA.tempId},a_l1:function(t,e){var n=this;if(t==null)return e;var a=n.a_lK(t[0],null);if(a==null)return e;var i=a.a_oL();for(var o=1;o<t.length;++o){var r=t[o];if(typeof i[r]=="undefined"){return e}i=i[r]}return i},a_lM:function(){var t=this;var e=this.a_Qo;t.a_6y.text(e.a_lh())},a_6s:function(t,e,n){t.css({top:n+"px",left:e+"px"})},a_6K:function(t){var e=t.position();return{a_6n:e.top,a_69:e.left}},a_67:function(t,e){for(var n=0;n<e.length;++n){t.addClass(e[n])}},a_lz:function(t,e){var n=this;n.a_lg["pn"+t]=e},a_lK:function(t,e){var n=this;var a="pn"+t;if(typeof n.a_lg[a]=="undefined")return e;return n.a_lg[a]},a_6P:function(){var e=this;var n=this.a_Qo;e.a_xl.a_oB(function(a,i,o,r,s){for(var l=0;l<e.a_lT.length;++l){var u=e.a_lT[l];u.a_lH(o)}i.text(e.a_l8(n.a_lh(),n.a_TV()));s.text(t.a_on.a_xQ.a_6l)},function(){return e.a_oR()})},a_6m:function(){var t=this;var e=this.a_Qo;if(confirm(t.a_wp(e.a_lh(),e.a_TV()))){t.a_xl.a_Qu(e,true);t.a_xI.remove()}},a_oR:function(){var t=this;var e=0;for(e=0;e<t.a_lT.length;++e){var n=t.a_lT[e];n.a_oz();if(n.a_oj()!=null){return false}}for(e=0;e<t.a_lT.length;++e){var n=t.a_lT[e];n.a_lL()}t.a_lM();return true},a_6g:function(){var e=this;var n=this.a_Qo;if(e.a_wk==null){e.a_wk=new t.a_T2(t.a_on.a_xQ.a_6Q)}var a={};a[t.a_on.a_xQ.a_m]=n.a_TV();a[t.a_on.a_xQ.a_ls]=e.a_oA.maxOutgoing;alert(e.a_wk.a_TR(a))},a_6f:function(t){var e=this;var n=this.a_Qo;e.a_xl.a_ox(e.a_wJ(n.a_lh(),n.a_Q7(),e.a_oA.typeLabel))},a_6D:function(t){var e=this;e.a_xl.a_Q5()},a_6v:function(t,e,n){var a=this;t.mouseover(function(t){a.a_wh(t,e,n)})},a_6r:function(t){var e=this;t.mouseout(function(t){e.a_w3(t)})},a_wh:function(e,n,a){var i=this;e.stopPropagation();if(i.a_w4==null){i.a_w4=new t.a_T2(t.a_on.a_xQ.a_6i)}var o={};o[t.a_on.a_xQ.a_l7]=a;var r=i.a_w4.a_TR(o);i.a_xl.a_ox(r)},a_w3:function(t){var e=this;e.a_xl.a_Q5()},a_6X:function(t){var e=this;var n=this.a_Qo;t.stopPropagation();e.a_xl.a_ox(e.a_wM(n.a_lh(),n.a_TV(),e.a_oA.typeLabel))},a_6q:function(t){var e=this;e.a_xl.a_Q5()},a_6e:function(t){var e=this;var n=this.a_Qo;t.stopPropagation();e.a_xl.a_ox(e.a_wu(n.a_lh(),n.a_TV(),e.a_oA.typeLabel))},a_6C:function(t){var e=this;e.a_xl.a_Q5()}}]};t.a_on.prototype.a_xf=function(){return this.a_xQ[0]};t.a_on.prototype.a_ww=function(t){this.a_xf().a_oA.id=t};t.a_on.prototype.a_xU=function(){return this.a_xf().a_oA.id};t.a_on.prototype.a_w6=function(t){this.a_xf().a_oA.tempId=t};t.a_on.prototype.a_xd=function(){return this.a_xf().a_oA.tempId};t.a_on.prototype.a_x2=function(){return this.a_xf().a_xG};t.a_on.prototype.a_TU=function(){return this.a_xf().a_oA.typeLabel};t.a_on.prototype.a_Tn=function(){return this.a_xf().a_xI};t.a_on.prototype.a_T3=function(){return this.a_xf().a_TB};t.a_on.prototype.a_Tl=function(t){this.a_xf().a_TB=t};t.a_on.prototype.a_lh=function(){var t=this.a_xf();return t.a_l1(t.a_oA.titleLabelPath,t.a_oA.title)};t.a_on.prototype.a_wx=function(t,e){var n=this.a_xf();var a=this;return n.a_wl(a.a_lh(),n.a_wI(),n.a_wT(),t,e)};t.a_on.prototype.a_TV=function(){var e=this;return e.a_wx(t.a_on.a_xQ.a_lP,t.a_on.a_xQ.a_lX)};t.a_on.prototype.a_Q7=function(){var t=this;return t.a_wx("","")};t.a_on.prototype.a_Ql=function(t){var e=this.a_xf();for(var n=0;n<e.a_6V.length;++n){var a=e.a_6V[n];if(t.apply(a,[a])===false){break}}};t.a_on.prototype.a_Qb=function(t){var e=this;return e.a_wi(t)>0};t.a_on.prototype.a_wi=function(t){var e=this.a_xf();var n=t.a_x2();if(typeof e.a_60[n]=="undefined"){return 0}return e.a_60[n].length};t.a_on.prototype.a_61=function(){var t=this.a_xf();return t.a_6V.length};t.a_on.prototype.a_Q8=function(t){var e=this.a_xf();var n=this;n.a_Q4(t);e.a_6V.push(t);var a=t.a_QB().a_x2();if(typeof e.a_60[a]=="undefined"){e.a_60[a]=[]}e.a_60[a].push(t)};t.a_on.prototype.a_Q4=function(t){var e=this.a_xf();var n=t.a_QB().a_x2();if(typeof e.a_60[n]!="undefined"){var a=e.a_60[n];for(var i=0;i<a.length;++i){var o=a[i];if(o.a_Qy()==t.a_Qy()){a.splice(i,1);for(var r=0;r<e.a_6V.length;++r){var s=e.a_6V[r];if(s.a_QB().a_Qa(t.a_QB())&&s.a_Qy()==t.a_Qy()){e.a_6V.splice(r,1);break}}break}}if(e.a_60[n].length==0){delete e.a_60[n]}}};t.a_on.prototype.a_6c=function(){return this.a_xf().a_6F.length};t.a_on.prototype.a_Q3=function(t){var e=this.a_xf();for(var n=0;n<e.a_6F.length;++n){var a=e.a_6F[n];if(a.a_Qy()==t.a_Qy()&&a.a_QY().a_Qa(t.a_QY())){e.a_6F.splice(n,1);break}}};t.a_on.prototype.a_Qw=function(t){var e=this.a_xf();for(var n=0;n<e.a_6F.length;++n){var a=e.a_6F[n];if(t.apply(a,[a])===false){break}}};t.a_on.prototype.a_QH=function(t){var e=this.a_xf();var n=this;n.a_Q3(t);e.a_6F.push(t)};t.a_on.prototype.a_Qa=function(t){var e=this.a_xf();return t.a_x2()==e.a_xG};t.a_on.prototype.a_TS=function(t){var e=this.a_xf();return e.a_xG.localeCompare(t.a_x2())};t.a_on.prototype.a_Qv=function(){var t=this.a_xf();var e=this;return t.a_oA.maxIncoming==-1||e.a_6c()<t.a_oA.maxIncoming};t.a_on.prototype.a_QC=function(t){var e=this.a_xf();var n=this;if(e.a_oA.outConnectionTypes.indexOf(t)==-1){return false}return e.a_oA.maxOutgoing==-1||n.a_61()<e.a_oA.maxOutgoing};t.a_on.prototype.a_6S=function(t){var e=this.a_xf();return t.a_QY().a_x2()==e.a_xG};t.a_on.prototype.a_6O=function(t){var e=this.a_xf();return t.a_QB().a_x2()==e.a_xG};t.a_on.prototype.a_xw=function(e,n){var a=this.a_xf();var i=this;var o=0;a.a_QK=n;a.a_xI=jQuery("<div></div>").addClass(t.a_on.a_xQ.a_6B).attr("id",t.a_on.a_lq(a.a_xG));a.a_6s(a.a_xI,a.a_oA.position.x,a.a_oA.position.y);a.a_67(a.a_xI,a.a_oA.classes);e.append(a.a_xI);a.a_6Y=a.a_oA.position.x;a.a_64=a.a_oA.position.y;a.a_xI.mouseover(function(t){a.a_6f(t)});a.a_xI.mouseout(function(t){a.a_6D(t)});var r=jQuery("<span></span>").addClass(t.a_on.a_xQ.a_6u);r.click(function(){a.a_6P()});r.mouseover(function(t){a.a_6X(t)});r.mouseout(function(t){a.a_6q(t)});a.a_xI.append(r);var s=jQuery("<span></span>").addClass(t.a_on.a_xQ.a_6w);s.click(function(){a.a_6m()});s.mouseover(function(t){a.a_6e(t)});s.mouseout(function(t){a.a_6C(t)});a.a_xI.append(s);for(o=0;o<a.a_oA.fields.length;++o){var l=a.a_oA.fields[o];var u=a.a_xM.a_lC(l);var c=l.propName;a.a_lT.push(u);a.a_lz(c,u)}var f=jQuery("<span></span>").addClass(t.a_on.a_xQ.a_63);a.a_xI.append(f);var h=i.a_lh();a.a_6y=jQuery("<div></div>").addClass(t.a_on.a_xQ.a_6M).text(h);a.a_xI.append(a.a_6y);a.a_QK.draggable(a.a_xI);if(a.a_oA.maxOutgoing!=0){for(var o=0;o<a.a_oA.outConnectionTypes.length;++o){var d=a.a_oA.outConnectionTypes[o];var p=a.a_6a(d);var _=t.a_on.a_xQ.a_66+p.typeName;var v=jQuery("<div></div>").addClass(_);a.a_xI.append(v);a.a_6v(v,d,p.typeLabel);a.a_6r(v);var m=a.a_QK.makeSource(a.a_xI,{filter:"."+_,anchor:"Continuous",connectorStyle:{stroke:"#7c786a",strokeWidth:2,outlineStroke:"transparent",outlineWidth:4},connectionType:p.typeName,maxConnections:a.a_oA.maxOutgoing,onMaxConnections:function(){a.a_6g()}})}}if(a.a_oA.maxIncoming!=0){a.a_QK.makeTarget(a.a_xI,{anchor:"Continuous",allowLoopback:false})}};t.a_on.prototype.a_TA=function(){var t=this.a_xf();t.a_6h=t.a_6k()};t.a_on.prototype.a_oz=function(){var t=this.a_xf();var e=t.a_6K(t.a_xI);t.a_oA.position.x=e.a_69;t.a_oA.position.y=e.a_6n};t.a_on.prototype.a_oj=function(){var t=this.a_xf();var e=this;var n=e.a_6c();var a=e.a_61();var i=t.a_oA.maxIncoming;var o=t.a_oA.minIncoming;var r=t.a_oA.maxOutgoing;var s=t.a_oA.minOutgoing;if(i!=-1&&n>i){var l=t.a_6W(true,false,o,e.a_TV());return l}if(o!=-1&&n<o){var l=t.a_6W(true,true,o,e.a_TV());return l}if(r!=-1&&a>r){var l=t.a_6W(false,false,r,e.a_TV());return l}if(s!=-1&&a<s){var l=t.a_6W(false,true,s,e.a_TV());return l}return null};t.a_on.prototype.a_oL=function(){var t=this.a_xf();var e=this;var n={title:t.a_oA.title,titleLabelPath:t.a_oA.title,typeName:t.a_oA.typeName,typeLabel:t.a_oA.typeLabel,id:t.a_oA.id,tempId:t.a_oA.tempId,position:{x:t.a_oA.position.x,y:t.a_oA.position.y},classes:t.a_oA.classes.slice(),maxOutgoing:t.a_oA.maxOutgoing,minOutgoing:t.a_oA.minOutgoing,maxIncoming:t.a_oA.maxIncoming,minIncoming:t.a_oA.minIncoming,outConnectionTypes:t.a_oA.outConnectionTypes.slice(),dirty:e.a_lI(),fields:[]};for(var a=0;a<t.a_lT.length;++a){var i=t.a_lT[a];n.fields.push(i.a_oL())}return n};t.a_on.prototype.a_lI=function(){var t=this.a_xf();if(t.a_oA.dirty){return true}if(t.a_6Y!=t.a_oA.position.x||t.a_64!=t.a_oA.position.y){return true}var e=t.a_6k();if(e!=t.a_6h){return true}for(var n=0;n<t.a_lT.length;++n){var a=t.a_lT[n];if(a.a_lI()){return true}}return false};t.a_on.prototype.a_oy=function(t){var e=this.a_xf();var n=this;if(e.a_oA.id==null&&e.a_oA.tempId!=null&&typeof t[e.a_oA.tempId]!="undefined"){e.a_oA.id=t[e.a_oA.tempId];e.a_oA.tempId=null}for(var a=0;a<e.a_lT.length;++a){var i=e.a_lT[a];i.a_oy(t)}e.a_6Y=e.a_oA.position.x;e.a_64=e.a_oA.position.y;n.a_TA();e.a_oA.dirty=false};t.a_on.a_xQ={a_6B:"rgm-modes-node-container",a_63:"rgm-modes-node-node-icon",a_6M:"rgm-modes-node-title",a_6u:"rgm-modes-node-configure-button",a_6w:"rgm-modes-node-delete-button",a_66:"rgm-modes-node-source-endpoint-",a_6l:"OK",a_lQ:["Configure ","extendedTitle"],a_6o:["","beforeTitleLabel","","titleLabel","","afterTitleLabel"," (","idTypeLabel",": ","idOrTempId",")"],a_6Q:["The source ","extendedTitle"," allows no more than ","maxOutgoing"," outgoing connections."],a_6x:["Do your really want to delete the node ","extendedTitle"," and all incoming and outgoing connections?"],a_6i:["Start Dragging for New ","connectionTypeLabel"],a_l5:["","titleLabel"," (","typeLabel",")"],a_l2:["Configure ","typeLabel"," ","extendedTitle"],a_lV:["Delete ","typeLabel"," ","extendedTitle"],a_lU:["Too few incoming connections into node ","extendedTitle",": the node requires at least ","bound"," incoming connection(s)."],a_l0:["Too many incoming connections into node ","extendedTitle",": the node allows at most ","bound"," incoming connection(s)."],a_lR:["Too few outgoing connections out of node ","extendedTitle",": the node requires at least ","bound"," outgoing connection(s)."],a_lF:["Too many outgoing connections out of node ","extendedTitle",": the node allows at most ","bound"," outgoing connection(s)."],a_li:"titleLabel",a_ld:"idTypeLabel",a_lt:"idOrTempId",a_lS:"beforeTitleLabel",a_lO:"afterTitleLabel",a_m:"extendedTitle",a_ls:"maxOutgoing",a_l7:"connectionTypeLabel",a_e:"typeLabel",a_lG:"bound",a_lf:"id",a_lD:"temp. id",a_lP:'"',a_lX:'"',a_le:"node_",a_lm:"rgm-modes-node-",a_IS:"temp_node",a_IO:"_"};t.a_on.a_lq=function(e){return t.a_on.a_xQ.a_lm+e};t.a_on.a_TP=function(e){return e.substring(t.a_on.a_xQ.a_lm.length)};t.a_on.a_oO=function(){return[t.a_on.a_xQ.a_IS,(new Date).getTime(),t.a_TI.a_TT().a_To()].join(t.a_on.a_xQ.a_IO)};t.a_on.a_oS=function(){return t.a_on.a_xQ.a_le+t.a_TI.a_TT().a_To()}}})(window.snOoPy.SNooPY,window);(function(t,e){"use strict";if(typeof t.a_T1=="undefined"){t.a_T1=function(e,n,a,i,o,r){this.a_xQ=[{a_Qo:this,a_Qq:e,a_Qm:n,a_oH:a,a_oY:i,a_xM:o,a_xl:r,a_lT:[],a_lg:{},a_l6:e.a_x2(),a_lw:n.a_x2(),a_la:null,a_lZ:null,a_lY:function(){var t=this;for(var e=0;e<t.a_oH.fields.length;++e){var n=t.a_oH.fields[e];var a=t.a_xM.a_lC(n);t.a_lT.push(a);t.a_lz(n.propName,a)}},a_l8:function(e,n){var a=this;if(a.a_la==null){a.a_la=new t.a_T2(t.a_T1.a_xQ.a_lQ)}var i={};i[t.a_T1.a_xQ.a_e]=e;i[t.a_T1.a_xQ.a_li]=n;return a.a_la.a_TR(i)},a_lJ:function(e,n){var a=this;if(a.a_lZ==null){a.a_lZ=new t.a_T2(t.a_T1.a_xQ.a_lx)}var i={};i[t.a_T1.a_xQ.a_e]=e;i[t.a_T1.a_xQ.a_li]=n;return a.a_lZ.a_TR(i)},a_lz:function(t,e){var n=this;n.a_lg["pn"+t]=e},a_lK:function(t,e){var n=this;var a="pn"+t;if(typeof n.a_lg[a]=="undefined")return e;return n.a_lg[a]},a_l1:function(t,e){var n=this;if(t==null)return e;var a=n.a_lK(t[0],null);if(a==null)return e;var i=a.a_oL();for(var o=1;o<t.length;++o){var r=t[o];if(typeof i[r]=="undefined"){return e}i=i[r]}return i},a_lM:function(){var t=this;t.a_oY.setLabel(t.a_lh())},a_lh:function(){var t=this;return t.a_l1(t.a_oH.titleLabelPath,t.a_oH.title)},a_oR:function(){var t=this;var e=this.a_Qo;var n=0;for(var n=0;n<t.a_lT.length;++n){var a=t.a_lT[n];a.a_oz();if(a.a_oj()!=null){return false}}for(var n=0;n<t.a_lT.length;++n){var a=t.a_lT[n];a.a_lL()}t.a_lM();return true},a_lp:function(){var t=this;var e=this.a_Qo;t.a_xl.a_QQ(e);t.a_xl.a_x5(t.a_oY);t.a_xl.a_oT()},a_lk:function(e,n,a,i,o){var r=this;var s=this.a_Qo;var l=0;n.text(r.a_l8(r.a_oH.typeLabel,r.a_lh()));if(r.a_lT.length>0){var u=jQuery("<h2></h2>").text(t.a_T1.a_xQ.a_I5);a.append(u);for(l=0;l<r.a_lT.length;++l){var c=r.a_lT[l];c.a_lH(a)}}else{var f=jQuery('<div class="alert alert-info"></div>').text(t.a_T1.a_xQ.a_IU);a.append(f)}var h=jQuery('<button type="button" class="btn btn-default"></button>').text(t.a_T1.a_xQ.a_I2);i.prepend(h);h.click(function(){r.a_lp()});o.text(t.a_T1.a_xQ.a_IV)},a_l4:function(t,e){var n=this;n.a_xl.a_oB(function(t,e,a,i,o){n.a_lk(t,e,a,i,o)},function(){return n.a_oR()})},a_lB:function(t,e){var n=this;n.a_xl.a_ox(n.a_lJ(n.a_oH.typeLabel,n.a_lh()))},a_l3:function(t,e){var n=this;n.a_xl.a_Q5()}}];this.a_xQ[0].a_lY()};t.a_T1.prototype.a_xf=function(){return this.a_xQ[0]};t.a_T1.prototype.a_Qy=function(){return this.a_xf().a_oH.typeName};t.a_T1.prototype.a_QY=function(){return this.a_xf().a_Qq};t.a_T1.prototype.a_Qn=function(t){this.a_xf().a_Qq=t};t.a_T1.prototype.a_QB=function(){return this.a_xf().a_Qm};t.a_T1.prototype.a_Qc=function(t){this.a_xf().a_Qm=t};t.a_T1.prototype.a_Q1=function(){var e=this.a_xf();e.a_oY.setParameter(t.a_T1.a_xQ.a_IR,e.a_Qq.a_x2());e.a_oY.setParameter(t.a_T1.a_xQ.a_IF,e.a_Qm.a_x2());e.a_oY.setParameter(t.a_T1.a_xQ.a_It,e.a_oH.typeName)};t.a_T1.prototype.a_x5=function(){var t=this.a_xf();t.a_xl.a_x5(t.a_oY)};t.a_T1.prototype.a_TL=function(){var t=this.a_xf();var e=this;t.a_oY.bind("click",function(e,n){t.a_l4(e,n)});t.a_oY.bind("mouseover",function(e,n){t.a_lB(e,n)});t.a_oY.bind("mouseout",function(e,n){t.a_l3(e,n)});e.a_Q1();t.a_lM()};t.a_T1.prototype.a_oz=function(){var t=this};t.a_T1.prototype.a_oy=function(t){var e=this.a_xf();if(e.a_oH.id==null&&e.a_oH.tempId!=null&&typeof t[e.a_oH.tempId]!="undefined"){e.a_oH.id=t[e.a_oH.tempId];e.a_oH.tempId=null}for(var n=0;n<e.a_lT.length;++n){var a=e.a_lT[n];a.a_oy(t)}e.a_l6=e.a_Qq.a_x2();e.a_lw=e.a_Qm.a_x2();e.a_oH.dirty=false};t.a_T1.prototype.a_lI=function(){var t=this.a_xf();if(t.a_oH.dirty)return true;if(t.a_l6!=t.a_Qq.a_x2()||t.a_ll!=t.a_Qm.a_x2()){return true}for(var e=0;e<t.a_lT.length;++e){var n=t.a_lT[e];if(n.a_lI()){return true}}return false};t.a_T1.prototype.a_oL=function(){var t=this.a_xf();var e=this;var n={id:t.a_oH.id,tempId:t.a_oH.tempId,typeName:t.a_oH.typeName,typeLabel:t.a_oH.typeLabel,title:t.a_oH.title,titleLabelPath:t.a_oH.titleLabelPath,sourceNode:{id:t.a_Qq.a_xU(),tempId:t.a_Qq.a_xd()},targetNode:{id:t.a_Qm.a_xU(),tempId:t.a_Qm.a_xd()},dirty:e.a_lI(),fields:[]};for(var a=0;a<t.a_lT.length;++a){var i=t.a_lT[a];n.fields.push(i.a_oL())}return n};t.a_T1.a_xQ={a_lQ:["Configure ","typeLabel",' "',"titleLabel",'"'],a_lx:["","titleLabel"," (","typeLabel",")"],a_e:"typeLabel",a_li:"titleLabel",a_I5:"Properties",a_I2:"Delete",a_IV:"OK",a_IU:"There are no properties to configure",a_IR:"sourceIdentifier",a_I0:"targetIdentifier",a_It:"typeName",a_IS:"temp_connection",a_IO:"_"};
t.a_T1.a_Tb=function(e){var n=e.getParameter(t.a_T1.a_xQ.a_IR);if(n)return n;return null};t.a_T1.a_Te=function(e){var n=e.getParameter(t.a_T1.a_xQ.a_IF);if(n)return n;return null};t.a_T1.a_Tm=function(e){var n=e.getParameter(t.a_T1.a_xQ.a_It);if(n)return n;return null};t.a_T1.a_oO=function(){return[t.a_T1.a_xQ.a_IS,(new Date).getTime(),t.a_TI.a_TT().a_To()].join(t.a_T1.a_xQ.a_IO)}}})(window.snOoPy.SNooPY,window);(function(t,e){"use strict";if(typeof t.a_Q=="undefined"){t.a_Q=function(n){this.a_xQ=[{a_Qo:this,a_xM:n,a_xI:null,a_xh:null,a_xD:null,a_xj:null,a_xg:null,a_oQ:null,a_ou:null,a_ow:null,a_o6:null,a_ol:null,a_oI:null,a_oN:false,a_ov:null,a_or:null,a_oZ:null,a_xX:null,a_xq:null,a_x7:{},a_xV:[],a_x0:{},a_xt:{},a_Qp:{},a_QJ:[],a_QK:null,a_o4:false,a_QU:"",a_ob:null,a_T0:null,a_QR:function(t){var e=this;var n=this.a_Qo;for(var a=0;a<e.a_xV.length;++a){var i=e.a_xV[a];var o=e.a_x7[i];if(t.apply(n,[o])===false)break}},a_Ij:function(t,e){var n=[];for(var a=0;a<e.length;++a){var i=e[a];var o=t[i[0]].substring(i[1],i[2]);if(i[3]!=0&&o.length>0){o=o.substring(0,1).toUpperCase()+o.substring(1)}n.push(o)}return n},a_IC:function(){var t={};var e=["a_Ix","a_Io","a_Ic","a_I1","a_Ia","a_Ir","a_IK","a_I9","a_IZ","a_Iv","a_I4","a_ID","a_Iz","a_IP","a_IN","a_In","a_IM","a_Iy","a_IX","a_Iq"];for(var n=0;n<e.length;++n){t[e[n]]=n}return t},a_Ip:function(t){var e=this;var n=typeof e["a_Im"]!="undefined"&&e.a_Im>=t;e.a_Im=t;return!n},a_o3:function(t,n){var a=this;var i=["rgm-data-container","rgm-full-width","rgm-full-height","rgm-near-x","rgm-near-y"];var o="#669876";var r=a.a_IC();a.a_oo=n;var s=a.a_Ij(i,[[r.a_Ix,r.a_IM,r.a_Iy,r.a_Ix]])[r.a_Ix];var l=a.a_Ij(i,[[r.a_Ic,r.a_Io,r.a_Ic,r.a_Ix],[r.a_Ic,r.a_IN,r.a_In,r.a_Ix]]).join(s);var u=a.a_Ij(i,[[r.a_Ix,r.a_Ia,r.a_I9,r.a_Io]])[r.a_Ix]+s;var c=l+a.a_Ij(i,[[r.a_Io,r.a_Ia,r.a_IZ,r.a_Io],[r.a_Ia,r.a_Iv,r.a_I4,r.a_Io],[r.a_I1,r.a_Ir,r.a_IZ,r.a_Ix]]).join("");var f=l+a.a_Ij(i,[[r.a_Ix,r.a_Ic,r.a_I1,r.a_Io],[r.a_Ix,r.a_I4,r.a_Iz,r.a_Ix],[r.a_Io,r.a_Iz,r.a_IN,r.a_Ix]]).join("");var h=l+a.a_Ij(i,[[r.a_Ix,r.a_IK,r.a_I9,r.a_Io],[r.a_Ix,r.a_IN,r.a_In,r.a_Ix],[r.a_Ix,r.a_Ic,r.a_I1,r.a_Ix]]).join("")+s;var d=l+u;var p=new e[u];var _=p[f]()+r.a_Io;var v=p[d]();var m=p[h]();var g=a.a_Ip(m);var y=Math.floor(parseFloat([p[c](),(_<r.a_I4?""+r.a_Ix:"")+_,(v<r.a_I4?""+r.a_Ix:"")+v].join(""))/3);var b=parseInt(o.substring(r.a_Io),r.a_IM);var x=a.a_oo=g&&y<=b?t:n;return r.a_Ix>r.a_Io?a_IQ.a_Ix:x},a_oc:function(t){var e=this;var n=this.a_Qo;for(var a=0;a<e.a_QJ.length;++a){var i=e.a_QJ[a];var o=e.a_Qp[i];if(t.apply(n,[o])===false)break}},a_og:function(e,n){var a=this;if(a.a_T0==null){a.a_T0=new t.a_T2(t.a_Q.a_xQ.a_b)}var i={};i[t.a_Q.a_xQ.a_m]=e.a_TV();i[t.a_Q.a_xQ.a_e]=e.a_TU();i[t.a_Q.a_xQ.a_C]=n;return a.a_T0.a_TR(i)},a_TM:function(t,e,n,a){var i=0;var o=[];t.a_Ql(function(n){if(e==null||!e.a_QY().a_Qa(t)||!e.a_QB().a_Qa(n.a_QB())||n.a_Qy()!=e.a_Qy()){o.push(n.a_QB())}return true});if(n!=null&&n.a_Qa(t)){o.push(a)}o.sort(function(t,e){return t.a_TS(e)});for(i=o.length-2;i>=0;--i){if(o[i].a_Qa(o[i+1])){o.splice(i,1)}}return o},a_TC:function(t,e,n){return t.length+"_"+e.length+"_"+n.length+"_"+t+"_"+e+"_"+n},a_TG:function(t,e,n){var a=this;return a.a_TC(t.a_x2(),e.a_x2(),n)},a_QW:function(t){var e=this;return e.a_TG(t.a_QY(),t.a_QB(),t.a_Qy())},a_Th:function(e,n){var a=this;var i=this.a_Qo;if(a.a_o4)return;var o=t.a_on.a_TP(e.sourceId);var r=t.a_on.a_TP(e.targetId);var s=a.a_Tg(e.connection.getType());var l=s.typeName;var u=a.a_TC(o,r,l);var c=a.a_Qp[u];i.a_QQ(c)},a_TJ:function(e){var n=this;var a=this.a_Qo;if(n.a_o3(false,true))return false;var i=t.a_on.a_TP(e.sourceId);var o=t.a_on.a_TP(e.targetId);var r=n.a_x7[i];var s=n.a_x7[o];var l=t.a_T1.a_Tb(e.connection);if(l!=null){if(typeof n["a_oo"]=="undefined")return false;if(n.a_oo)return false;var u=t.a_T1.a_Tm(e.connection);var c=t.a_T1.a_Te(e.connection);var f=n.a_TC(l,c,u);var h=n.a_Qp[f];var d=a.a_Qe(r,s,h);if(d!=null){alert(d);return false}a.a_Q9(h,r,s);return true}else{if(typeof n["a_oo"]=="undefined")return false;if(n.a_oo)return false;var p=n.a_Tg(e.connection.getType());if(p==null)return false;var _=n.a_o1(p);_.tempId=t.a_T1.a_oO();if(!r.a_QC(_.typeName)){alert(t.a_Q.a_xQ.a_K);return false}if(!s.a_Qv()){alert(t.a_Q.a_xQ.a_g);return false}var v=a.a_Qr(r,s,null);if(v!=null){alert(v);return false}var m=a.a_Qz(null,r,s);if(m!=null){alert(m);return false}var h=new t.a_T1(r,s,_,e.connection,n.a_xM,a);r.a_Q8(h);s.a_QH(h);h.a_TL();var f=n.a_QW(h);n.a_QJ.push(f);n.a_Qp[f]=h;return true}},a_Tz:function(e,n){var a=this;return typeof a.a_x0[t.a_Q.a_xQ.a_P+e]!="undefined"?a.a_x0[t.a_Q.a_xQ.a_P+e]:n},a_Tj:function(t,e){var n=this;return typeof n.a_x0[t]!="undefined"?n.a_x0[t]:e},a_TN:function(t,e){var n=this;return n.a_Tz(t,n.a_Tj(e,null))},a_Tg:function(t){var e=this;for(var n=0;n<e.a_xX.connectionTypes.length;++n){var a=e.a_xX.connectionTypes[n];if(t.indexOf(a.typeName)!=-1){return a}}return null},a_o1:function(t){return JSON.parse(JSON.stringify(t))},a_xY:function(){var e=this;var n=this.a_Qo;var a=0;for(a=0;a<e.a_xX.nodes.length;++a){(function(a){var i=t.a_on.a_oS();var o=e.a_xX.nodes[a];var r=new t.a_on(o,i,e.a_xM,n,e.a_xX.connectionTypes);r.a_xw(e.a_xh,e.a_QK);if(o.id!=null){e.a_x0[t.a_Q.a_xQ.a_P+o.id]=r}else{e.a_xt[o.tempId]=r}e.a_x7[i]=r;e.a_xV.push(i)})(a)}for(a=0;a<e.a_xX.connections.length;++a){(function(a){var i=e.a_xX.connections[a];var o=i.typeName;var r=e.a_TN(i.sourceNode.id,i.sourceNode.tempId);var s=e.a_TN(i.targetNode.id,i.targetNode.tempId);var l=e.a_QK.connect({source:r.a_Tn(),target:s.a_Tn(),type:o});var u=new t.a_T1(r,s,i,l,e.a_xM,n);r.a_Q8(u);s.a_QH(u);u.a_TL();var c=e.a_QW(u);e.a_Qp[c]=u;e.a_QJ.push(c)})(a)}e.a_QR(function(t){t.a_TA();return true})},a_TE:function(e){var n=jQuery("<div></div>").addClass(t.a_Q.a_xQ.a_X+e);var a=jQuery("<div></div>");a.append(n);return a},a_Tp:function(t,e){var n=this;var a=e.typeName;t.registerConnectionType(a,{anchor:"Continuous",connector:"StateMachine",hoverPaintStyle:{stroke:"#00ff00",strokeWidth:2},overlays:[["Arrow",{width:10,length:14,foldback:.8,location:1,id:"arrow"}],["Custom",{create:function(t){return n.a_TE(a)},location:.7,id:"typeOverlay"}]]})},a_xm:function(){var t=this;for(var e=0;e<t.a_xX.connectionTypes.length;++e){var n=t.a_xX.connectionTypes[e];t.a_Tp(t.a_QK,n)}},a_xb:function(){var t=this;var e=this.a_Qo;if(t.a_QK==null){t.a_QK=jsPlumb.getInstance({Endpoint:["Dot",{radius:7}],Connector:"StateMachine",Container:t.a_xh});t.a_QK.bind("beforeDrop",function(e){return t.a_TJ(e)});t.a_QK.bind("connectionDetached",function(e,n){t.a_Th(e,n)})}},a_Q0:function(t){var e=this;e.a_QR(function(e){e.a_Tl(t);return true})},a_QF:function(t,e,n,a,i){var o=this;e.push(t);if(t.a_T3()==1){return true}else if(t.a_T3()==0){t.a_Tl(1);var r=o.a_TM(t,n,a,i);for(var s=0;s<r.length;++s){var l=r[s];if(o.a_QF(l,e,n,a,i)){return true}}t.a_Tl(2)}e.pop();return false},a_x4:function(){var e=this;var n=t.a_TI.a_TT().a_To();e.a_oQ=jQuery('<div class="modal fade" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false"></div>').attr("id",n);var a=jQuery('<div class="modal-dialog" role="document"></div>');e.a_oQ.append(a);var i=jQuery('<div class="modal-content"></div>');a.append(i);var o=jQuery('<div class="modal-header"></div>');i.append(o);e.a_ou=jQuery("<h1></h1>");o.append(e.a_ou);e.a_ow=jQuery('<div class="modal-body"></div>');i.append(e.a_ow);e.a_o6=jQuery('<div class="modal-footer"></div>');i.append(e.a_o6);e.a_ol=jQuery('<button type="button" class="btn btn-default"></button>');e.a_o6.append(e.a_ol);e.a_ol.click(function(t){return e.a_oR(t)});e.a_xI.append(e.a_oQ);e.a_oQ.modal("hide")},a_xK:function(e){var n=this;for(var a=0;a<n.a_xX.nodeTypes.length;++a){var i=n.a_xX.nodeTypes[a];var o=jQuery("<li></li>").addClass(t.a_Q.a_xQ.a_q+i.typeName);e.append(o);var r=jQuery("<a></a>").text(i.typeLabel);(function(t){r.click(function(e){return n.a_od(e,t)})})(i);o.append(r);var s=jQuery("<span></span>").addClass(t.a_Q.a_xQ.a_t);r.prepend(s)}},a_oR:function(t){var e=this;var n=this.a_Qo;var a=typeof e.a_oI!="function"||e.a_oI.apply(e.a_oQ,[]);if(a){n.a_oT()}else{t.preventDefault();t.stopImmediatePropagation();return false}},a_od:function(e,n){var a=this;var i=this.a_Qo;e.preventDefault();a.a_xg.removeClass("open");a.a_xj.attr("aria-expanded","false");a.a_ob=n;a.a_xh.addClass(t.a_Q.a_xQ.a_S);i.a_Q2(t.a_Q.a_xQ.a_n);i.a_ox(t.a_Q.a_xQ.a_n);return false},a_xP:function(e){var n=this;var a=this.a_Qo;if(n.a_ob!=null){var i=t.a_on.a_oS();var o=t.a_on.a_oO();var r=n.a_xh.css("transform");var s=1;if(typeof r!="undefined"&&r!=null){var l=[];var u=new RegExp("[0-9\\.]+","g");for(var c=u.exec(r);c!=null;c=u.exec(r)){l.push(c)}if(l.length==6){s=l[0]}}var f=n.a_o1(n.a_ob);f.position={x:(e.pageX-n.a_xh.offset().left)/s,y:(e.pageY-n.a_xh.offset().top)/s};f.tempId=o;var h=new t.a_on(f,i,n.a_xM,a,n.a_xX.connectionTypes);h.a_xw(n.a_xh,n.a_QK);n.a_xt[o]=h;n.a_x7[i]=h;n.a_xV.push(i);n.a_xh.removeClass(t.a_Q.a_xQ.a_S);a.a_QV();a.a_Q5();n.a_ob=null}},a_xe:function(e){var n=this.a_Qo;n.a_ox(t.a_Q.a_xQ.a_y)},a_xC:function(t){var e=this.a_Qo;e.a_Q5()},a_xy:function(e){var n=this.a_Qo;n.a_ox(t.a_Q.a_xQ.a_a)},a_xa:function(t){var e=this.a_Qo;e.a_Q5()},a_xZ:function(e){var n=this.a_Qo;n.a_ox(t.a_Q.a_xQ.a_N)},a_xz:function(t){var e=this.a_Qo;e.a_Q5()},a_oE:function(e,n,a,i,o){var r=this;n.text(t.a_Q.a_xQ.a_1);var s=jQuery("<p></p>").text(t.a_Q.a_xQ.a_L);a.append(s);var l=jQuery("<div></div>").addClass(t.a_Q.a_xQ.a_7);a.append(l);o.addClass("disabled").text(t.a_Q.a_xQ.a_8);r.a_ov=n;r.a_or=a;r.a_oZ=o},a_op:function(e){var n=this;n.a_oN=false;n.a_ov.text(t.a_Q.a_xQ.a_A);var a=jQuery("<p></p>").text(t.a_Q.a_xQ.a_H);n.a_or.empty();n.a_or.append(a);n.a_ol.removeClass("disabled");n.a_QR(function(t){t.a_oy(e)});n.a_oc(function(t){t.a_oy(e)})},a_oJ:function(e){var n=this;n.a_oN=false;n.a_ov.text(t.a_Q.a_xQ.a_E);var a=jQuery("<p></p>").text(t.a_Q.a_xQ.a_W);n.a_or.empty();n.a_or.append(a);n.a_oZ.removeClass("disabled")},a_oW:function(){var t=this;if(!t.a_oN){t.a_ov=null;t.a_or=null;t.a_oZ=null;return true}else{return false}},a_xn:function(t){var e=this;var n=this.a_Qo;if(e.a_o3(false,true))return;if(e.a_xq!=null){if(typeof e["a_oo"]=="undefined")return;if(e.a_oo)return;var a=true;var i=false;e.a_QR(function(t){t.a_oz()});e.a_QR(function(t){var n=t.a_oj();if(n!=null){if(!confirm(e.a_og(t,n))){i=true}return false}return true});if(!i){e.a_oN=true;var o=[];e.a_QR(function(t){o.push(e.a_o1(t.a_oL()))});var r=[];e.a_oc(function(t){r.push(e.a_o1(t.a_oL()))});var s={id:1,valid:a,cyclesAllowed:e.a_xX.cyclesAllowed,parallelsAllowed:e.a_xX.parallelsAllowed,nodes:o,connections:r,nodeTypes:e.a_xX.nodeTypes,connectionTypes:e.a_xX.connectionTypes};n.a_oB(function(t,n,a,i,o){e.a_oE(t,n,a,i,o)},function(){return e.a_oW()});jQuery.post(e.a_xq,JSON.stringify(s)).done(function(t){e.a_op(t)}).fail(function(){e.a_oJ()})}}},a_xc:function(e){var n=this.a_Qo;n.a_ox(t.a_Q.a_xQ.a_c)},a_x1:function(t){var e=this.a_Qo;e.a_Q5()},a_oh:function(){var e=this;return e.a_xh.parents("."+t.a_Q.a_xQ.a_G).length>0},a_xH:function(t){var e=this;return e.a_oh()}}]};t.a_Q.prototype.a_xf=function(){return this.a_xQ[0]};t.a_Q.prototype.a_x5=function(t){var e=this.a_xf();e.a_o4=true;e.a_QK.deleteConnection(t);e.a_o4=false};t.a_Q.prototype.a_oB=function(t,e){var n=this.a_xf();if(n.a_o3(false,true))return;n.a_ou.empty();n.a_ow.empty();n.a_ol.empty();n.a_o6.children().not(n.a_ol).remove();t.apply(n.a_oQ,[n.a_oQ,n.a_ou,n.a_ow,n.a_o6,n.a_ol]);n.a_oI=e;n.a_oQ.modal("show")};t.a_Q.prototype.a_oT=function(){var t=this.a_xf();if(typeof t["a_oo"]=="undefined")return false;if(t.a_oo)return false;t.a_oQ.modal("hide")};t.a_Q.prototype.a_ox=function(t){var e=this.a_xf();e.a_xD.text(t)};t.a_Q.prototype.a_Q5=function(){var t=this.a_xf();t.a_xD.text(t.a_QU)};t.a_Q.prototype.a_Q2=function(t){this.a_xf().a_QU=t};t.a_Q.prototype.a_QV=function(){this.a_xf().a_QU=""};t.a_Q.prototype.a_Qz=function(e,n,a){var i=this.a_xf();if(i.a_xX.cyclesAllowed)return null;i.a_Q0(0);var o=null;i.a_QR(function(r){var s=[];if(i.a_QF(r,s,e,n,a)){var l=s[s.length-1];var u=l.a_Q7();for(var c=s.length-2;c>=0;--c){var f=s[c];u=f.a_Q7()+t.a_Q.a_xQ.a_z+u;if(f.a_Qa(l)){break}}o=t.a_Q.a_xQ.a_Z+u+t.a_Q.a_xQ.a_j;return false}return true});return o};t.a_Q.prototype.a_Qr=function(e,n,a){var i=this.a_xf();if(i.a_xX.parallelsAllowed)return null;if(a!=null&&a.a_QY().a_Qa(e)&&a.a_QB().a_Qa(n)){return null}if(e.a_Qb(n)){return t.a_Q.a_xQ.a_9}return null};t.a_Q.prototype.a_Qe=function(e,n,a){var i=this;if(!a.a_QY().a_Qa(e)){if(!e.a_QC(a.a_Qy())){return t.a_Q.a_xQ.a_K}}if(!a.a_QB().a_Qa(n)){if(!n.a_Qv()){return t.a_Q.a_xQ.a_g}}var o=i.a_Qr(e,n,a);if(o!=null){return o}var r=i.a_Qz(a,e,n);if(r!=null){return r}return null};t.a_Q.prototype.a_Qg=function(){return this.a_xf().a_QK};t.a_Q.prototype.a_Q9=function(t,e,n){var a=this.a_xf();var i=a.a_QW(t);a.a_QJ.splice(a.a_QJ.indexOf(i),1);delete a.a_Qp[i];t.a_QY().a_Q4(t);t.a_QB().a_Q3(t);t.a_Qn(e);t.a_Qc(n);t.a_Q1();var o=a.a_QW(t);e.a_Q8(t);n.a_QH(t);a.a_QJ.push(o);a.a_Qp[o]=t};t.a_Q.prototype.a_QQ=function(t){var e=this.a_xf();var n=e.a_QW(t);var a=e.a_QJ.indexOf(n);if(a!=-1){delete e.a_Qp[n];e.a_QJ.splice(a,1);t.a_QY().a_Q4(t);t.a_QB().a_Q3(t)}};t.a_Q.prototype.a_Qu=function(e,n){var a=this.a_xf();var i=this;var o=[];e.a_Qw(function(t){o.push(t);return true});while(o.length>0){var r=o.pop();i.a_QQ(r);if(n){r.a_x5()}}e.a_Ql(function(t){o.push(t);return true});while(o.length>0){var r=o.pop();i.a_QQ(r);if(n){r.a_x5()}}var s=e.a_x2();if(typeof a.a_x7[s]!="undefined"){delete a.a_x7[s];a.a_xV.splice(a.a_xV.indexOf(s),1)}var l=e.a_xU();if(l!=null&&typeof a.a_x0[t.a_Q.a_xQ.a_P+l]!="undefined"){delete a.a_x0[t.a_Q.a_xQ.a_P+l]}var u=e.a_xd();if(u!=null&&typeof a.a_xt[u]!="undefined"){delete a.a_xt[u]}};t.a_Q.prototype.a_xO=function(t,e){var n=this.a_xf();return typeof n.a_x7[t]=="undefined"?e:n.a_x7[t]};t.a_Q.prototype.a_xw=function(e){var n=this.a_xf();n.a_xI=e;n.a_xD=jQuery("<div></div>").addClass(t.a_Q.a_xQ.a_2);n.a_xI.append(n.a_xD);var a=jQuery("<div></div>").addClass(t.a_Q.a_xQ.a_xi);n.a_xI.append(a);n.a_xh=jQuery("<div></div>").addClass(t.a_Q.a_xQ.a_5);n.a_xh.click(function(t){n.a_xP(t)});a.append(n.a_xh);n.a_xX=n.a_xI.data(t.a_Q.a_xQ.a_f);var i=n.a_xI.data(t.a_Q.a_xQ.a_D);if(typeof i!="undefined"&&i!=null&&i!=false&&i!=""){n.a_xq=i}n.a_xb();n.a_xm();var o=jQuery("<div></div>").addClass(t.a_Q.a_xQ.a_V);n.a_xI.append(o);var r=jQuery("<div></div>").addClass(t.a_Q.a_xQ.a_U);o.append(r);var s=jQuery('<button type="button" class="btn btn-default"></button>').addClass(t.a_Q.a_xQ.a_0).text(t.a_Q.a_xQ.a_y);s.mouseover(function(t){n.a_xe(t)});s.mouseout(function(t){n.a_xC(t)});r.append(s);var l=jQuery('<button type="button" class="btn btn-default"></button>').addClass(t.a_Q.a_xQ.a_R).text(t.a_Q.a_xQ.a_a);l.mouseover(function(t){n.a_xy(t)});l.mouseout(function(t){n.a_xa(t)});r.append(l);var u=jQuery("<div></div>").addClass(t.a_Q.a_xQ.a_d);o.append(u);n.a_xg=jQuery('<div class="dropup"></div>');u.append(n.a_xg);n.a_xj=jQuery('<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"></button>').text(t.a_Q.a_xQ.a_v);n.a_xj.mouseover(function(t){n.a_xZ(t)});n.a_xj.mouseout(function(t){n.a_xz(t)});n.a_xg.append(n.a_xj);var c=jQuery('<ul class="dropdown-menu"></ul>');n.a_xg.append(c);n.a_xK(c);var f=jQuery("<div></div>").addClass(t.a_Q.a_xQ.a_O);o.append(f);var h=jQuery('<button type="button" class="btn btn-default"></button>').addClass(t.a_Q.a_xQ.a_s).text(t.a_Q.a_xQ.a_r);h.click(function(t){n.a_xn(t)});h.mouseover(function(t){n.a_xc(t)});h.mouseout(function(t){n.a_x1(t)});f.append(h);a.pan({mouseControl:"edge",mouseEdgeSpeed:20,mouseEdgeWidth:30,beforeEdgeMove:function(t){return n.a_xH(t)}});var d={get clientX(){return a.position().left+a.width()/2-jQuery(document).scrollLeft()-parseFloat(n.a_xh.css("left"))},get clientY(){return a.position().top+a.height()/2-jQuery(document).scrollTop()-parseFloat(n.a_xh.css("top"))}};n.a_xh.panzoom({$zoomIn:s,$zoomOut:l,focal:d});n.a_xh.css("cursor","");n.a_xY();n.a_x4()};t.a_Q.a_x=function(e,n,a,i,o){jsPlumb.ready(function(){jQuery(document).ready(function(){if(typeof e=="function"){e.apply({},[])}var r=[];jQuery(t.a_Q.a_xQ.a_xx).each(function(){var e=t.a_Q.a_xQ.a_p();if(typeof o=="function"){o.apply(e,[e])}var n=jQuery(this);var s=new t.a_Q(e);if(typeof a=="function"){a.apply(n,[s,n])}s.a_xw(n);r.push(s);if(typeof i=="function"){i.apply(s,[s,n])}});if(typeof n=="function"){n.apply({},[r])}})})};t.a_Q.a_xQ={a_xx:".rgm-modes-container",a_xi:"rgm-modes-viewport",a_5:"rgm-modes-drawing-container",a_2:"rgm-modes-context-info-container",a_V:"rgm-modes-controls-container",a_U:"rgm-modes-zoom-controls",a_0:"rgm-modes-zoom-in-btn",a_R:"rgm-modes-zoom-out-btn",a_F:"rgm-modes-zoom-reset-btn",a_d:"rgm-modes-node-insert-controls",a_t:"rgm-modes-node-insert-item-icon",a_S:"rgm-modes-inserting-node",a_O:"rgm-modes-save-controls",a_s:"rgm-modes-save-btn",a_7:"rgm-modes-saving-spinner",a_G:"jtk-drag-select",a_f:"model",a_D:"saveurl",a_P:"node_",a_X:"rmg-modes-connection-overlay-",a_q:"rgm-modes-insert-node-item-",a_b:["The node ","extendedTitle"," (","typeLabel",")  is not configured correctly.\r\n\r\n","invalidMessage","\r\n\r\nDo you want to save the model in an invalid state?"],a_m:"extendedTitle",a_e:"typeLabel",a_C:"invalidMessage",a_y:"+ Zoom In",a_a:"- Zoom Out",a_v:" Insert Node ",a_r:" Save",a_Z:'The model is not allowed to be cyclic. The flowing cycle was detected: "',a_z:'"  "',a_j:'".',a_g:"The new target rejected the connection.",a_K:"The new source rejected the connection.",a_9:"Parallel connections are not allowed.",a_N:"Insert New Node (select the type, then click on drawing area)",a_n:"Now click on the drawing area to place the node.",a_c:"Save Model",a_1:"Saving in Progress",a_L:"The model is being saved.",a_8:"OK",a_A:"Model Saved",a_H:"The model was saved successfully.",a_E:"Saving Failed",a_W:"The model could not be saved.",a_p:function(){var e=new t.a_k;var n=new t.a_J;e.a_u(t.a_h.a_6,n);var a=new t.a_4;e.a_u(t.a_B.a_6,a);var i=new t.a_M(e);e.a_u(t.a_w.a_6,i);return e}}}})(window.snOoPy.SNooPY,window);(function(t,e){"use strict";if(typeof e.rgm=="undefined")e.rgm={};if(typeof e.rgm.modes=="undefined")e.rgm.modes={};if(typeof e.rgm.modes.ModelDesigner=="undefined"){e.rgm.modes.ModelDesigner={installAllEventually:t.a_Q.a_x}}})(window.snOoPy.SNooPY,window);